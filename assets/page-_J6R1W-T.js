import{r as a,s as B,j as t,v as r,x as z,y as R,z as _,o as b,B as v,l as S,p as U}from"./index-DwZ3VcdL.js";import{d as p,f as y,g as M,b as x,a as f,T as m,B as h,h as O,c as k}from"./button-BxUGn_cn.js";import{u as F}from"./store-CU1LKeLW.js";import{H}from"./index-CQDDfGWA.js";import{B as j}from"./index-Rcsh-DYt.js";import{S as E}from"./index-Baf81WNP.js";import{I as G,a as W,b as Y}from"./index-CGks_N0C.js";import{A as q}from"./index-D7gmBVc6.js";import{u as J}from"./use-navigate-C5nXX1Gc.js";import{S as K}from"./index-B4g9YTQJ.js";import{E as Q}from"./index-RXfxmJ7z.js";import"./iconBase-BFWPPRPh.js";import"./index-cB1IlPo3.js";import"./is-phone-yIPvuEgq.js";import"./index-te4-RsG4.js";import"./asyncToGenerator-B1e0bwTg.js";import"./reactNode-B9hRVRxn.js";import"./index-BS5FmYRV.js";import"./index-Bcuwydoc.js";import"./useLocale-CE8QlpIE.js";const d=p.span`
  ${o=>{const{$color:e,$fontSize:s}=o;return{color:e,fontSize:s}}}}
`,V=a.memo(function(e){const{value:s,fontSize:n=20,decimalSize:c=16,symbolSize:l=14,color:i,decimalColor:A,symbolColor:C,showPrefix:$=!1,className:T}=e,[w,u]=String(s).split("."),I=y(),[N,P,L]=M([l,n,c]);return B(w)?null:t.jsxs(x,{className:T,$alignItems:f.BASELINE,onClick:D=>{D.stopPropagation(),I()},children:[t.jsx(E,{when:$,children:()=>t.jsx(d,{$fontSize:N,$color:C||i,children:"¥"})}),t.jsx(d,{$fontSize:P,$color:i,children:w}),t.jsx(E,{when:(u==null?void 0:u.length)>0,children:()=>t.jsx(d,{$fontSize:L,$color:A||i,children:`.${u}`})})]})}),g=p(O)`
  margin-right: 1rem;
`,X=a.memo(({children:o})=>{const e={[r.PAID]:{$presetTheme:m.SUCCESS},[r.UNPAID]:{$presetTheme:m.PROCESSING},[r.REFUNDED]:{$presetTheme:m.WARNING},[r.CANCELED]:{$presetTheme:m.INFO},[r.INCOME]:{$presetTheme:m.SUCCESS}}[o],s=z[o];return t.jsx(g,{...e,children:s})}),Z=a.memo(({children:o})=>{const e=R[o];return t.jsx(g,{children:e})}),ee=a.memo(({children:o})=>{const e=_[o];return t.jsx(g,{children:e})}),te=p(j)`
  padding-left: 1rem;
`;function oe(o){const{flow:e,onDelete:s}=o,{id:n}=e,{setFlow:c}=F("setFlow");return t.jsx(te,{wrapperProps:{$alignItems:f.CENTER},buttons:[{text:"编辑",$presetTheme:h.PRIMARY,to:`/flow/editor/${n}`,onClick:()=>c(e)},{text:"删除",$presetTheme:h.DANGER,logInfo:{id:n},onClick(l){l.stopPropagation(),s==null||s(n)}}]})}function se(o){switch(o){case r.PAID:return"var(--color-theme-7)";case r.UNPAID:return"var(--color-gray-6)";case r.REFUNDED:case r.INCOME:return"#52c41a";case r.CANCELED:return"var(--color-gray-5)"}}const re=p(V)`
  margin-right: 1rem;
  ${o=>{const{$status:e}=o;return{color:se(e),textDecoration:e===r.CANCELED?"line-through":"none"}}}
`,ne=a.memo(o=>{const{flow:e,onClick:s,onDelete:n}=o;return t.jsx(G,{onClick:s,children:t.jsxs(H,{rightArea:t.jsx(oe,{flow:e,onDelete:n}),children:[t.jsxs(x,{$flex:"1",$alignItems:f.CENTER,children:[t.jsx(X,{children:e.status}),t.jsx(Z,{children:e.account}),t.jsx(ee,{children:e.category}),t.jsx(re,{value:e.amount,$status:e.status,showPrefix:!0}),t.jsx(W,{children:e.title})]}),t.jsx(Y,{children:e.createTime})]})})}),ie=p(x)`
  padding: var(--page-padding);
`;function ae(o){const{deleteFlow:e}=U();e(o)}function Pe(){const o=b(),{setFlow:e}=F("setFlow"),{flows:s}=v("flows"),{flows:n}=o,c=J(),l=a.useMemo(()=>n||s,[s,n]);return a.useEffect(()=>{e(void 0)},[e]),t.jsx(q,{onFirstAppear:()=>S.appear("flow-list"),children:t.jsx(ie,{$direction:k.COLUMN,children:t.jsx(K,{when:l.length>0,fullback:t.jsx(Q,{}),children:()=>l.map(i=>t.jsx(ne,{flow:i,onDelete:ae,onClick:()=>{e(i),S.click("flow-item-click",{id:i.id}),c(`/flow/detail/${i.id}`)}},i.id))})})})}async function Le(){return window.logger.todo("请求接口加载流水信息, 报错时使用本地存储中的流水信息"),{flows:null}}function le(){return t.jsx(j,{buttons:[{text:"新建",to:"/flow/editor",$presetTheme:h.PRIMARY}]})}const De={title:"流水列表",crumbLabel:"列表",rightArea:t.jsx(le,{})};export{Pe as Component,De as handle,Le as loader};
