import{r as i,Q as we,W as U,V as he,P as me,f as Ee,R as g,q as ve,g as b,T as ge,ad as Ne,ae as _e,ap as Fe}from"./index-D6qafkXg.js";import{u as Re,o as Ie,b as Oe,F as Pe,C as Ce}from"./index-CpIN0JpX.js";import{B as $e,t as je,r as pe,f as Be,u as Ae}from"./BaseInput-fAzZ3Fu8.js";import{a as ze,u as Ke}from"./LoadingOutlined-EDFBw0zl.js";import{u as Ve,g as xe,a as De}from"./useVariants-BcLj5rll.js";import{u as Te}from"./compact-item-DYfPSb72.js";var Le=["show"];function Me(e,r){return i.useMemo(function(){var c={};r&&(c.show=we(r)==="object"&&r.formatter?r.formatter:!!r),c=U(U({},c),e);var s=c,n=s.show,d=he(s,Le);return U(U({},d),{},{show:!!n,showFormatter:typeof n=="function"?n:void 0,strategy:d.strategy||function(v){return v.length}})},[e,r])}var ke=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ue=i.forwardRef(function(e,r){var c=e.autoComplete,s=e.onChange,n=e.onFocus,d=e.onBlur,v=e.onPressEnter,C=e.onKeyDown,E=e.onKeyUp,j=e.prefixCls,p=j===void 0?"rc-input":j,N=e.disabled,W=e.htmlSize,Y=e.className,Z=e.maxLength,B=e.suffix,H=e.showCount,A=e.count,_=e.type,ee=_===void 0?"text":_,te=e.classes,h=e.classNames,m=e.styles,z=e.onCompositionStart,K=e.onCompositionEnd,ne=he(e,ke),ae=i.useState(!1),V=me(ae,2),oe=V[0],a=V[1],P=i.useRef(!1),x=i.useRef(!1),l=i.useRef(null),F=i.useRef(null),D=function(t){l.current&&je(l.current,t)},se=Re(e.defaultValue,{value:e.value}),q=me(se,2),T=q[0],y=q[1],L=T==null?"":String(T),re=i.useState(null),Q=me(re,2),w=Q[0],le=Q[1],f=Me(A,H),R=f.max||Z,I=f.strategy(L),ue=!!R&&I>R;i.useImperativeHandle(r,function(){var o;return{focus:D,blur:function(){var u;(u=l.current)===null||u===void 0||u.blur()},setSelectionRange:function(u,k,$){var O;(O=l.current)===null||O===void 0||O.setSelectionRange(u,k,$)},select:function(){var u;(u=l.current)===null||u===void 0||u.select()},input:l.current,nativeElement:((o=F.current)===null||o===void 0?void 0:o.nativeElement)||l.current}}),i.useEffect(function(){x.current&&(x.current=!1),a(function(o){return o&&N?!1:o})},[N]);var G=function(t,u,k){var $=u;if(!P.current&&f.exceedFormatter&&f.max&&f.strategy(u)>f.max){if($=f.exceedFormatter(u,{max:f.max}),u!==$){var O,de;le([((O=l.current)===null||O===void 0?void 0:O.selectionStart)||0,((de=l.current)===null||de===void 0?void 0:de.selectionEnd)||0])}}else if(k.source==="compositionEnd")return;y($),l.current&&pe(l.current,t,s,$)};i.useEffect(function(){if(w){var o;(o=l.current)===null||o===void 0||o.setSelectionRange.apply(o,Ee(w))}},[w]);var ie=function(t){G(t,t.target.value,{source:"change"})},ce=function(t){P.current=!1,G(t,t.currentTarget.value,{source:"compositionEnd"}),K==null||K(t)},fe=function(t){v&&t.key==="Enter"&&!x.current&&(x.current=!0,v(t)),C==null||C(t)},J=function(t){t.key==="Enter"&&(x.current=!1),E==null||E(t)},X=function(t){a(!0),n==null||n(t)},S=function(t){x.current&&(x.current=!1),a(!1),d==null||d(t)},M=function(t){y(""),D(),l.current&&pe(l.current,t,s)},ye=ue&&"".concat(p,"-out-of-range"),Se=function(){var t=Ie(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return g.createElement("input",ve({autoComplete:c},t,{onChange:ie,onFocus:X,onBlur:S,onKeyDown:fe,onKeyUp:J,className:b(p,ge({},"".concat(p,"-disabled"),N),h==null?void 0:h.input),style:m==null?void 0:m.input,ref:l,size:W,type:ee,onCompositionStart:function(k){P.current=!0,z==null||z(k)},onCompositionEnd:ce}))},be=function(){var t=Number(R)>0;if(B||f.show){var u=f.showFormatter?f.showFormatter({value:L,count:I,maxLength:R}):"".concat(I).concat(t?" / ".concat(R):"");return g.createElement(g.Fragment,null,f.show&&g.createElement("span",{className:b("".concat(p,"-show-count-suffix"),ge({},"".concat(p,"-show-count-has-suffix"),!!B),h==null?void 0:h.count),style:U({},m==null?void 0:m.count)},u),B)}return null};return g.createElement($e,ve({},ne,{prefixCls:p,className:b(Y,ye),handleReset:M,value:L,focused:oe,triggerFocus:D,suffix:be(),disabled:N,classes:te,classNames:h,styles:m,ref:F}),Se())});const We=e=>{let r;return typeof e=="object"&&(e!=null&&e.clearIcon)?r=e:e&&(r={clearIcon:g.createElement(ze,null)}),r};function He(e,r){const c=i.useRef([]),s=()=>{c.current.push(setTimeout(()=>{var n,d,v,C;!((n=e.current)===null||n===void 0)&&n.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((v=e.current)===null||v===void 0)&&v.input.hasAttribute("value"))&&((C=e.current)===null||C===void 0||C.input.removeAttribute("value"))}))};return i.useEffect(()=>(r&&s(),()=>c.current.forEach(n=>{n&&clearTimeout(n)})),[]),s}function qe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var Qe=function(e,r){var c={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(c[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)r.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(c[s[n]]=e[s[n]]);return c};const tt=i.forwardRef((e,r)=>{const{prefixCls:c,bordered:s=!0,status:n,size:d,disabled:v,onBlur:C,onFocus:E,suffix:j,allowClear:p,addonAfter:N,addonBefore:W,className:Y,style:Z,styles:B,rootClassName:H,onChange:A,classNames:_,variant:ee}=e,te=Qe(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:h,direction:m,allowClear:z,autoComplete:K,className:ne,style:ae,classNames:V,styles:oe}=Ne("input"),a=h("input",c),P=i.useRef(null),x=Ke(a),[l,F,D]=Be(a,H),[se]=Ae(a,x),{compactSize:q,compactItemClassnames:T}=Oe(a,m),y=Te(S=>{var M;return(M=d??q)!==null&&M!==void 0?M:S}),L=g.useContext(_e),re=v??L,{status:Q,hasFeedback:w,feedbackIcon:le}=i.useContext(Pe),f=De(Q,n),R=qe(e)||!!w;i.useRef(R);const I=He(P,!0),ue=S=>{I(),C==null||C(S)},G=S=>{I(),E==null||E(S)},ie=S=>{I(),A==null||A(S)},ce=(w||j)&&g.createElement(g.Fragment,null,j,w&&le),fe=We(p??z),[J,X]=Ve("input",ee,s);return l(se(g.createElement(Ue,Object.assign({ref:Fe(r,P),prefixCls:a,autoComplete:K},te,{disabled:re,onBlur:ue,onFocus:G,style:Object.assign(Object.assign({},ae),Z),styles:Object.assign(Object.assign({},oe),B),suffix:ce,allowClear:fe,className:b(Y,H,D,x,T,ne),onChange:ie,addonBefore:W&&g.createElement(Ce,{form:!0,space:!0},W),addonAfter:N&&g.createElement(Ce,{form:!0,space:!0},N),classNames:Object.assign(Object.assign(Object.assign({},_),V),{input:b({[`${a}-sm`]:y==="small",[`${a}-lg`]:y==="large",[`${a}-rtl`]:m==="rtl"},_==null?void 0:_.input,V.input,F),variant:b({[`${a}-${J}`]:X},xe(a,f)),affixWrapper:b({[`${a}-affix-wrapper-sm`]:y==="small",[`${a}-affix-wrapper-lg`]:y==="large",[`${a}-affix-wrapper-rtl`]:m==="rtl"},F),wrapper:b({[`${a}-group-rtl`]:m==="rtl"},F),groupWrapper:b({[`${a}-group-wrapper-sm`]:y==="small",[`${a}-group-wrapper-lg`]:y==="large",[`${a}-group-wrapper-rtl`]:m==="rtl",[`${a}-group-wrapper-${J}`]:X},xe(`${a}-group-wrapper`,f,w),F)})}))))});export{tt as I,Me as a,We as g,He as u};
