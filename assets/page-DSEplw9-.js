import{x as o,r as a}from"./index-BQG4kE1A.js";import{B as l}from"./index-D9cDWbKp.js";import{V as p,X as u,Y as m,l as s,w as f}from"./index-Zg-Db6dE.js";import{g as d,u as c}from"./store-BnJx0tzd.js";import{E as y}from"./index-BPrXG5d5.js";import{A as x}from"./index-DVwpFUBQ.js";import"./iconBase-W4z1J4Ew.js";import"./index-Aqa3nm4A.js";import"./is-phone-DJjYfsgQ.js";import"./index-CIk4iM24.js";import"./asyncToGenerator-DacCiY0k.js";import"./index-B2CHRZiI.js";async function w(t){if(!u(t))return t;const e=await m(t);return URL.createObjectURL(e)}async function i(t){if(!t)return"";const{url:e,content:r}=t;if(e)return await w(e);if(!r)return"";const n=p(r);return URL.createObjectURL(n)}async function U(){const{currentRecord:t}=d(),e=await i(t),r=document.createElement("a");r.style.display="none",r.href=e,r.download=`${t==null?void 0:t.name}.webm`,r.click(),setTimeout(()=>{window.URL.revokeObjectURL(e)},100)}function g(){return o.jsx(l,{buttons:[{text:"下载",onClick:U}]})}function j(){const{currentRecord:t}=c("currentRecord");return(t==null?void 0:t.name)||"回放"}function P(){const{currentRecord:t}=c("currentRecord"),[e,r]=a.useState("");return a.useEffect(()=>{(async()=>{try{const n=await i(t);r(n)}catch(n){s.error("get-play-url",n.message)}})()},[t]),o.jsx(x,{onFirstAppear:()=>s.appear("playback"),children:o.jsx(f,{when:!!e,fullback:o.jsx(y,{}),children:()=>o.jsx("video",{src:e,controls:!0})})})}const v={title:"回放",needBackIcon:!0,rightArea:o.jsx(g,{}),titleArea:o.jsx(j,{})};export{P as Component,v as handle};
