import{m as c,aE as i,aF as p,a3 as u,k as d,a2 as n,l as s,aD as l}from"./index-Cj4d-NSq.js";import{N as f}from"./opfs-key-D0VDwJ2Y.js";const{useStore:h,useStoreSlice:y,getStore:m}=c(e=>({currentNotepad:void 0,setNotepad:t=>e({currentNotepad:t})}));async function g(e){const{url:t}=e;if(!t)return e;const o=await l(t);return{...e,content:o,url:""}}async function $(e){try{const t=await g(e),o=await i(JSON.stringify(t)),r=new URL(`./#/notepad/preview/source/${encodeURIComponent(o)}`,`${location.protocol}//${location.host}${u}`),{showMessage:a}=d();if(!n.isCopyable)return s.error("copy-not-support","shareNotepad",{id:e.id}),a({content:"您的浏览器不支持复制",type:"warning"});s.event("share-notepad",{id:e.id}),n.copy(r.href),a({content:"复制成功",type:"success"})}catch(t){s.error("share-notepad-error","shareNotepad",t.stack||t.message,{id:e.id})}}function w(e){return e?`${f}${e}`:""}async function O(e,t){const o=await i(t),r=w(`${e}.mdx`),a=await p(r);return await a.write(o),await a.close(),r}export{$ as a,m as g,O as s,y as u};
