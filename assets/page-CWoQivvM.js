import{r as a,y as B,j as e,s,t as z,v as R,x as _,n as v,z as b,l as S,o as y}from"./index-CBb6If-E.js";import{d as p,f as M,b as x,a as f,T as m,g as U,B as h,c as O}from"./button-fRi0dzFk.js";import{u as F}from"./store-6LgsrKmj.js";import{I as k,H,a as G,b as W}from"./index-D5y7q4Ch.js";import{B as j}from"./index-CgJ3YfsF.js";import{S as E}from"./index-Baf81WNP.js";import{A as Y}from"./index-CH-zzRwl.js";import{u as q}from"./use-navigate-CFoH6M2j.js";import{S as J}from"./index-B4g9YTQJ.js";import{E as K}from"./index-CGIFNjgT.js";import"./index-D5UtJmoK.js";import"./iconBase-DfyR3OvK.js";import"./index-BhrAinXL.js";import"./is-phone-CsqGIDqW.js";import"./index-BxYKksZ_.js";import"./index-Bx4JbDjc.js";import"./asyncToGenerator-xVe5G5SN.js";import"./reactNode-CucnW-jD.js";import"./KeyCode-DNlgD2sM.js";import"./index-BwFmON1G.js";import"./useLocale-5BtA0143.js";const d=p.span`
  ${o=>{const{$color:t,$fontSize:r}=o;return{color:t,fontSize:r}}}}
`,Q=a.memo(function(t){const{value:r,fontSize:n=20,decimalSize:c=16,symbolSize:l=14,color:i,decimalColor:A,symbolColor:C,showPrefix:$=!1,className:T}=t,[w,u]=String(r).split("."),[,I]=a.useState(),[N,P,L]=M([l,n,c]);return B(w)?null:e.jsxs(x,{className:T,$alignItems:f.BASELINE,onClick:D=>{D.stopPropagation(),I(Math.random())},children:[e.jsx(E,{when:$,children:()=>e.jsx(d,{$fontSize:N,$color:C||i,children:"¥"})}),e.jsx(d,{$fontSize:P,$color:i,children:w}),e.jsx(E,{when:(u==null?void 0:u.length)>0,children:()=>e.jsx(d,{$fontSize:L,$color:A||i,children:`.${u}`})})]})}),g=p(U)`
  margin-right: 1rem;
`,V=a.memo(({children:o})=>{const t={[s.PAID]:{$presetTheme:m.SUCCESS},[s.UNPAID]:{$presetTheme:m.PROCESSING},[s.REFUNDED]:{$presetTheme:m.WARNING},[s.CANCELED]:{$presetTheme:m.INFO},[s.INCOME]:{$presetTheme:m.SUCCESS}}[o],r=z[o];return e.jsx(g,{...t,children:r})}),X=a.memo(({children:o})=>{const t=R[o];return e.jsx(g,{children:t})}),Z=a.memo(({children:o})=>{const t=_[o];return e.jsx(g,{children:t})}),tt=p(j)`
  padding-left: 1rem;
`;function et(o){const{flow:t,onDelete:r}=o,{id:n}=t,{setFlow:c}=F("setFlow");return e.jsx(tt,{wrapperProps:{$alignItems:f.CENTER},buttons:[{text:"编辑",$presetTheme:h.PRIMARY,to:`/flow/editor/${n}`,onClick:()=>c(t)},{text:"删除",$presetTheme:h.DANGER,logInfo:{id:n},onClick(l){l.stopPropagation(),r==null||r(n)}}]})}function ot(o){switch(o){case s.PAID:return"var(--color-theme-7)";case s.UNPAID:return"var(--color-gray-6)";case s.REFUNDED:case s.INCOME:return"#52c41a";case s.CANCELED:return"var(--color-gray-5)"}}const rt=p(Q)`
  margin-right: 1rem;
  ${o=>{const{$status:t}=o;return{color:ot(t),textDecoration:t===s.CANCELED?"line-through":"none"}}}
`,st=a.memo(o=>{const{flow:t,onClick:r,onDelete:n}=o;return e.jsx(k,{onClick:r,children:e.jsxs(H,{rightArea:e.jsx(et,{flow:t,onDelete:n}),children:[e.jsxs(x,{$flex:"1",$alignItems:f.CENTER,children:[e.jsx(V,{children:t.status}),e.jsx(X,{children:t.account}),e.jsx(Z,{children:t.category}),e.jsx(rt,{value:t.amount,$status:t.status,showPrefix:!0}),e.jsx(G,{children:t.title})]}),e.jsx(W,{children:t.createTime})]})})}),nt=p(x)`
  padding: var(--page-padding);
`;function it(o){const{deleteFlow:t}=y();t(o)}function Pt(){const o=v(),{setFlow:t}=F("setFlow"),{flows:r}=b("flows"),{flows:n}=o,c=q(),l=a.useMemo(()=>n||r,[r,n]);return a.useEffect(()=>{t(void 0)},[t]),e.jsx(Y,{onFirstAppear:()=>S.appear("flow-list"),children:e.jsx(nt,{$direction:O.COLUMN,children:e.jsx(J,{when:l.length>0,fullback:e.jsx(K,{}),children:()=>l.map(i=>e.jsx(st,{flow:i,onDelete:it,onClick:()=>{t(i),S.click("flow-item-click",{id:i.id}),c(`/flow/detail/${i.id}`)}},i.id))})})})}async function Lt(){return window.logger.todo("请求接口加载流水信息, 报错时使用本地存储中的流水信息"),{flows:null}}function at(){return e.jsx(j,{buttons:[{text:"新建",to:"/flow/editor",$presetTheme:h.PRIMARY}]})}const Dt={title:"流水列表",crumbLabel:"列表",rightArea:e.jsx(at,{})};export{Pt as Component,Dt as handle,Lt as loader};
