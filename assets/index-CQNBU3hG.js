const m=new WeakMap;function L(){return{info:{kind:"info",tagColor:"#000",tagBg:"#d9d9d9",contentColor:"#000",contentBg:"#fff",borderColor:"#d9d9d9"},warn:{kind:"warn",tagColor:"#fff",tagBg:"#fa8c16",contentColor:"#000",contentBg:"#fff",borderColor:"#fa8c16"},error:{kind:"error",tagColor:"#fff",tagBg:"#f5222d",contentColor:"#000",contentBg:"#fff",borderColor:"#f5222d"},debug:{kind:"debug",tagColor:"#fff",tagBg:"#eb2f96",contentColor:"#000",contentBg:"#fff",borderColor:"#eb2f96"},success:{kind:"success",tagColor:"#fff",tagBg:"#389e0d",contentColor:"#000",contentBg:"#fff",borderColor:"#389e0d"}}}function T(t){return t.length===1?t.charCodeAt(0)>255:/[^\x00-\xFF]/.test(t)}function x(t){return t.map(e=>typeof e=="object"?JSON.stringify(e,null,2):e).join(" ").split(`
`).map(e=>{let n=0,r=!1;for(let o=0,c=e[o];o<e.length;c=e[++o])T(c)?(n+=2,r=!0):n+=1;return{text:e,length:n,hasChinese:r}})}function E(t,e){return t.map(n=>`${n.text}${" ".repeat(e-n.length)}`).join(`%c
%c`)}const p="line-height:1.5;",l=`${p}`;function W(t,e){return t.length===1?[e]:t.map((n,r)=>r===0?[`${e}border-radius:0 0.4rem 0 0;`]:r===t.length-1?[l,`${e}border-top:none;border-top-right-radius:0;`]:[l,`${e}border-top:none;border-radius:0;`]).flat()}function A(t){return t.length>1&&t.some(e=>e.hasChinese)?500:Math.max(10,Math.max(...t.map(e=>e.length)))}function F(){const t=new Error().stack;if(!t)return"";const e=t.split(`
`),n=e[e.length-1],r=n.match(/at\s\(?(.*)\)?/);return r?r[1]:n}function O(t,e,...n){const{needTrace:r,onLogBefore:o}=t,{kind:c,tagColor:$,tagBg:B,contentColor:k,contentBg:w,borderColor:y,style:f}=e;if(o){let a=!1;const s={kind:c,messages:n,preventDefault:()=>a=!0};if(o==null||o(s),a)throw"cl:logger:preventDefault"}const S=`${c.toUpperCase()}`,g=x(n),i=`${p}padding:0.1rem 0.4rem;border:0.1rem solid ${y};`,{tagStyle:d,contentStyle:u}=(f==null?void 0:f(e))||{tagStyle:`${i}color:${$};background:${B};border-radius:0.4rem 0.4rem 0 0;`,contentStyle:`${i}margin-top:-0.12rem;color:${k};background:${w};border-radius:0 0.4rem 0.4rem;`},v=A(g),D=W(g,u),j=E(g,v);let h=`%c${S}%c
%c${j}`;const C=[d,l,...D];if(r){const a=F(),s=`${d}margin-top:0.2rem;border-radius:0.4rem 0 0 0.4rem;`,M=`${u}margin-top:0;border-radius:0 0.4rem 0.4rem 0;`;h+=`%c
%cTRACE%c${a}`,C.push(l,s,M)}return[h,...C]}function J(t){switch(t){case"cl:logger:preventDefault":break;default:throw t}}const N={get(t,e){const n=m.get(t);if(!n)throw new Error("illegal call");e in n||console.warn(`not found [${e}] logConfig, please add logConfig, currently using log replacement`);const r=n[e]||{...n.info,kind:e};return(...o)=>{try{const c=O(t,r,...o);console.log(...c)}catch(c){J(c)}}}};function b(t){const{logConfig:e}=t||{},n={...t},r=L();return e&&Object.assign(r,e),m.set(n,r),new Proxy(n,N)}b();const P=b({onLogBefore(t){t.kind==="error"&&t.preventDefault()}});export{P as l};
