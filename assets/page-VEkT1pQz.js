import{aE as l,aF as p,aG as m,j as o,r as a,l as s}from"./index-BIH90SC5.js";import{B as u}from"./index-r_z6yYY1.js";import{g as f,u as i}from"./store-CHJihPgl.js";import{S as d}from"./index-B4g9YTQJ.js";import{E as y}from"./index-CX6IQ4rR.js";import{A as x}from"./index-Brs4_diQ.js";import"./button-BcLPkHor.js";import"./iconBase-Bx-3qh5G.js";import"./index--gd1Bdtg.js";import"./is-phone-C3X7a2hG.js";import"./index-Bq8EmaxU.js";import"./index-B77HlWHk.js";import"./asyncToGenerator-C6lzLSqT.js";import"./reactNode-CzgveA51.js";import"./index-DkFSBDTX.js";import"./useLocale-k2nVwAcI.js";async function j(t){if(!p(t))return t;const e=await m(t);return URL.createObjectURL(e)}async function c(t){if(!t)return"";const{url:e,content:r}=t;if(e)return await j(e);if(!r)return"";const n=l(r);return URL.createObjectURL(n)}async function U(){const{currentRecord:t}=f(),e=await c(t),r=document.createElement("a");r.style.display="none",r.href=e,r.download=`${t==null?void 0:t.name}.webm`,r.click(),setTimeout(()=>{window.URL.revokeObjectURL(e)},100)}function g(){return o.jsx(u,{buttons:[{text:"下载",onClick:U}]})}function w(){const{currentRecord:t}=i("currentRecord");return(t==null?void 0:t.name)||"回放"}function $(){const{currentRecord:t}=i("currentRecord"),[e,r]=a.useState("");return a.useEffect(()=>{(async()=>{try{const n=await c(t);r(n)}catch(n){s.error("get-play-url",n.message)}})()},[t]),o.jsx(x,{onFirstAppear:()=>s.appear("playback"),children:o.jsx(d,{when:!!e,fullback:o.jsx(y,{}),children:()=>o.jsx("video",{src:e,controls:!0})})})}const q={title:"回放",needBackIcon:!0,rightArea:o.jsx(g,{}),titleArea:o.jsx(w,{})};export{$ as Component,q as handle};
