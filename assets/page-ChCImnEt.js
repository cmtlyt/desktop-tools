import{r as p,x as t,y as g}from"./index-DRi9_Ped.js";import{d as l,b as m,a as x,B as d,Q as N,l as c,c as h,w as j,M as E}from"./index-BcM3eVF-.js";import{A}from"./index-DfBoOOaF.js";import{u as B}from"./use-navigate-CJLS7uDg.js";import{u}from"./store-CfoADinw.js";import{B as f}from"./index-yHVPgtFi.js";import{E as I}from"./index-RPxF8dC3.js";import{I as C,H as $,a as k,b as R}from"./index-CA_0eWKq.js";import{s as T}from"./util-C2wOtSS6.js";import"./iconBase-D8NOOoqN.js";import"./index-vCXbMZKx.js";import"./index-DbN7YVfD.js";import"./asyncToGenerator-DbsoGUtF.js";import"./index-DoBTJIM3.js";const b=l(f)`
  padding-left: 1rem;
`;function L(a){const{notepad:e,onDelete:o}=a,{id:s}=e,{setNotepad:i}=u("setNotepad");return t.jsx(b,{wrapperProps:{$alignItems:x.CENTER},buttons:[{text:"编辑",$presetTheme:d.PRIMARY,to:`/notepad/editor/${s}`,onClick:()=>i(e)},{text:"分享",async onClick(r){r.stopPropagation(),T(e)}},{text:"删除",$presetTheme:d.DANGER,logInfo:{id:s},onClick(r){r.stopPropagation(),o==null||o(s)}}]})}const v=p.memo(a=>{const{notepad:e,onDelete:o,onClick:s}=a;return t.jsx(C,{onClick:s,children:t.jsxs($,{rightArea:t.jsx(L,{notepad:e,onDelete:o}),children:[t.jsx(m,{$flex:"1",$alignItems:x.CENTER,children:t.jsx(k,{children:e.title})}),t.jsx(R,{children:e.createTime})]})})}),w=l(m)`
  padding: var(--page-padding);
`;function D(a){E().deleteNotepad(a)}function K(){const a=g(),{setNotepad:e}=u("setNotepad"),{notepads:o}=N("notepads"),{notepads:s}=a,i=B(),r=p.useMemo(()=>s||o,[o,s]);return p.useEffect(()=>{e(void 0)},[e]),t.jsx(A,{onFirstAppear:()=>c.appear("notepad-list"),children:t.jsx(w,{$direction:h.COLUMN,children:t.jsx(j,{if:r.length>0,fullback:t.jsx(I,{}),children:()=>r.map(n=>t.jsx(v,{notepad:n,onClick:()=>{e(n),c.click("notepad-item-click",{id:n.id}),i(`/notepad/preview/${n.id}`)},onDelete:D},n.id))})})})}function S(){return t.jsx(f,{buttons:[{text:"新建",to:"/notepad/editor",$presetTheme:d.PRIMARY}]})}const V={title:"笔记列表",crumbLabel:"列表",rightArea:t.jsx(S,{})};async function X(){return window.logger.todo("请求接口加载笔记信息, 报错时使用本地存储中的笔记信息"),{notepads:null}}export{K as Component,V as handle,X as loader};
