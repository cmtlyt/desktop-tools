import{n as c,az as i,aA as p,N as u,m as d,M as s,l as n,ay as l}from"./index-D6qafkXg.js";import{N as f}from"./opfs-key-D0VDwJ2Y.js";const{useStoreSlice:S,getStore:h}=c(t=>({currentNotepad:void 0,setNotepad:e=>t({currentNotepad:e})}));async function g(t){const{url:e}=t;if(!e)return t;const o=await l(e);return{...t,content:o,url:""}}async function m(t){try{const e=await g(t),o=await i(JSON.stringify(e)),r=new URL(`./#/notepad/preview/source/${encodeURIComponent(o)}`,`${location.protocol}//${location.host}${u}`),{showMessage:a}=d();if(!s.isCopyable)return n.error("copy-not-support","shareNotepad",{id:t.id}),a({content:"您的浏览器不支持复制",type:"warning"});n.event("share-notepad",{id:t.id}),s.copy(r.href),a({content:"复制成功",type:"success"})}catch(e){n.error("share-notepad-error","shareNotepad",e.stack||e.message,{id:t.id})}}function w(t){return t?`${f}${t}`:""}async function $(t,e){const o=await i(e),r=w(`${t}.mdx`),a=await p(r);return await a.write(o),await a.close(),r}export{m as a,h as g,$ as s,S as u};
