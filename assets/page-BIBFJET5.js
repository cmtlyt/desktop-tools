import{r as i,x as e,y as B}from"./index-BKDFre3L.js";import{d as u,o as R,j as z,b as f,a as h,p as r,T as m,q as _,r as v,s as b,t as y,B as x,v as M,l as w,c as U,w as O,i as k}from"./index-DmRvx7aK.js";import{u as F}from"./store-Di2P_z_U.js";import{I as H,H as G,a as W,b as Y}from"./index-C_sE5pC5.js";import{B as j}from"./index-D3nWDwHl.js";import{S as E}from"./index-D9GgxVnM.js";import{A as q}from"./index-DLF5gx7b.js";import{u as J}from"./use-navigate-B5kDkILu.js";import{E as K}from"./index-DPtWB95T.js";import"./index-DSzCKjpk.js";import"./iconBase-LQySBSH6.js";import"./index-Dtr1sesn.js";import"./index-CPHkdJOD.js";import"./asyncToGenerator-0_F12jJo.js";import"./index-ZoEz83Sn.js";const d=u.span`
  ${o=>{const{$color:t,$fontSize:s}=o;return{color:t,fontSize:s}}}}
`,Q=i.memo(function(t){const{value:s,fontSize:n=20,decimalSize:c=16,symbolSize:l=14,color:a,decimalColor:A,symbolColor:C,showPrefix:$=!1,className:T}=t,[S,p]=String(s).split("."),[,I]=i.useState(),[N,P,L]=R([l,n,c]);return z(S)?null:e.jsxs(f,{className:T,$alignItems:h.BASELINE,onClick:D=>{D.stopPropagation(),I(Math.random())},children:[e.jsx(E,{if:$,children:()=>e.jsx(d,{$fontSize:N,$color:C||a,children:"¥"})}),e.jsx(d,{$fontSize:P,$color:a,children:S}),e.jsx(E,{if:(p==null?void 0:p.length)>0,children:()=>e.jsx(d,{$fontSize:L,$color:A||a,children:`.${p}`})})]})}),g=u(y)`
  margin-right: 1rem;
`,V=i.memo(({children:o})=>{const t={[r.PAID]:{$presetTheme:m.SUCCESS},[r.UNPAID]:{$presetTheme:m.PROCESSING},[r.REFUNDED]:{$presetTheme:m.WARNING},[r.CANCELED]:{$presetTheme:m.INFO},[r.INCOME]:{$presetTheme:m.SUCCESS}}[o],s=_[o];return e.jsx(g,{...t,children:s})}),X=i.memo(({children:o})=>{const t=v[o];return e.jsx(g,{children:t})}),Z=i.memo(({children:o})=>{const t=b[o];return e.jsx(g,{children:t})}),tt=u(j)`
  padding-left: 1rem;
`;function et(o){const{flow:t,onDelete:s}=o,{id:n}=t,{setFlow:c}=F("setFlow");return e.jsx(tt,{wrapperProps:{$alignItems:h.CENTER},buttons:[{text:"编辑",$presetTheme:x.PRIMARY,to:`/flow/editor/${n}`,onClick:()=>c(t)},{text:"删除",$presetTheme:x.DANGER,logInfo:{id:n},onClick(l){l.stopPropagation(),s==null||s(n)}}]})}function ot(o){switch(o){case r.PAID:return"var(--color-theme-7)";case r.UNPAID:return"var(--color-gray-6)";case r.REFUNDED:case r.INCOME:return"#52c41a";case r.CANCELED:return"var(--color-gray-5)"}}const st=u(Q)`
  margin-right: 1rem;
  ${o=>{const{$status:t}=o;return{color:ot(t),textDecoration:t===r.CANCELED?"line-through":"none"}}}
`,rt=i.memo(o=>{const{flow:t,onClick:s,onDelete:n}=o;return e.jsx(H,{onClick:s,children:e.jsxs(G,{rightArea:e.jsx(et,{flow:t,onDelete:n}),children:[e.jsxs(f,{$flex:"1",$alignItems:h.CENTER,children:[e.jsx(V,{children:t.status}),e.jsx(X,{children:t.account}),e.jsx(Z,{children:t.category}),e.jsx(st,{value:t.amount,$status:t.status,showPrefix:!0}),e.jsx(W,{children:t.title})]}),e.jsx(Y,{children:t.createTime})]})})}),nt=u(f)`
  padding: var(--page-padding);
`;function at(o){const{deleteFlow:t}=k();t(o)}function At(){const o=B(),{setFlow:t}=F("setFlow"),{flows:s}=M("flows"),{flows:n}=o,c=J(),l=i.useMemo(()=>n||s,[s,n]);return i.useEffect(()=>{t(void 0)},[t]),e.jsx(q,{onFirstAppear:()=>w.appear("flow-list"),children:e.jsx(nt,{$direction:U.COLUMN,children:e.jsx(O,{if:l.length>0,fullback:e.jsx(K,{}),children:()=>l.map(a=>e.jsx(rt,{flow:a,onDelete:at,onClick:()=>{t(a),w.click("flow-item-click",{id:a.id}),c(`/flow/detail/${a.id}`)}},a.id))})})})}async function Ct(){return window.logger.todo("请求接口加载流水信息, 报错时使用本地存储中的流水信息"),{flows:null}}function it(){return e.jsx(j,{buttons:[{text:"新建",to:"/flow/editor",$presetTheme:x.PRIMARY}]})}const $t={title:"流水列表",crumbLabel:"列表",rightArea:e.jsx(it,{})};export{At as Component,$t as handle,Ct as loader};
