import{r as p,j as t,o as u,aw as x,l as m,av as f}from"./index-DwZ3VcdL.js";import{A as h}from"./index-D7gmBVc6.js";import{b as g,a as l,B as d}from"./button-BxUGn_cn.js";import{u as N}from"./use-navigate-C5nXX1Gc.js";import{u as c,a as j}from"./util-BotlGmke.js";import{B as E}from"./index-Rcsh-DYt.js";import{S as A}from"./index-B4g9YTQJ.js";import{E as B}from"./index-RXfxmJ7z.js";import{I,a as R,b as k,R as C,P as T}from"./index-CGks_N0C.js";import{H as $}from"./index-CQDDfGWA.js";import"./opfs-key-D0VDwJ2Y.js";import"./iconBase-BFWPPRPh.js";import"./index-cB1IlPo3.js";import"./is-phone-yIPvuEgq.js";import"./index-te4-RsG4.js";import"./asyncToGenerator-B1e0bwTg.js";import"./reactNode-B9hRVRxn.js";import"./index-Bcuwydoc.js";import"./useLocale-CE8QlpIE.js";import"./index-BS5FmYRV.js";function b(a){const{notepad:e,onDelete:o}=a,{id:s}=e,{setNotepad:i}=c("setNotepad");return t.jsx(C,{wrapperProps:{$alignItems:l.CENTER},buttons:[{text:"编辑",$presetTheme:d.PRIMARY,to:`/notepad/editor/${s}`,onClick:()=>i(e)},{text:"分享",async onClick(r){r.stopPropagation(),j(e)}},{text:"删除",$presetTheme:d.DANGER,logInfo:{id:s},onClick(r){r.stopPropagation(),o==null||o(s)}}]})}const w=p.memo(a=>{const{notepad:e,onDelete:o,onClick:s}=a;return t.jsx(I,{onClick:s,children:t.jsxs($,{rightArea:t.jsx(b,{notepad:e,onDelete:o}),children:[t.jsx(g,{$flex:"1",$alignItems:l.CENTER,children:t.jsx(R,{children:e.title})}),t.jsx(k,{children:e.createTime})]})})});function P(a){f().deleteNotepad(a)}function _(){const a=u(),{setNotepad:e}=c("setNotepad"),{notepads:o}=x("notepads"),{notepads:s}=a,i=N(),r=p.useMemo(()=>s||o,[o,s]);return p.useEffect(()=>{e(void 0)},[e]),t.jsx(h,{onFirstAppear:()=>m.appear("notepad-list"),children:t.jsx(T,{children:t.jsx(A,{when:r.length>0,fullback:t.jsx(B,{}),children:()=>r.map(n=>t.jsx(w,{notepad:n,onClick:()=>{e(n),m.click("notepad-item-click",{id:n.id}),i(`/notepad/preview/${n.id}`)},onDelete:P},n.id))})})})}function S(){return t.jsx(E,{buttons:[{text:"新建",to:"/notepad/editor",$presetTheme:d.PRIMARY}]})}const tt={title:"笔记列表",crumbLabel:"列表",rightArea:t.jsx(S,{})};async function et(){return window.logger.todo("请求接口加载笔记信息, 报错时使用本地存储中的笔记信息"),{notepads:null}}export{_ as Component,tt as handle,et as loader};
