import{r as p,x as t,y as g}from"./index-D_l-mUWw.js";import{d as l,b as m,a as x,B as d,P as N,l as c,c as h,K as j}from"./button-DApavvTt.js";import{A as E}from"./index-DZW-8e34.js";import{u as A}from"./use-navigate-CqlUriJ9.js";import{u}from"./store-sdMls9fm.js";import{B as f}from"./index-BNzImgop.js";import{S as B}from"./index-BquPhuVZ.js";import{E as I}from"./index-5lsUDpTA.js";import{I as C,H as $,a as k,b as R}from"./index-KfNKUL-J.js";import{s as T}from"./util-BY0OgUIa.js";import"./index-sYYlIUhk.js";import"./index-Hb4vq_Wo.js";import"./asyncToGenerator-DnBcoi_0.js";import"./index-B3FeRO68.js";const b=l(f)`
  padding-left: 1rem;
`;function L(a){const{notepad:e,onDelete:o}=a,{id:s}=e,{setNotepad:i}=u("setNotepad");return t.jsx(b,{wrapperProps:{$alignItems:x.CENTER},buttons:[{text:"编辑",$presetTheme:d.PRIMARY,to:`/notepad/editor/${s}`,onClick:()=>i(e)},{text:"分享",async onClick(r){r.stopPropagation(),T(e)}},{text:"删除",$presetTheme:d.DANGER,logInfo:{id:s},onClick(r){r.stopPropagation(),o==null||o(s)}}]})}const S=p.memo(a=>{const{notepad:e,onDelete:o,onClick:s}=a;return t.jsx(C,{onClick:s,children:t.jsxs($,{rightArea:t.jsx(L,{notepad:e,onDelete:o}),children:[t.jsx(m,{$flex:"1",$alignItems:x.CENTER,children:t.jsx(k,{children:e.title})}),t.jsx(R,{children:e.createTime})]})})}),v=l(m)`
  padding: var(--page-padding);
`;function D(a){j().deleteNotepad(a)}function Q(){const a=g(),{setNotepad:e}=u("setNotepad"),{notepads:o}=N("notepads"),{notepads:s}=a,i=A(),r=p.useMemo(()=>s||o,[o,s]);return p.useEffect(()=>{e(void 0)},[e]),t.jsx(E,{onFirstAppear:()=>c.appear("notepad-list"),children:t.jsx(v,{$direction:h.COLUMN,children:t.jsx(B,{if:r.length>0,fullback:t.jsx(I,{}),children:()=>r.map(n=>t.jsx(S,{notepad:n,onClick:()=>{e(n),c.click("notepad-item-click",{id:n.id}),i(`/notepad/preview/${n.id}`)},onDelete:D},n.id))})})})}function P(){return t.jsx(f,{buttons:[{text:"新建",to:"/notepad/editor",$presetTheme:d.PRIMARY}]})}const V={title:"笔记列表",crumbLabel:"列表",rightArea:t.jsx(P,{})};async function X(){return window.logger.todo("请求接口加载笔记信息, 报错时使用本地存储中的笔记信息"),{notepads:null}}export{Q as Component,V as handle,X as loader};
