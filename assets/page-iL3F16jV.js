import{x as n,r as s}from"./index-3J4KuuoB.js";import{B as a}from"./index-rav957uP.js";import{Q as i,l,w as u}from"./index-ByKSOVCD.js";import{g as m,u as p}from"./store-BnaG6hzl.js";import{E as f}from"./index-sNg9fBES.js";import"./iconBase-C69PvvoJ.js";import"./index-Bo6uKYKg.js";import"./index-BVcwxBjj.js";import"./asyncToGenerator-Ck98M5YA.js";import"./index-keN3K5Ik.js";async function c(t){if(!t)return"";const{url:r,content:e}=t;if(r)return r;if(!e)return"";const o=i(e);return URL.createObjectURL(o)}async function d(){const{currentRecord:t}=m(),r=await c(t),e=document.createElement("a");e.style.display="none",e.href=r,e.download=`${t==null?void 0:t.name}.webm`,e.click(),setTimeout(()=>{window.URL.revokeObjectURL(r)},100)}function y(){return n.jsx(a,{buttons:[{text:"下载",onClick:d}]})}function L(){const{currentRecord:t}=p("currentRecord"),[r,e]=s.useState("");return s.useEffect(()=>{(async()=>{try{const o=await c(t);e(o)}catch(o){l.error("get-play-url",o.message)}})()},[t]),n.jsx(u,{if:!!r,fullback:n.jsx(f,{}),children:()=>n.jsx("video",{src:r,controls:!0})})}const S={title:"回放",needBackIcon:!0,rightArea:n.jsx(y,{})};export{L as Component,S as handle};
