const m=new WeakMap;function M(){return{info:{kind:"info",tagColor:"#000",tagBg:"#d9d9d9",contentColor:"#000",contentBg:"#fff",borderColor:"#d9d9d9"},warn:{kind:"warn",tagColor:"#fff",tagBg:"#fa8c16",contentColor:"#000",contentBg:"#fff",borderColor:"#fa8c16"},error:{kind:"error",tagColor:"#fff",tagBg:"#f5222d",contentColor:"#000",contentBg:"#fff",borderColor:"#f5222d"},debug:{kind:"debug",tagColor:"#fff",tagBg:"#eb2f96",contentColor:"#000",contentBg:"#fff",borderColor:"#eb2f96"},success:{kind:"success",tagColor:"#fff",tagBg:"#389e0d",contentColor:"#000",contentBg:"#fff",borderColor:"#389e0d"}}}function T(t){return t.length===1?t.charCodeAt(0)>255:/[^\x00-\xFF]/.test(t)}function x(t){return t.map(e=>typeof e=="object"?JSON.stringify(e,null,2):e).join(" ").split(`
`).map(e=>{let n=0,o=!1;for(let r=0,c=e[r];r<e.length;c=e[++r])T(c)?(n+=2,o=!0):n+=1;return{text:e,length:n,hasChinese:o}})}function E(t,e){return t.map(n=>`${n.text}${" ".repeat(e-n.length)}`).join(`%c
%c`)}const p="line-height:1.5;",l=`${p}`;function L(t,e){return t.length===1?[e]:t.map((n,o)=>o===0?[`${e}border-radius:0 0.4rem 0 0;`]:o===t.length-1?[l,`${e}border-top:none;border-top-right-radius:0;`]:[l,`${e}border-top:none;border-radius:0;`]).flat()}function W(t){return t.length>1&&t.some(e=>e.hasChinese)?500:Math.max(10,Math.max(...t.map(e=>e.length)))}function A(){const t=new Error().stack;if(!t)return"";const e=t.split(`
`),n=e[e.length-1],o=n.match(/at\s\(?(.*)\)?/);return o?o[1]:n}function F(t,e,...n){const{needTrace:o,onLogBefore:r}=t,{kind:c,tagColor:b,tagBg:$,contentColor:B,contentBg:k,borderColor:w,style:s}=e;if(r){let a=!1;const g={kind:c,messages:n,preventDefault:()=>a=!0};if(r==null||r(g),a)throw"cl:logger:preventDefault"}const y=`${c.toUpperCase()}`,f=x(n),i=`${p}padding:0.1rem 0.4rem;border:0.1rem solid ${w};`,{tagStyle:d,contentStyle:u}=(s==null?void 0:s(e))||{tagStyle:`${i}color:${b};background:${$};border-radius:0.4rem 0.4rem 0 0;`,contentStyle:`${i}margin-top:-0.12rem;color:${B};background:${k};border-radius:0 0.4rem 0.4rem;`},S=W(f),j=L(f,u),v=E(f,S);let h=`%c${y}%c
%c${v}`;const C=[d,l,...j];if(o){const a=A(),g=`${d}margin-top:0.2rem;border-radius:0.4rem 0 0 0.4rem;`,D=`${u}margin-top:0;border-radius:0 0.4rem 0.4rem 0;`;h+=`%c
%cTRACE%c${a}`,C.push(l,g,D)}return[h,...C]}function O(t){switch(t){case"cl:logger:preventDefault":break;default:throw t}}const J={get(t,e){const n=m.get(t);if(!n)throw new Error("illegal call");e in n||console.warn(`not found [${e}] logConfig, please add logConfig, currently using log replacement`);const o=n[e]||{...n.info,kind:e};return(...r)=>{try{const c=F(t,o,...r);console.log(...c)}catch(c){O(c)}}}};function N(t){const{logConfig:e}={},n={...t},o=M();return e&&Object.assign(o,e),m.set(n,o),new Proxy(n,J)}const P=N();export{P as l};
