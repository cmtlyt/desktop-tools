import{aI as l,aJ as p,aK as m,j as o,r as a,l as i}from"./index-D88b7iIN.js";import{B as u}from"./index-Cjh5CLwC.js";import{g as f,u as s}from"./store-DM8M3nMK.js";import{S as d}from"./index-B4g9YTQJ.js";import{E as y}from"./index-CbMOuemV.js";import{A as x}from"./index-C5dBEg-E.js";import"./button-CRMUa-dm.js";import"./iconBase-Br79HNAC.js";import"./index-BKGPQUhy.js";import"./is-phone-Bh7Cp3KX.js";import"./index-OOA6MBud.js";import"./index-Cwl6qBGl.js";import"./asyncToGenerator-jxnFgOtE.js";import"./reactNode-CbgPdJRE.js";import"./KeyCode-DNlgD2sM.js";import"./index-BiAzrGuj.js";import"./useLocale-wKKh7ikZ.js";async function j(t){if(!p(t))return t;const r=await m(t);return URL.createObjectURL(r)}async function c(t){if(!t)return"";const{url:r,content:e}=t;if(r)return await j(r);if(!e)return"";const n=l(e);return URL.createObjectURL(n)}async function U(){const{currentRecord:t}=f(),r=await c(t),e=document.createElement("a");e.style.display="none",e.href=r,e.download=`${t==null?void 0:t.name}.webm`,e.click(),setTimeout(()=>{window.URL.revokeObjectURL(r)},100)}function g(){return o.jsx(u,{buttons:[{text:"下载",onClick:U}]})}function w(){const{currentRecord:t}=s("currentRecord");return(t==null?void 0:t.name)||"回放"}function K(){const{currentRecord:t}=s("currentRecord"),[r,e]=a.useState("");return a.useEffect(()=>{(async()=>{try{const n=await c(t);e(n)}catch(n){i.error("get-play-url",n.message)}})()},[t]),o.jsx(x,{onFirstAppear:()=>i.appear("playback"),children:o.jsx(d,{when:!!r,fullback:o.jsx(y,{}),children:()=>o.jsx("video",{src:r,controls:!0})})})}const $={title:"回放",needBackIcon:!0,rightArea:o.jsx(g,{}),titleArea:o.jsx(w,{})};export{K as Component,$ as handle};
