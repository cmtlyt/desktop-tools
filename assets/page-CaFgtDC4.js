import{y as e,z as f,r as A}from"./index-BOrfBne2.js";import{O as l}from"./store-CZ7MBNIh.js";import{A as g}from"./index-CdsISOgV.js";import{l as o,B as x,M as c,g as S}from"./index-8__tipZY.js";import{B as b}from"./index-DohqvB15.js";import{S as E,c as j}from"./Subject-D4Oc4fHj.js";import{u as v}from"./use-navigate-By7EaRjm.js";import{g as h,A as y,T as B}from"./title-area-B9yZW46S.js";import"./index-BXBs98Jn.js";import"./index-CkRL20Py.js";import"./asyncToGenerator-CJmeqalE.js";var r=(t=>(t.SAVE="save",t))(r||{});const p=new E;function R(t){p.next(t),o.event("notepad-editor-action",t)}const L=j(p);function N(){return e.jsx(b,{buttons:[{text:"保存",$presetTheme:x.PRIMARY,onClick:()=>R({id:"notepad-editor-save",type:r.SAVE})}]})}function O(){const{id:t}=f(),n=A.useRef(null),d=v();return L(async()=>{var i;const a=(i=n.current)==null?void 0:i.getMarkdown();if(!a)return;o.event("notepad-editor-save",{id:t});const u=await l(a),{title:m}=h(),s={id:t,title:m,content:u};t?c().updateNotepad(t,s):c().addNotepad(s),S().showMessage({content:"保存成功",type:"success",onClose:()=>d(-1)})},r.SAVE),e.jsx(g,{onFirstAppear:()=>o.appear("notepad-editor"),children:e.jsx(y,{ref:n})})}const P={title:"编辑笔记",crumbLabel:"编辑",needBackIcon:!0,rightArea:e.jsx(N,{}),titleArea:e.jsx(B,{})};async function Y({params:t}){return{id:t.id}}export{O as Component,P as handle,Y as loader};
