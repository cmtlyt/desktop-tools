import{r as p,x as t,y as x}from"./index-BUm1efIT.js";import{A as u}from"./index-CYrVEgpT.js";import{b as f,a as m,B as d,Q as h,l,w as g,M as N}from"./index-C3E55VMa.js";import{u as j}from"./use-navigate-Ctps9XF4.js";import{u as c}from"./store-DeHzsrzz.js";import{B as E}from"./index-C1796vyK.js";import{E as A}from"./index-Dao0OglI.js";import{I as B,H as I,a as R,b as k,R as C,P as T}from"./index-VHq_3-ME.js";import{s as $}from"./util-ChvNC7ua.js";import"./iconBase-ChGnTlbA.js";import"./index-BtcKOnEI.js";import"./index-2tQZx52y.js";import"./asyncToGenerator-DxuXOBX7.js";import"./index-BTB-7vBd.js";import"./index-ARRd4nI-.js";import"./index.esm-hAynTbL8.js";function b(a){const{notepad:e,onDelete:o}=a,{id:s}=e,{setNotepad:i}=c("setNotepad");return t.jsx(C,{wrapperProps:{$alignItems:m.CENTER},buttons:[{text:"编辑",$presetTheme:d.PRIMARY,to:`/notepad/editor/${s}`,onClick:()=>i(e)},{text:"分享",async onClick(r){r.stopPropagation(),$(e)}},{text:"删除",$presetTheme:d.DANGER,logInfo:{id:s},onClick(r){r.stopPropagation(),o==null||o(s)}}]})}const P=p.memo(a=>{const{notepad:e,onDelete:o,onClick:s}=a;return t.jsx(B,{onClick:s,children:t.jsxs(I,{rightArea:t.jsx(b,{notepad:e,onDelete:o}),children:[t.jsx(f,{$flex:"1",$alignItems:m.CENTER,children:t.jsx(R,{children:e.title})}),t.jsx(k,{children:e.createTime})]})})});function w(a){N().deleteNotepad(a)}function U(){const a=x(),{setNotepad:e}=c("setNotepad"),{notepads:o}=h("notepads"),{notepads:s}=a,i=j(),r=p.useMemo(()=>s||o,[o,s]);return p.useEffect(()=>{e(void 0)},[e]),t.jsx(u,{onFirstAppear:()=>l.appear("notepad-list"),children:t.jsx(T,{children:t.jsx(g,{if:r.length>0,fullback:t.jsx(A,{}),children:()=>r.map(n=>t.jsx(P,{notepad:n,onClick:()=>{e(n),l.click("notepad-item-click",{id:n.id}),i(`/notepad/preview/${n.id}`)},onDelete:w},n.id))})})})}function L(){return t.jsx(E,{buttons:[{text:"新建",to:"/notepad/editor",$presetTheme:d.PRIMARY}]})}const V={title:"笔记列表",crumbLabel:"列表",rightArea:t.jsx(L,{})};async function X(){return window.logger.todo("请求接口加载笔记信息, 报错时使用本地存储中的笔记信息"),{notepads:null}}export{U as Component,V as handle,X as loader};
