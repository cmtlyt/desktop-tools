import{l as ts,I as ud,n as pd,r as Xt,j as M,C as Oo,D as _d,E as fd,m as gd}from"./index-DearUaB4.js";import{c as fl,F as gl,a as yd,b as as,e as Lo,B as md,d as xr,S as wd}from"./button-B0FGJiO9.js";import{c as vd,S as xd}from"./Subject-0ufl6LA0.js";import{A as bd}from"./index-DJm5l3CZ.js";import{H as Bd,d as yl,a as kd,b as Sd,D as Cd,e as Rd,c as Ed}from"./index-CE1LB4x-.js";import{B as Td}from"./index-CVD_oZbv.js";import{D as Pd}from"./index-CL_F4PYL.js";import{a as Ad}from"./index-BbdMhSL6.js";import{G as uo}from"./iconBase-CA6twZM6.js";import{a as Od}from"./index-DLmXo-ZF.js";import{S as Ld}from"./index-Baf81WNP.js";import{F as ii}from"./index-Dz5Z_WfI.js";import{T as Dd}from"./index-DwiZi5wI.js";import{i as $d}from"./is-phone-B_Bs6QfE.js";import"./index-B4g9YTQJ.js";import"./index-CMi3Se2J.js";import"./index-spmImaI1.js";import"./useLocale-CP1LR-rV.js";import"./asyncToGenerator-DlBWYOsW.js";import"./index-CcddEg-m.js";import"./index-ChleEUmJ.js";import"./reactNode-CTD5zrc5.js";import"./pickAttrs-DvLsPqn5.js";import"./context-DG-6DIK1.js";import"./Skeleton-Cs70MdCh.js";import"./index-DZln8gEQ.js";import"./LoadingOutlined-BBW5h7rC.js";import"./compact-item-B2KhOpLP.js";import"./useForceUpdate-FQzED4Qu.js";import"./index-BOB8Pw7I.js";import"./ExclamationCircleFilled-C7DEbDXP.js";import"./BaseInput-CnnsSzUe.js";const E={toURL(e,t){let i=encodeURIComponent(e);return t==="text"?i="data:text/plain;charset=utf-8,"+i:t==="svg"&&(i="data:image/svg+xml,"+i),i},image:{hitCanvasSize:100,maxCacheSize:4096e3,maxPatternSize:8847360,crossOrigin:"anonymous",getRealURL(e){const{prefix:t,suffix:i}=E.image;return!i||e.startsWith("data:")||e.startsWith("blob:")||(e+=(e.includes("?")?"&":"?")+i),t&&e[0]==="/"&&(e=t+e),e}}},ct={},we={RUNTIME:"runtime",LEAF:"leaf",TASK:"task",CNAVAS:"canvas",IMAGE:"image",types:{},create(e){const{types:t}=Md;return t[e]?t[e]++:(t[e]=1,0)}},Md=we,{round:Fd,pow:Id,PI:po}=Math,yt={within:(e,t,i)=>(typeof t=="object"&&(i=t.max,t=t.min),t!==void 0&&e<t&&(e=t),i!==void 0&&e>i&&(e=i),e),fourNumber(e,t){let i;if(e instanceof Array)switch(e.length){case 4:i=t===void 0?e:[...e];break;case 2:i=[e[0],e[1],e[0],e[1]];break;case 3:i=[e[0],e[1],e[2],e[1]];break;case 1:e=e[0];break;default:e=0}if(i||(i=[e,e,e,e]),t)for(let s=0;s<4;s++)i[s]>t&&(i[s]=t);return i},formatRotation:(e,t)=>(e%=360,t?e<0&&(e+=360):(e>180&&(e-=360),e<-180&&(e+=360)),yt.float(e)),getGapRotation(e,t,i=0){let s=e+i;if(t>1){const r=Math.abs(s%t);(r<1||r>t-1)&&(s=Math.round(s/t)*t)}return s-i},float(e,t){const i=t!==void 0?Id(10,t):1e12;return(e=Fd(e*i)/i)===-0?0:e},getScaleData(e,t,i,s){if(s||(s={}),t){const r=(typeof t=="number"?t:t.width||0)/i.width,n=(typeof t=="number"?t:t.height||0)/i.height;s.scaleX=r||n||1,s.scaleY=n||r||1}else e&&yt.assignScale(s,e);return s},assignScale(e,t){typeof t=="number"?e.scaleX=e.scaleY=t:(e.scaleX=t.x,e.scaleY=t.y)},randInt:gs,randColor:e=>`rgba(${gs(255)},${gs(255)},${gs(255)},${e||1})`};function gs(e){return Math.round(Math.random()*e)}const V=po/180,Yt=2*po,wi=po/2;function Wd(){return{x:0,y:0}}function zd(){return{x:0,y:0,width:0,height:0}}function Nd(){return{a:1,b:0,c:0,d:1,e:0,f:0}}const{sin:Pr,cos:Ar,acos:ys,sqrt:Or}=Math,{float:si}=yt,ri={};function Do(){return Object.assign(Object.assign(Object.assign({},{a:1,b:0,c:0,d:1,e:0,f:0}),{x:0,y:0,width:0,height:0}),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}const L={defaultMatrix:{a:1,b:0,c:0,d:1,e:0,f:0},defaultWorld:Do(),tempMatrix:{},set(e,t=1,i=0,s=0,r=1,n=0,o=0){e.a=t,e.b=i,e.c=s,e.d=r,e.e=n,e.f=o},get:Nd,getWorld:Do,copy(e,t){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f},translate(e,t,i){e.e+=t,e.f+=i},translateInner(e,t,i,s){e.e+=e.a*t+e.c*i,e.f+=e.b*t+e.d*i,s&&(e.e-=t,e.f-=i)},scale(e,t,i=t){e.a*=t,e.b*=t,e.c*=i,e.d*=i},scaleOfOuter(e,t,i,s){it.toInnerPoint(e,t,ri),it.scaleOfInner(e,ri,i,s)},scaleOfInner(e,t,i,s=i){it.translateInner(e,t.x,t.y),it.scale(e,i,s),it.translateInner(e,-t.x,-t.y)},rotate(e,t){const{a:i,b:s,c:r,d:n}=e,o=Ar(t*=V),a=Pr(t);e.a=i*o-s*a,e.b=i*a+s*o,e.c=r*o-n*a,e.d=r*a+n*o},rotateOfOuter(e,t,i){it.toInnerPoint(e,t,ri),it.rotateOfInner(e,ri,i)},rotateOfInner(e,t,i){it.translateInner(e,t.x,t.y),it.rotate(e,i),it.translateInner(e,-t.x,-t.y)},skew(e,t,i){const{a:s,b:r,c:n,d:o}=e;i&&(i*=V,e.a=s+n*i,e.b=r+o*i),t&&(t*=V,e.c=n+s*t,e.d=o+r*t)},skewOfOuter(e,t,i,s){it.toInnerPoint(e,t,ri),it.skewOfInner(e,ri,i,s)},skewOfInner(e,t,i,s=0){it.translateInner(e,t.x,t.y),it.skew(e,i,s),it.translateInner(e,-t.x,-t.y)},multiply(e,t){const{a:i,b:s,c:r,d:n,e:o,f:a}=e;e.a=t.a*i+t.b*r,e.b=t.a*s+t.b*n,e.c=t.c*i+t.d*r,e.d=t.c*s+t.d*n,e.e=t.e*i+t.f*r+o,e.f=t.e*s+t.f*n+a},multiplyParent(e,t,i,s,r,n){let{e:o,f:a}=e;if(n&&(o+=n.scrollX,a+=n.scrollY),i||(i=e),s===void 0&&(s=e.a!==1||e.b||e.c||e.d!==1),s){const{a:h,b:l,c,d}=e;i.a=h*t.a+l*t.c,i.b=h*t.b+l*t.d,i.c=c*t.a+d*t.c,i.d=c*t.b+d*t.d,r&&(i.scaleX=t.scaleX*r.scaleX,i.scaleY=t.scaleY*r.scaleY)}else i.a=t.a,i.b=t.b,i.c=t.c,i.d=t.d,r&&(i.scaleX=t.scaleX,i.scaleY=t.scaleY);i.e=o*t.a+a*t.c+t.e,i.f=o*t.b+a*t.d+t.f},divide(e,t){it.multiply(e,it.tempInvert(t))},divideParent(e,t){it.multiplyParent(e,it.tempInvert(t))},tempInvert(e){const{tempMatrix:t}=it;return it.copy(t,e),it.invert(t),t},invert(e){const{a:t,b:i,c:s,d:r,e:n,f:o}=e;if(i||s){const a=1/(t*r-i*s);e.a=r*a,e.b=-i*a,e.c=-s*a,e.d=t*a,e.e=-(n*r-o*s)*a,e.f=-(o*t-n*i)*a}else if(t===1&&r===1)e.e=-n,e.f=-o;else{const a=1/(t*r);e.a=r*a,e.d=t*a,e.e=-n*r*a,e.f=-o*t*a}},toOuterPoint(e,t,i,s){const{x:r,y:n}=t;i||(i=t),i.x=r*e.a+n*e.c,i.y=r*e.b+n*e.d,s||(i.x+=e.e,i.y+=e.f)},toInnerPoint(e,t,i,s){const{a:r,b:n,c:o,d:a}=e,h=1/(r*a-n*o),{x:l,y:c}=t;if(i||(i=t),i.x=(l*a-c*o)*h,i.y=(c*r-l*n)*h,!s){const{e:d,f:p}=e;i.x-=(d*a-p*o)*h,i.y-=(p*r-d*n)*h}},setLayout(e,t,i,s,r){const{x:n,y:o,scaleX:a,scaleY:h}=t;if(r===void 0&&(r=t.rotation||t.skewX||t.skewY),r){const{rotation:l,skewX:c,skewY:d}=t,p=l*V,u=Ar(p),f=Pr(p);if(c||d){const g=c*V,w=d*V;e.a=(u+w*-f)*a,e.b=(f+w*u)*a,e.c=(g*u-f)*h,e.d=(u+g*f)*h}else e.a=u*a,e.b=f*a,e.c=-f*h,e.d=u*h}else e.a=a,e.b=0,e.c=0,e.d=h;e.e=n,e.f=o,(i=i||s)&&it.translateInner(e,-i.x,-i.y,!s)},getLayout(e,t,i,s){const{a:r,b:n,c:o,d:a,e:h,f:l}=e;let c,d,p,u,f,g=h,w=l;if(n||o){const v=r*a-n*o;if(o&&!s){c=Or(r*r+n*n),d=v/c;const B=r/c;p=n>0?ys(B):-ys(B)}else{d=Or(o*o+a*a),c=v/d;const B=o/d;p=wi-(a>0?ys(-B):-ys(B))}const y=si(Ar(p)),b=Pr(p);c=si(c),d=si(d),u=y?si((o/d+b)/y/V,9):0,f=y?si((n/c-b)/y/V,9):0,p=si(p/V)}else c=r,d=a,p=u=f=0;return(t=i||t)&&(g+=t.x*r+t.y*o,w+=t.x*n+t.y*a,i||(g-=t.x,w-=t.y)),{x:g,y:w,scaleX:c,scaleY:d,rotation:p,skewX:u,skewY:f}},withScale(e,t,i=t){const s=e;if(!t||!i){const{a:r,b:n,c:o,d:a}=e;n||o?i=(r*a-n*o)/(t=Or(r*r+n*n)):(t=r,i=a)}return s.scaleX=t,s.scaleY=i,s},reset(e){it.set(e)}},it=L,{toInnerPoint:Lr,toOuterPoint:$o}=L,{sin:Mo,cos:Fo,abs:Io,sqrt:jd,atan2:Dr,min:Yd,round:ms,PI:Xd}=Math,$={defaultPoint:{x:0,y:0},tempPoint:{},tempRadiusPoint:{},set(e,t=0,i=0){e.x=t,e.y=i},setRadius(e,t,i){e.radiusX=t,e.radiusY=i===void 0?t:i},copy(e,t){e.x=t.x,e.y=t.y},copyFrom(e,t,i){e.x=t,e.y=i},round(e,t){e.x=t?ms(e.x-.5)+.5:ms(e.x),e.y=t?ms(e.y-.5)+.5:ms(e.y)},move(e,t,i){e.x+=t,e.y+=i},scale(e,t,i=t){e.x&&(e.x*=t),e.y&&(e.y*=i)},scaleOf(e,t,i,s=i){e.x+=(e.x-t.x)*(i-1),e.y+=(e.y-t.y)*(s-1)},rotate(e,t,i){i||(i=He.defaultPoint);const s=Fo(t*=V),r=Mo(t),n=e.x-i.x,o=e.y-i.y;e.x=i.x+n*s-o*r,e.y=i.y+n*r+o*s},tempToInnerOf(e,t){const{tempPoint:i}=He;return Mr(i,e),Lr(t,i,i),i},tempToOuterOf(e,t){const{tempPoint:i}=He;return Mr(i,e),$o(t,i,i),i},tempToInnerRadiusPointOf(e,t){const{tempRadiusPoint:i}=He;return Mr(i,e),He.toInnerRadiusPointOf(e,t,i),i},toInnerRadiusPointOf(e,t,i){i||(i=e),Lr(t,e,i),i.radiusX=Math.abs(e.radiusX/t.scaleX),i.radiusY=Math.abs(e.radiusY/t.scaleY)},toInnerOf(e,t,i){Lr(t,e,i)},toOuterOf(e,t,i){$o(t,e,i)},getCenter:(e,t)=>({x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}),getCenterX:(e,t)=>e+(t-e)/2,getCenterY:(e,t)=>e+(t-e)/2,getDistance:(e,t)=>$r(e.x,e.y,t.x,t.y),getDistanceFrom(e,t,i,s){const r=Io(i-e),n=Io(s-t);return jd(r*r+n*n)},getMinDistanceFrom:(e,t,i,s,r,n)=>Yd($r(e,t,i,s),$r(i,s,r,n)),getAngle:(e,t)=>Wo(e,t)/V,getRotation:(e,t,i,s)=>(s||(s=t),He.getRadianFrom(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)/V),getRadianFrom(e,t,i,s,r,n,o,a){o===void 0&&(o=i,a=s);let h=Dr(t-s,e-i);const l=Dr(n-a,r-o)-h;return l<-Xd?l+Yt:l},getAtan2:(e,t)=>Dr(t.y-e.y,t.x-e.x),getDistancePoint(e,t,i,s){const r=Wo(e,t);return(t=s?t:{}).x=e.x+Fo(r)*i,t.y=e.y+Mo(r)*i,t},toNumberPoints(e){let t=e;return typeof e[0]=="object"&&(t=[],e.forEach(i=>t.push(i.x,i.y))),t},reset(e){}},He=$,{getDistanceFrom:$r,copy:Mr,getAtan2:Wo}=He;let Hd=class ir{constructor(t,i){this.set(t,i)}set(t,i){return typeof t=="object"?$.copy(this,t):$.set(this,t,i),this}get(){const{x:t,y:i}=this;return{x:t,y:i}}clone(){return new ir(this)}move(t,i){return $.move(this,t,i),this}scale(t,i){return $.scale(this,t,i),this}scaleOf(t,i,s){return $.scaleOf(this,t,i,s),this}rotate(t,i){return $.rotate(this,t,i),this}rotateOf(t,i){return $.rotate(this,i,t),this}getRotation(t,i,s){return $.getRotation(this,t,i,s)}toInnerOf(t,i){return $.toInnerOf(this,t,i),this}toOuterOf(t,i){return $.toOuterOf(this,t,i),this}getCenter(t){return new ir($.getCenter(this,t))}getDistance(t){return $.getDistance(this,t)}getDistancePoint(t,i,s){return new ir($.getDistancePoint(this,t,i,s))}getAngle(t){return $.getAngle(this,t)}getAtan2(t){return $.getAtan2(this,t)}reset(){return this}};new Hd;let hs=class ml{constructor(t,i,s,r,n,o){this.set(t,i,s,r,n,o)}set(t,i,s,r,n,o){return typeof t=="object"?L.copy(this,t):L.set(this,t,i,s,r,n,o),this}setWith(t){return L.copy(this,t),this.scaleX=t.scaleX,this.scaleY=t.scaleY,this}get(){const{a:t,b:i,c:s,d:r,e:n,f:o}=this;return{a:t,b:i,c:s,d:r,e:n,f:o}}clone(){return new ml(this)}translate(t,i){return L.translate(this,t,i),this}translateInner(t,i){return L.translateInner(this,t,i),this}scale(t,i){return L.scale(this,t,i),this}scaleWith(t,i){return L.scale(this,t,i),this.scaleX*=t,this.scaleY*=i||t,this}scaleOfOuter(t,i,s){return L.scaleOfOuter(this,t,i,s),this}scaleOfInner(t,i,s){return L.scaleOfInner(this,t,i,s),this}rotate(t){return L.rotate(this,t),this}rotateOfOuter(t,i){return L.rotateOfOuter(this,t,i),this}rotateOfInner(t,i){return L.rotateOfInner(this,t,i),this}skew(t,i){return L.skew(this,t,i),this}skewOfOuter(t,i,s){return L.skewOfOuter(this,t,i,s),this}skewOfInner(t,i,s){return L.skewOfInner(this,t,i,s),this}multiply(t){return L.multiply(this,t),this}multiplyParent(t){return L.multiplyParent(this,t),this}divide(t){return L.divide(this,t),this}divideParent(t){return L.divideParent(this,t),this}invert(){return L.invert(this),this}invertWith(){return L.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(t,i,s){L.toOuterPoint(this,t,i,s)}toInnerPoint(t,i,s){L.toInnerPoint(this,t,i,s)}setLayout(t,i,s){return L.setLayout(this,t,i,s),this}getLayout(t,i,s){return L.getLayout(this,t,i,s)}withScale(t,i){return L.withScale(this,t,i)}reset(){L.reset(this)}};new hs;const br={tempPointBounds:{},setPoint(e,t,i){e.minX=e.maxX=t,e.minY=e.maxY=i},addPoint(e,t,i){e.minX=t<e.minX?t:e.minX,e.minY=i<e.minY?i:e.minY,e.maxX=t>e.maxX?t:e.maxX,e.maxY=i>e.maxY?i:e.maxY},addBounds(e,t,i,s,r){zo(e,t,i),zo(e,t+s,i+r)},copy(e,t){e.minX=t.minX,e.minY=t.minY,e.maxX=t.maxX,e.maxY=t.maxY},addPointBounds(e,t){e.minX=t.minX<e.minX?t.minX:e.minX,e.minY=t.minY<e.minY?t.minY:e.minY,e.maxX=t.maxX>e.maxX?t.maxX:e.maxX,e.maxY=t.maxY>e.maxY?t.maxY:e.maxY},toBounds(e,t){t.x=e.minX,t.y=e.minY,t.width=e.maxX-e.minX,t.height=e.maxY-e.minY}},{addPoint:zo}=br,{tempPointBounds:ke,setPoint:No,addPoint:ws,toBounds:jo}=br,{toOuterPoint:vs}=L,{float:xs,fourNumber:Gd}=yt,{floor:Yo,ceil:bs}=Math;let ie,se,Me,Fe;const ce={},It={},T={tempBounds:{},set(e,t=0,i=0,s=0,r=0){e.x=t,e.y=i,e.width=s,e.height=r},copy(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},copyAndSpread(e,t,i,s,r){const{x:n,y:o,width:a,height:h}=t;if(i instanceof Array){const l=Gd(i);s?N.set(e,n+l[3],o+l[0],a-l[1]-l[3],h-l[2]-l[0]):N.set(e,n-l[3],o-l[0],a+l[1]+l[3],h+l[2]+l[0])}else s&&(i=-i),N.set(e,n-i,o-i,a+2*i,h+2*i);r&&(r==="width"?(e.y=o,e.height=h):(e.x=n,e.width=a))},minX:e=>e.width>0?e.x:e.x+e.width,minY:e=>e.height>0?e.y:e.y+e.height,maxX:e=>e.width>0?e.x+e.width:e.x,maxY:e=>e.height>0?e.y+e.height:e.y,move(e,t,i){e.x+=t,e.y+=i},getByMove:(e,t,i)=>(e=Object.assign({},e),N.move(e,t,i),e),toOffsetOutBounds(e,t,i){t?Ho(t,e):t=e,i?(t.offsetX=-(N.maxX(i)-e.x),t.offsetY=-(N.maxY(i)-e.y)):(t.offsetX=e.x+e.width,t.offsetY=e.y+e.height),N.move(t,-t.offsetX,-t.offsetY)},scale(e,t,i=t){$.scale(e,t,i),e.width*=t,e.height*=i},scaleOf(e,t,i,s=i){$.scaleOf(e,t,i,s),e.width*=i,e.height*=s},tempToOuterOf:(e,t)=>(N.copy(N.tempBounds,e),N.toOuterOf(N.tempBounds,t),N.tempBounds),getOuterOf:(e,t)=>(e=Object.assign({},e),N.toOuterOf(e,t),e),toOuterOf(e,t,i){if(i||(i=e),t.b===0&&t.c===0){const{a:s,d:r}=t;s>0?(i.width=e.width*s,i.x=t.e+e.x*s):(i.width=e.width*-s,i.x=t.e+e.x*s-i.width),r>0?(i.height=e.height*r,i.y=t.f+e.y*r):(i.height=e.height*-r,i.y=t.f+e.y*r-i.height)}else ce.x=e.x,ce.y=e.y,vs(t,ce,It),No(ke,It.x,It.y),ce.x=e.x+e.width,vs(t,ce,It),ws(ke,It.x,It.y),ce.y=e.y+e.height,vs(t,ce,It),ws(ke,It.x,It.y),ce.x=e.x,vs(t,ce,It),ws(ke,It.x,It.y),jo(ke,i)},toInnerOf(e,t,i){i||(i=e),N.move(i,-t.e,-t.f),N.scale(i,1/t.a,1/t.d)},getFitMatrix(e,t,i=1){const s=Math.min(i,Math.min(e.width/t.width,e.height/t.height));return new hs(s,0,0,s,-t.x*s,-t.y*s)},getSpread(e,t,i){const s={};return N.copyAndSpread(s,e,t,!1,i),s},spread(e,t,i){N.copyAndSpread(e,e,t,!1,i)},shrink(e,t,i){N.copyAndSpread(e,e,t,!0,i)},ceil(e){const{x:t,y:i}=e;e.x=Yo(e.x),e.y=Yo(e.y),e.width=t>e.x?bs(e.width+t-e.x):bs(e.width),e.height=i>e.y?bs(e.height+i-e.y):bs(e.height)},unsign(e){e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height)},float(e,t){e.x=xs(e.x,t),e.y=xs(e.y,t),e.width=xs(e.width,t),e.height=xs(e.height,t)},add(e,t,i){ie=e.x+e.width,se=e.y+e.height,Me=t.x,Fe=t.y,i||(Me+=t.width,Fe+=t.height),ie=ie>Me?ie:Me,se=se>Fe?se:Fe,e.x=e.x<t.x?e.x:t.x,e.y=e.y<t.y?e.y:t.y,e.width=ie-e.x,e.height=se-e.y},addList(e,t){N.setListWithFn(e,t,void 0,!0)},setList(e,t,i=!1){N.setListWithFn(e,t,void 0,i)},addListWithFn(e,t,i){N.setListWithFn(e,t,i,!0)},setListWithFn(e,t,i,s=!1){let r,n=!0;for(let o=0,a=t.length;o<a;o++)r=i?i(t[o]):t[o],r&&(r.width||r.height)&&(n?(n=!1,s||Ho(e,r)):Xo(e,r));n&&N.reset(e)},setPoints(e,t){t.forEach((i,s)=>s===0?No(ke,i.x,i.y):ws(ke,i.x,i.y)),jo(ke,e)},setPoint(e,t){N.set(e,t.x,t.y)},addPoint(e,t){Xo(e,t,!0)},getPoints(e){const{x:t,y:i,width:s,height:r}=e;return[{x:t,y:i},{x:t+s,y:i},{x:t+s,y:i+r},{x:t,y:i+r}]},hitRadiusPoint:(e,t,i)=>(i&&(t=$.tempToInnerRadiusPointOf(t,i)),t.x>=e.x-t.radiusX&&t.x<=e.x+e.width+t.radiusX&&t.y>=e.y-t.radiusY&&t.y<=e.y+e.height+t.radiusY),hitPoint:(e,t,i)=>(i&&(t=$.tempToInnerOf(t,i)),t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height),hit:(e,t,i)=>(i&&(t=N.tempToOuterOf(t,i)),!(e.y+e.height<t.y||t.y+t.height<e.y||e.x+e.width<t.x||t.x+t.width<e.x)),includes:(e,t,i)=>(i&&(t=N.tempToOuterOf(t,i)),e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height),getIntersectData(e,t,i){if(i&&(t=N.tempToOuterOf(t,i)),!N.hit(e,t))return{x:0,y:0,width:0,height:0};let{x:s,y:r,width:n,height:o}=t;return ie=s+n,se=r+o,Me=e.x+e.width,Fe=e.y+e.height,s=s>e.x?s:e.x,r=r>e.y?r:e.y,ie=ie<Me?ie:Me,se=se<Fe?se:Fe,n=ie-s,o=se-r,{x:s,y:r,width:n,height:o}},intersect(e,t,i){N.copy(e,N.getIntersectData(e,t,i))},isSame:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,isEmpty:e=>e.x===0&&e.y===0&&e.width===0&&e.height===0,reset(e){N.set(e)}},N=T,{add:Xo,copy:Ho}=N;let wt=class Un{get minX(){return T.minX(this)}get minY(){return T.minY(this)}get maxX(){return T.maxX(this)}get maxY(){return T.maxY(this)}constructor(t,i,s,r){this.set(t,i,s,r)}set(t,i,s,r){return typeof t=="object"?T.copy(this,t):T.set(this,t,i,s,r),this}get(){const{x:t,y:i,width:s,height:r}=this;return{x:t,y:i,width:s,height:r}}clone(){return new Un(this)}move(t,i){return T.move(this,t,i),this}scale(t,i){return T.scale(this,t,i),this}scaleOf(t,i,s){return T.scaleOf(this,t,i,s),this}toOuterOf(t,i){return T.toOuterOf(this,t,i),this}toInnerOf(t,i){return T.toInnerOf(this,t,i),this}getFitMatrix(t,i){return T.getFitMatrix(this,t,i)}spread(t,i){return T.spread(this,t,i),this}shrink(t,i){return T.shrink(this,t,i),this}ceil(){return T.ceil(this),this}unsign(){return T.unsign(this),this}float(t){return T.float(this,t),this}add(t){return T.add(this,t),this}addList(t){return T.setList(this,t,!0),this}setList(t){return T.setList(this,t),this}addListWithFn(t,i){return T.setListWithFn(this,t,i,!0),this}setListWithFn(t,i){return T.setListWithFn(this,t,i),this}setPoint(t){return T.setPoint(this,t),this}setPoints(t){return T.setPoints(this,t),this}addPoint(t){return T.addPoint(this,t),this}getPoints(){return T.getPoints(this)}hitPoint(t,i){return T.hitPoint(this,t,i)}hitRadiusPoint(t,i){return T.hitRadiusPoint(this,t,i)}hit(t,i){return T.hit(this,t,i)}includes(t,i){return T.includes(this,t,i)}intersect(t,i){return T.intersect(this,t,i),this}getIntersect(t,i){return new Un(T.getIntersectData(this,t,i))}isSame(t){return T.isSame(this,t)}isEmpty(){return T.isEmpty(this)}reset(){T.reset(this)}};const F=new wt;let Ud=class{constructor(t,i,s,r,n,o){typeof t=="object"?this.copy(t):this.set(t,i,s,r,n,o)}set(t=0,i=0,s=0,r=0,n=0,o=0){this.top=t,this.right=i,this.bottom=s,this.left=r,this.width=n,this.height=o}copy(t){const{top:i,right:s,bottom:r,left:n,width:o,height:a}=t;this.set(i,s,r,n,o,a)}getBoundsFrom(t){const{top:i,right:s,bottom:r,left:n,width:o,height:a}=this;return new wt(n,i,o||t.width-n-s,a||t.height-i-r)}};var Vn,dr;(function(e){e[e.top=0]="top",e[e.right=1]="right",e[e.bottom=2]="bottom",e[e.left=3]="left"})(Vn||(Vn={})),function(e){e[e.topLeft=0]="topLeft",e[e.top=1]="top",e[e.topRight=2]="topRight",e[e.right=3]="right",e[e.bottomRight=4]="bottomRight",e[e.bottom=5]="bottom",e[e.bottomLeft=6]="bottomLeft",e[e.left=7]="left",e[e.center=8]="center",e[e["top-left"]=0]="top-left",e[e["top-right"]=2]="top-right",e[e["bottom-right"]=4]="bottom-right",e[e["bottom-left"]=6]="bottom-left"}(dr||(dr={}));const _o=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];_o.forEach(e=>e.type="percent");const Pi={directionData:_o,tempPoint:{},get:Go,toPoint(e,t,i,s,r){const n=Go(e);i.x=n.x,i.y=n.y,n.type==="percent"&&(i.x*=t.width,i.y*=t.height,r&&(i.x-=r.x,i.y-=r.y,n.x&&(i.x-=n.x===1?r.width:n.x===.5?n.x*r.width:0),n.y&&(i.y-=n.y===1?r.height:n.y===.5?n.y*r.height:0))),s||(i.x+=t.x,i.y+=t.y)}};function Go(e){return typeof e=="string"?_o[dr[e]]:e}const{toPoint:Vd}=Pi,wl={toPoint(e,t,i,s,r){Vd(e,i,s,r,t)}},qd={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1},{randColor:Uo}=yt;let Q=class qn{constructor(t){this.repeatMap={},this.name=t}static get(t){return new qn(t)}static set filter(t){this.filterList=Vo(t)}static set exclude(t){this.excludeList=Vo(t)}static drawRepaint(t,i){const s=Uo();t.fillWorld(i,s.replace("1)",".1)")),t.strokeWorld(i,s)}static drawBounds(t,i,s){const r=qn.showBounds==="hit",n=t.__nowWorld,o=Uo();r&&(i.setWorld(n),t.__drawHitPath(i),i.fillStyle=o.replace("1)",".2)"),i.fill()),i.resetTransform(),i.setStroke(o,2),r?i.stroke():i.strokeWorld(n,o)}log(...t){if(Ie.enable){if(Ie.filterList.length&&Ie.filterList.every(i=>i!==this.name)||Ie.excludeList.length&&Ie.excludeList.some(i=>i===this.name))return;console.log("%c"+this.name,"color:#21ae62",...t)}}tip(...t){Ie.enable&&this.warn(...t)}warn(...t){Ie.showWarn&&console.warn(this.name,...t)}repeat(t,...i){this.repeatMap[t]||(this.warn("repeat:"+t,...i),this.repeatMap[t]=!0)}error(...t){try{throw new Error}catch(i){console.error(this.name,...t,i)}}};function Vo(e){return e?typeof e=="string"&&(e=[e]):e=[],e}Q.filterList=[],Q.excludeList=[],Q.showWarn=!0;const Ie=Q,Kd=Q.get("RunTime"),te={currentId:0,currentName:"",idMap:{},nameMap:{},nameToIdMap:{},start(e,t){const i=we.create(we.RUNTIME);return Wt.currentId=Wt.idMap[i]=t?performance.now():Date.now(),Wt.currentName=Wt.nameMap[i]=e,Wt.nameToIdMap[e]=i,i},end(e,t){const i=Wt.idMap[e],s=Wt.nameMap[e],r=t?(performance.now()-i)/1e3:Date.now()-i;Wt.idMap[e]=Wt.nameMap[e]=Wt.nameToIdMap[s]=void 0,Kd.log(s,r,"ms")},endOfName(e,t){const i=Wt.nameToIdMap[e];i!==void 0&&Wt.end(i,t)}},Wt=te,vl=[],gt={list:{},add(e,...t){this.list[e]=!0,vl.push(...t)},has(e,t){const i=this.list[e];return!i&&t&&this.need(e),i},need(e){console.error("please install plugin: "+(e.includes("-x")?"":"@leafer-in/")+e)}};setTimeout(()=>vl.forEach(e=>gt.has(e,!0)));const qo=Q.get("UICreator"),ps={list:{},register(e){const{__tag:t}=e.prototype;Bs[t]&&qo.repeat(t),Bs[t]=e},get(e,t,i,s,r,n){Bs[e]||qo.error("not register "+e);const o=new Bs[e](t);return i!==void 0&&(o.x=i,s&&(o.y=s),r&&(o.width=r),n&&(o.height=n)),o}},{list:Bs}=ps,Qd=Q.get("EventCreator"),Ri={nameList:{},register(e){let t;Object.keys(e).forEach(i=>{t=e[i],typeof t=="string"&&(Oi[t]&&Qd.repeat(t),Oi[t]=e)})},changeName(e,t){const i=Oi[e];if(i){const s=Object.keys(i).find(r=>i[r]===e);s&&(i[s]=t,Oi[t]=i)}},has(e){return!!this.nameList[e]},get:(e,...t)=>new Oi[e](...t)},{nameList:Oi}=Ri;let xl=class{constructor(){this.list=[]}add(t){t.manager=this,this.list.push(t)}get(t){let i;const{list:s}=this;for(let n=0,o=s.length;n<o;n++)if(i=s[n],i.recycled&&i.isSameSize(t))return i.recycled=!1,i.manager||(i.manager=this),i;const r=ct.canvas(t);return this.add(r),r}recycle(t){t.recycled=!0}clearRecycled(){let t;const i=[];for(let s=0,r=this.list.length;s<r;s++)t=this.list[s],t.recycled?t.destroy():i.push(t);this.list=i}clear(){this.list.forEach(t=>{t.destroy()}),this.list.length=0}destroy(){this.clear()}};const ft={default:(e,t)=>(ks(t,e),ks(e,t),e),assign(e,t,i){let s;Object.keys(t).forEach(r=>{var n,o;if(s=t[r],(s==null?void 0:s.constructor)===Object&&((n=e[r])===null||n===void 0?void 0:n.constructor)===Object)return ks(e[r],t[r],i&&i[r]);i&&r in i?((o=i[r])===null||o===void 0?void 0:o.constructor)===Object&&ks(e[r]={},t[r],i[r]):e[r]=t[r]})},copyAttrs:(e,t,i)=>(i.forEach(s=>{t[s]!==void 0&&(e[s]=t[s])}),e),clone:e=>JSON.parse(JSON.stringify(e)),toMap(e){const t={};for(let i=0,s=e.length;i<s;i++)t[e[i]]=!0;return t}},{assign:ks}=ft;let bl=class{get __useNaturalRatio(){return!0}get __isLinePath(){const{path:t}=this;return t&&t.length===6&&t[0]===1}get __blendMode(){if(this.eraser&&this.eraser!=="path")return"destination-out";const{blendMode:t}=this;return t==="pass-through"?null:t}constructor(t){this.__leaf=t}__get(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}return this[t]}__getData(){const t={tag:this.__leaf.tag},{__input:i}=this;let s;for(let r in this)r[0]!=="_"&&(s=i?i[r]:void 0,t[r]=s===void 0?this[r]:s);return t}__setInput(t,i){this.__input||(this.__input={}),this.__input[t]=i}__getInput(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}if(t!=="path"||this.__pathInputed)return this["_"+t]}__removeInput(t){this.__input&&this.__input[t]!==void 0&&(this.__input[t]=void 0)}__getInputData(t,i){const s={};if(t)if(t instanceof Array)for(let r of t)s[r]=this.__getInput(r);else for(let r in t)s[r]=this.__getInput(r);else{let r,n,{__input:o}=this;s.tag=this.__leaf.tag;for(let a in this)if(a[0]!=="_"&&(r=this["_"+a],r!==void 0)){if(a==="path"&&!this.__pathInputed)continue;n=o?o[a]:void 0,s[a]=n===void 0?r:n}}if(i&&i.matrix){const{a:r,b:n,c:o,d:a,e:h,f:l}=this.__leaf.__localMatrix;s.matrix={a:r,b:n,c:o,d:a,e:h,f:l}}return s}__setMiddle(t,i){this.__middle||(this.__middle={}),this.__middle[t]=i}__getMiddle(t){return this.__middle&&this.__middle[t]}__checkSingle(){const t=this;if(t.blendMode==="pass-through"){const i=this.__leaf;t.opacity<1&&(i.isBranch||t.__hasMultiPaint)||i.__hasEraser||t.eraser||t.filter?t.__single=!0:t.__single&&(t.__single=!1)}else t.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}};var Ko;(function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.NoAndSkip=2]="NoAndSkip",e[e.YesAndSkip=3]="YesAndSkip"})(Ko||(Ko={}));const Jd={};function Fr(e){return e==null}function Zd(e){return JSON.stringify(e)==="{}"}function S(e,t,i,s){var r,n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function Bl(e,t,i,s){return new(i||(i=Promise))(function(r,n){function o(l){try{h(s.next(l))}catch(c){n(c)}}function a(l){try{h(s.throw(l))}catch(c){n(c)}}function h(l){var c;l.done?r(l.value):(c=l.value,c instanceof i?c:new i(function(d){d(c)})).then(o,a)}h((s=s.apply(e,[])).next())})}function Z(e){return(t,i)=>{e||(e=i),Object.defineProperty(t,i,{get(){return this.context[e]},set(s){this.context[e]=s}})}}const kl=[];function z(){return(e,t)=>{kl.push(t)}}const tc=[];let C=class{set blendMode(t){t==="normal"&&(t="source-over"),this.context.globalCompositeOperation=t}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(t){this.context.setLineDash(t||tc)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let t;kl.forEach(i=>{t=this.context[i],t&&(this[i]=t.bind(this.context))}),this.textBaseline="alphabetic"}setTransform(t,i,s,r,n,o){}resetTransform(){}getTransform(){}save(){}restore(){}transform(t,i,s,r,n,o){typeof t=="object"?this.context.transform(t.a,t.b,t.c,t.d,t.e,t.f):this.context.transform(t,i,s,r,n,o)}translate(t,i){}scale(t,i){}rotate(t){}fill(t,i){}stroke(t){}clip(t,i){}fillRect(t,i,s,r){}strokeRect(t,i,s,r){}clearRect(t,i,s,r){}drawImage(t,i,s,r,n,o,a,h,l){switch(arguments.length){case 9:if(i<0){const c=-i/r*h;r+=i,i=0,o+=c,h-=c}if(s<0){const c=-s/n*l;n+=s,s=0,a+=c,l-=c}this.context.drawImage(t,i,s,r,n,o,a,h,l);break;case 5:this.context.drawImage(t,i,s,r,n);break;case 3:this.context.drawImage(t,i,s)}}beginPath(){}moveTo(t,i){}lineTo(t,i){}bezierCurveTo(t,i,s,r,n,o){}quadraticCurveTo(t,i,s,r){}closePath(){}arc(t,i,s,r,n,o){}arcTo(t,i,s,r,n){}ellipse(t,i,s,r,n,o,a,h){}rect(t,i,s,r){}roundRect(t,i,s,r,n){}createConicGradient(t,i,s){}createLinearGradient(t,i,s,r){}createPattern(t,i){}createRadialGradient(t,i,s,r,n,o){}fillText(t,i,s,r){}measureText(t){}strokeText(t,i,s,r){}destroy(){this.context=null}};S([Z("imageSmoothingEnabled")],C.prototype,"smooth",void 0),S([Z("imageSmoothingQuality")],C.prototype,"smoothLevel",void 0),S([Z("globalAlpha")],C.prototype,"opacity",void 0),S([Z()],C.prototype,"fillStyle",void 0),S([Z()],C.prototype,"strokeStyle",void 0),S([Z("lineWidth")],C.prototype,"strokeWidth",void 0),S([Z("lineCap")],C.prototype,"strokeCap",void 0),S([Z("lineJoin")],C.prototype,"strokeJoin",void 0),S([Z("lineDashOffset")],C.prototype,"dashOffset",void 0),S([Z()],C.prototype,"miterLimit",void 0),S([Z()],C.prototype,"shadowBlur",void 0),S([Z()],C.prototype,"shadowColor",void 0),S([Z()],C.prototype,"shadowOffsetX",void 0),S([Z()],C.prototype,"shadowOffsetY",void 0),S([Z()],C.prototype,"filter",void 0),S([Z()],C.prototype,"font",void 0),S([Z()],C.prototype,"fontKerning",void 0),S([Z()],C.prototype,"fontStretch",void 0),S([Z()],C.prototype,"fontVariantCaps",void 0),S([Z()],C.prototype,"textAlign",void 0),S([Z()],C.prototype,"textBaseline",void 0),S([Z()],C.prototype,"textRendering",void 0),S([Z()],C.prototype,"wordSpacing",void 0),S([Z()],C.prototype,"letterSpacing",void 0),S([Z()],C.prototype,"direction",void 0),S([z()],C.prototype,"setTransform",null),S([z()],C.prototype,"resetTransform",null),S([z()],C.prototype,"getTransform",null),S([z()],C.prototype,"save",null),S([z()],C.prototype,"restore",null),S([z()],C.prototype,"translate",null),S([z()],C.prototype,"scale",null),S([z()],C.prototype,"rotate",null),S([z()],C.prototype,"fill",null),S([z()],C.prototype,"stroke",null),S([z()],C.prototype,"clip",null),S([z()],C.prototype,"fillRect",null),S([z()],C.prototype,"strokeRect",null),S([z()],C.prototype,"clearRect",null),S([z()],C.prototype,"beginPath",null),S([z()],C.prototype,"moveTo",null),S([z()],C.prototype,"lineTo",null),S([z()],C.prototype,"bezierCurveTo",null),S([z()],C.prototype,"quadraticCurveTo",null),S([z()],C.prototype,"closePath",null),S([z()],C.prototype,"arc",null),S([z()],C.prototype,"arcTo",null),S([z()],C.prototype,"ellipse",null),S([z()],C.prototype,"rect",null),S([z()],C.prototype,"roundRect",null),S([z()],C.prototype,"createConicGradient",null),S([z()],C.prototype,"createLinearGradient",null),S([z()],C.prototype,"createPattern",null),S([z()],C.prototype,"createRadialGradient",null),S([z()],C.prototype,"fillText",null),S([z()],C.prototype,"measureText",null),S([z()],C.prototype,"strokeText",null);const{copy:ec,multiplyParent:ic}=L,{round:Ss}=Math,sc={width:1,height:1,pixelRatio:1},Zt=["width","height","pixelRatio"];let Sl=class extends C{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio}get pixelHeight(){return this.height*this.pixelRatio}get pixelSnap(){return this.config.pixelSnap}set pixelSnap(t){this.config.pixelSnap=t}get allowBackgroundColor(){return this.view&&this.parentView}constructor(t,i){super(),this.size={},this.worldTransform={},t||(t=sc),this.manager=i,this.innerId=we.create(we.CNAVAS);const{width:s,height:r,pixelRatio:n}=t;this.autoLayout=!s||!r,this.size.pixelRatio=n|E.devicePixelRatio,this.config=t,this.init()}init(){}__createContext(){const{view:t}=this,{contextSettings:i}=this.config;this.context=i?t.getContext("2d",i):t.getContext("2d"),this.__bindContext()}export(t,i){}toBlob(t,i){}toDataURL(t,i){}saveAs(t,i){}resize(t,i=!0){if(this.isSameSize(t))return;let s;this.context&&!this.unreal&&i&&this.width&&(s=this.getSameCanvas(),s.copyWorld(this));const r=this.size;ft.copyAttrs(r,t,Zt),Zt.forEach(n=>r[n]||(r[n]=1)),this.bounds=new wt(0,0,this.width,this.height),this.context&&!this.unreal&&(this.updateViewSize(),this.smooth=this.config.smooth),this.updateClientBounds(),this.context&&!this.unreal&&s&&(this.clearWorld(s.bounds),this.copyWorld(s),s.recycle())}updateViewSize(){}updateClientBounds(){}getClientBounds(t){return t&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(t,i){}stopAutoLayout(){}setCursor(t){}setWorld(t,i){const{pixelRatio:s,pixelSnap:r}=this,n=this.worldTransform;i&&ic(t,i,n),n.a=t.a*s,n.b=t.b*s,n.c=t.c*s,n.d=t.d*s,n.e=t.e*s,n.f=t.f*s,r&&(t.half&&t.half*s%2?(n.e=Ss(n.e-.5)+.5,n.f=Ss(n.f-.5)+.5):(n.e=Ss(n.e),n.f=Ss(n.f))),this.setTransform(n.a,n.b,n.c,n.d,n.e,n.f)}useWorldTransform(t){t&&(this.worldTransform=t);const i=this.worldTransform;i&&this.setTransform(i.a,i.b,i.c,i.d,i.e,i.f)}setStroke(t,i,s){i&&(this.strokeWidth=i),t&&(this.strokeStyle=t),s&&this.setStrokeOptions(s)}setStrokeOptions(t){this.strokeCap=t.strokeCap==="none"?"butt":t.strokeCap,this.strokeJoin=t.strokeJoin,this.dashPattern=t.dashPattern,this.dashOffset=t.dashOffset,this.miterLimit=t.miterLimit}saveBlendMode(t){this.savedBlendMode=this.blendMode,this.blendMode=t}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(t,i){return!0}hitStroke(t,i){return!0}hitPixel(t,i,s=1){return!0}setWorldShadow(t,i,s,r){const{pixelRatio:n}=this;this.shadowOffsetX=t*n,this.shadowOffsetY=i*n,this.shadowBlur=s*n,this.shadowColor=r||"black"}setWorldBlur(t){const{pixelRatio:i}=this;this.filter=`blur(${t*i}px)`}copyWorld(t,i,s,r){if(r&&(this.blendMode=r),i){const{pixelRatio:n}=this;s||(s=i),this.drawImage(t.view,i.x*n,i.y*n,i.width*n,i.height*n,s.x*n,s.y*n,s.width*n,s.height*n)}else this.drawImage(t.view,0,0);r&&(this.blendMode="source-over")}copyWorldToInner(t,i,s,r){if(r&&(this.blendMode=r),i.b||i.c)this.save(),this.resetTransform(),this.copyWorld(t,i,T.tempToOuterOf(s,i)),this.restore();else{const{pixelRatio:n}=this;this.drawImage(t.view,i.x*n,i.y*n,i.width*n,i.height*n,s.x,s.y,s.width,s.height)}r&&(this.blendMode="source-over")}copyWorldByReset(t,i,s,r,n){this.resetTransform(),this.copyWorld(t,i,s,r),n||this.useWorldTransform()}useGrayscaleAlpha(t){let i,s;this.setTempBounds(t,!0,!0);const{context:r}=this,n=r.getImageData(F.x,F.y,F.width,F.height),{data:o}=n;for(let a=0,h=o.length;a<h;a+=4)s=.299*o[a]+.587*o[a+1]+.114*o[a+2],(i=o[a+3])&&(o[a+3]=i===255?s:i*(s/255));r.putImageData(n,F.x,F.y)}useMask(t,i,s){this.copyWorld(t,i,s,"destination-in")}useEraser(t,i,s){this.copyWorld(t,i,s,"destination-out")}fillWorld(t,i,s){s&&(this.blendMode=s),this.fillStyle=i,this.setTempBounds(t),this.fillRect(F.x,F.y,F.width,F.height),s&&(this.blendMode="source-over")}strokeWorld(t,i,s){s&&(this.blendMode=s),this.strokeStyle=i,this.setTempBounds(t),this.strokeRect(F.x,F.y,F.width,F.height),s&&(this.blendMode="source-over")}clearWorld(t,i){this.setTempBounds(t,i),this.clearRect(F.x,F.y,F.width,F.height)}clipWorld(t,i){this.beginPath(),this.setTempBounds(t,i),this.rect(F.x,F.y,F.width,F.height),this.clip()}clear(){const{pixelRatio:t}=this;this.clearRect(0,0,this.width*t+2,this.height*t+2)}setTempBounds(t,i,s){F.set(t),s&&F.intersect(this.bounds),F.scale(this.pixelRatio),i&&F.ceil()}isSameSize(t){return this.width===t.width&&this.height===t.height&&(!t.pixelRatio||this.pixelRatio===t.pixelRatio)}getSameCanvas(t,i){const{size:s,pixelSnap:r}=this,n=this.manager?this.manager.get(s):ct.canvas(Object.assign({},s));return n.save(),t&&(ec(n.worldTransform,this.worldTransform),n.useWorldTransform()),i&&(n.smooth=this.smooth),n.pixelSnap!==r&&(n.pixelSnap=r),n}recycle(t){this.recycled||(this.restore(),t?this.clearWorld(t,!0):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(t){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}};const ae={creator:{},parse(e,t){},convertToCanvasData(e,t){}},Cl={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},Gt=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},Cl),Rl={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},El={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},rc=Object.assign(Object.assign({},El),Cl),cr=Gt,Tl={};for(let e in cr)Tl[cr[e]]=e;const fo={};for(let e in cr)fo[cr[e]]=Rl[e];const Pl={drawRoundRect(e,t,i,s,r,n){const o=yt.fourNumber(n,Math.min(s/2,r/2)),a=t+s,h=i+r;o[0]?e.moveTo(t+o[0],i):e.moveTo(t,i),o[1]?e.arcTo(a,i,a,h,o[1]):e.lineTo(a,i),o[2]?e.arcTo(a,h,t,h,o[2]):e.lineTo(a,h),o[3]?e.arcTo(t,h,t,i,o[3]):e.lineTo(t,h),o[0]?e.arcTo(t,i,a,i,o[0]):e.lineTo(t,i)}},{sin:ni,cos:Li,atan2:Qo,ceil:nc,abs:Ir,PI:Jo,sqrt:Zo,pow:Cs}=Math,{setPoint:Wr,addPoint:Rs}=br,{set:Es,toNumberPoints:oc}=$,{M:ta,L:zr,C:Nr,Q:ea,Z:ac}=Gt,jr={},Ve={points(e,t,i,s){let r=oc(t);if(e.push(ta,r[0],r[1]),i&&r.length>5){let n,o,a,h,l,c,d,p,u,f,g,w,v,y=r.length;const b=i===!0?.5:i;s&&(r=[r[y-2],r[y-1],...r,r[0],r[1],r[2],r[3]],y=r.length);for(let B=2;B<y-2;B+=2)n=r[B-2],o=r[B-1],a=r[B],h=r[B+1],l=r[B+2],c=r[B+3],g=Zo(Cs(a-n,2)+Cs(h-o,2)),w=Zo(Cs(l-a,2)+Cs(c-h,2)),v=g+w,g=b*g/v,w=b*w/v,l-=n,c-=o,d=a-g*l,p=h-g*c,B===2?s||e.push(ea,d,p,a,h):e.push(Nr,u,f,d,p,a,h),u=a+w*l,f=h+w*c;s||e.push(ea,u,f,r[y-2],r[y-1])}else for(let n=2,o=r.length;n<o;n+=2)e.push(zr,r[n],r[n+1]);s&&e.push(ac)},rect(e,t,i,s,r){ae.creator.path=e,ae.creator.moveTo(t,i).lineTo(t+s,i).lineTo(t+s,i+r).lineTo(t,i+r).lineTo(t,i)},roundRect(e,t,i,s,r,n){ae.creator.path=[],Pl.drawRoundRect(ae.creator,t,i,s,r,n),e.push(...ae.convertToCanvasData(ae.creator.path,!0))},arcTo(e,t,i,s,r,n,o,a,h,l,c){const d=s-t,p=r-i,u=n-s,f=o-r;let g=Qo(p,d),w=Qo(f,u),v=w-g;if(v<0&&(v+=Yt),v===Jo||Ir(d+p)<1e-12||Ir(u+f)<1e-12)return e&&e.push(zr,s,r),h&&(Wr(h,t,i),Rs(h,s,r)),c&&Es(c,t,i),void(l&&Es(l,s,r));const y=d*f-u*p<0,b=y?-1:1,B=a/Li(v/2),k=s+B*Li(g+v/2+wi*b),P=r+B*ni(g+v/2+wi*b);return g-=wi*b,w-=wi*b,ra(e,k,P,a,a,0,g/V,w/V,y,h,l,c)},arc:(e,t,i,s,r,n,o,a,h,l)=>ra(e,t,i,s,s,0,r,n,o,a,h,l),ellipse(e,t,i,s,r,n,o,a,h,l,c,d){const p=n*V,u=ni(p),f=Li(p);let g=o*V,w=a*V;g>Jo&&(g-=Yt),w<0&&(w+=Yt);let v=w-g;v<0?v+=Yt:v>Yt&&(v-=Yt),h&&(v-=Yt);const y=nc(Ir(v/wi)),b=v/y,B=ni(b/4),k=8/3*B*B/ni(b/2);w=g+b;let P,x,O,Y,J,K,H,A,G=Li(g),W=ni(g),ot=O=f*s*G-u*r*W,et=Y=u*s*G+f*r*W,ut=t+O,Ft=i+Y;e&&e.push(e.length?zr:ta,ut,Ft),l&&Wr(l,ut,Ft),d&&Es(d,ut,Ft);for(let $e=0;$e<y;$e++)P=Li(w),x=ni(w),O=f*s*P-u*r*x,Y=u*s*P+f*r*x,J=t+ot-k*(f*s*W+u*r*G),K=i+et-k*(u*s*W-f*r*G),H=t+O+k*(f*s*x+u*r*P),A=i+Y+k*(u*s*x-f*r*P),e&&e.push(Nr,J,K,H,A,t+O,i+Y),l&&sa(t+ot,i+et,J,K,H,A,t+O,i+Y,l,!0),ot=O,et=Y,G=P,W=x,g=w,w+=b;c&&Es(c,t+O,i+Y)},quadraticCurveTo(e,t,i,s,r,n,o){e.push(Nr,(t+2*s)/3,(i+2*r)/3,(n+2*s)/3,(o+2*r)/3,n,o)},toTwoPointBoundsByQuadraticCurve(e,t,i,s,r,n,o,a){sa(e,t,(e+2*i)/3,(t+2*s)/3,(r+2*i)/3,(n+2*s)/3,r,n,o,a)},toTwoPointBounds(e,t,i,s,r,n,o,a,h,l){const c=[];let d,p,u,f,g,w,v,y,b=e,B=i,k=r,P=o;for(let x=0;x<2;++x)if(x==1&&(b=t,B=s,k=n,P=a),d=-3*b+9*B-9*k+3*P,p=6*b-12*B+6*k,u=3*B-3*b,Math.abs(d)<1e-12){if(Math.abs(p)<1e-12)continue;f=-u/p,0<f&&f<1&&c.push(f)}else v=p*p-4*u*d,y=Math.sqrt(v),v<0||(g=(-p+y)/(2*d),0<g&&g<1&&c.push(g),w=(-p-y)/(2*d),0<w&&w<1&&c.push(w));l?Rs(h,e,t):Wr(h,e,t),Rs(h,o,a);for(let x=0,O=c.length;x<O;x++)ia(c[x],e,t,i,s,r,n,o,a,jr),Rs(h,jr.x,jr.y)},getPointAndSet(e,t,i,s,r,n,o,a,h,l){const c=1-e,d=c*c*c,p=3*c*c*e,u=3*c*e*e,f=e*e*e;l.x=d*t+p*s+u*n+f*a,l.y=d*i+p*r+u*o+f*h},getPoint(e,t,i,s,r,n,o,a,h){const l={};return ia(e,t,i,s,r,n,o,a,h,l),l},getDerivative(e,t,i,s,r){const n=1-e;return 3*n*n*(i-t)+6*n*e*(s-i)+3*e*e*(r-s)}},{getPointAndSet:ia,toTwoPointBounds:sa,ellipse:ra}=Ve,{sin:hc,cos:lc,sqrt:na,atan2:oa}=Math,{ellipse:dc}=Ve,cc={ellipticalArc(e,t,i,s,r,n,o,a,h,l,c){const d=(h-t)/2,p=(l-i)/2,u=n*V,f=hc(u),g=lc(u),w=-g*d-f*p,v=-g*p+f*d,y=s*s,b=r*r,B=v*v,k=w*w,P=y*b-y*B-b*k;let x=0;if(P<0){const ot=na(1-P/(y*b));s*=ot,r*=ot}else x=(o===a?-1:1)*na(P/(y*B+b*k));const O=x*s*v/r,Y=-x*r*w/s,J=oa((v-Y)/r,(w-O)/s),K=oa((-v-Y)/r,(-w-O)/s);let H=K-J;a===0&&H>0?H-=Yt:a===1&&H<0&&(H+=Yt);const A=t+d+g*O-f*Y,G=i+p+f*O+g*Y,W=H<0?1:0;c||E.ellipseToCurve?dc(e,A,G,s,r,n,J/V,K/V,W):s!==r||n?e.push(Gt.G,A,G,s,r,n,J/V,K/V,W):e.push(Gt.O,A,G,s,J/V,K/V,W)}},{M:Yr,m:uc,L:Di,l:pc,H:_c,h:fc,V:gc,v:yc,C:oi,c:mc,S:Xr,s:wc,Q:ai,q:vc,T:Hr,t:xc,A:bc,a:Bc,Z:Gr,z:kc,N:Sc,D:Cc,X:Rc,G:Ec,F:Tc,O:Pc,P:Ac,U:Oc}=Gt,{rect:Lc,roundRect:aa,arcTo:Dc,arc:ha,ellipse:la,quadraticCurveTo:da}=Ve,{ellipticalArc:$c}=cc,Mc=Q.get("PathConvert"),ue={},Ke={current:{dot:0},stringify(e,t){let i,s,r,n=0,o=e.length,a="";for(;n<o;){s=e[n],i=fo[s],a+=s===r?" ":Tl[s];for(let h=1;h<i;h++)a+=yt.float(e[n+h],t),h===i-1||(a+=" ");r=s,n+=i}return a},parse(e,t){let i,s,r,n="";const o=[],a=t?rc:El;for(let h=0,l=e.length;h<l;h++)s=e[h],qd[s]?(s==="."&&(zt.dot&&(We(o,n),n=""),zt.dot++),n==="0"&&s!=="."&&(We(o,n),n=""),n+=s):Gt[s]?(n&&(We(o,n),n=""),zt.name=Gt[s],zt.length=Rl[s],zt.index=0,We(o,zt.name),!i&&a[s]&&(i=!0)):s==="-"||s==="+"?r==="e"||r==="E"?n+=s:(n&&We(o,n),n=s):n&&(We(o,n),n=""),r=s;return n&&We(o,n),i?Ke.toCanvasData(o,t):o},toCanvasData(e,t){let i,s,r,n,o,a=0,h=0,l=0,c=0,d=0,p=e.length;const u=[];for(;d<p;){switch(r=e[d],r){case uc:e[d+1]+=a,e[d+2]+=h;case Yr:a=e[d+1],h=e[d+2],u.push(Yr,a,h),d+=3;break;case fc:e[d+1]+=a;case _c:a=e[d+1],u.push(Di,a,h),d+=2;break;case yc:e[d+1]+=h;case gc:h=e[d+1],u.push(Di,a,h),d+=2;break;case pc:e[d+1]+=a,e[d+2]+=h;case Di:a=e[d+1],h=e[d+2],u.push(Di,a,h),d+=3;break;case wc:e[d+1]+=a,e[d+2]+=h,e[d+3]+=a,e[d+4]+=h,r=Xr;case Xr:o=n===oi||n===Xr,l=o?2*a-i:e[d+1],c=o?2*h-s:e[d+2],i=e[d+1],s=e[d+2],a=e[d+3],h=e[d+4],u.push(oi,l,c,i,s,a,h),d+=5;break;case mc:e[d+1]+=a,e[d+2]+=h,e[d+3]+=a,e[d+4]+=h,e[d+5]+=a,e[d+6]+=h,r=oi;case oi:i=e[d+3],s=e[d+4],a=e[d+5],h=e[d+6],u.push(oi,e[d+1],e[d+2],i,s,a,h),d+=7;break;case xc:e[d+1]+=a,e[d+2]+=h,r=Hr;case Hr:o=n===ai||n===Hr,i=o?2*a-i:e[d+1],s=o?2*h-s:e[d+2],t?da(u,a,h,i,s,e[d+1],e[d+2]):u.push(ai,i,s,e[d+1],e[d+2]),a=e[d+1],h=e[d+2],d+=3;break;case vc:e[d+1]+=a,e[d+2]+=h,e[d+3]+=a,e[d+4]+=h,r=ai;case ai:i=e[d+1],s=e[d+2],t?da(u,a,h,i,s,e[d+3],e[d+4]):u.push(ai,i,s,e[d+3],e[d+4]),a=e[d+3],h=e[d+4],d+=5;break;case Bc:e[d+6]+=a,e[d+7]+=h;case bc:$c(u,a,h,e[d+1],e[d+2],e[d+3],e[d+4],e[d+5],e[d+6],e[d+7],t),a=e[d+6],h=e[d+7],d+=8;break;case kc:case Gr:u.push(Gr),d++;break;case Sc:a=e[d+1],h=e[d+2],t?Lc(u,a,h,e[d+3],e[d+4]):Se(u,e,d,5),d+=5;break;case Cc:a=e[d+1],h=e[d+2],t?aa(u,a,h,e[d+3],e[d+4],[e[d+5],e[d+6],e[d+7],e[d+8]]):Se(u,e,d,9),d+=9;break;case Rc:a=e[d+1],h=e[d+2],t?aa(u,a,h,e[d+3],e[d+4],e[d+5]):Se(u,e,d,6),d+=6;break;case Ec:la(t?u:Se(u,e,d,9),e[d+1],e[d+2],e[d+3],e[d+4],e[d+5],e[d+6],e[d+7],e[d+8],null,ue),a=ue.x,h=ue.y,d+=9;break;case Tc:t?la(u,e[d+1],e[d+2],e[d+3],e[d+4],0,0,360,!1):Se(u,e,d,5),a=e[d+1]+e[d+3],h=e[d+2],d+=5;break;case Pc:ha(t?u:Se(u,e,d,7),e[d+1],e[d+2],e[d+3],e[d+4],e[d+5],e[d+6],null,ue),a=ue.x,h=ue.y,d+=7;break;case Ac:t?ha(u,e[d+1],e[d+2],e[d+3],0,360,!1):Se(u,e,d,4),a=e[d+1]+e[d+3],h=e[d+2],d+=4;break;case Oc:Dc(t?u:Se(u,e,d,6),a,h,e[d+1],e[d+2],e[d+3],e[d+4],e[d+5],null,ue),a=ue.x,h=ue.y,d+=6;break;default:return Mc.error(`command: ${r} [index:${d}]`,e),u}n=r}return u},objectToCanvasData(e){const t=[];return e.forEach(i=>{switch(i.name){case"M":t.push(Yr,i.x,i.y);break;case"L":t.push(Di,i.x,i.y);break;case"C":t.push(oi,i.x1,i.y1,i.x2,i.y2,i.x,i.y);break;case"Q":t.push(ai,i.x1,i.y1,i.x,i.y);break;case"Z":t.push(Gr)}}),t},copyData(e,t,i,s){for(let r=i,n=i+s;r<n;r++)e.push(t[r])},pushData(e,t){zt.index===zt.length&&(zt.index=1,e.push(zt.name)),e.push(Number(t)),zt.index++,zt.dot=0}},{current:zt,pushData:We,copyData:Se}=Ke,{M:Ur,L:Fc,C:Ic,Q:Wc,Z:zc,N:ca,D:Nc,X:jc,G:Yc,F:Xc,O:Hc,P:Gc,U:Uc}=Gt,{getMinDistanceFrom:Vc,getRadianFrom:qc}=$,{tan:Kc,min:ua,abs:Qc}=Math,hi={},ti={beginPath(e){e.length=0},moveTo(e,t,i){e.push(Ur,t,i)},lineTo(e,t,i){e.push(Fc,t,i)},bezierCurveTo(e,t,i,s,r,n,o){e.push(Ic,t,i,s,r,n,o)},quadraticCurveTo(e,t,i,s,r){e.push(Wc,t,i,s,r)},closePath(e){e.push(zc)},rect(e,t,i,s,r){e.push(ca,t,i,s,r)},roundRect(e,t,i,s,r,n){if(typeof n=="number")e.push(jc,t,i,s,r,n);else{const o=yt.fourNumber(n);o?e.push(Nc,t,i,s,r,...o):e.push(ca,t,i,s,r)}},ellipse(e,t,i,s,r,n,o,a,h){n===void 0?e.push(Xc,t,i,s,r):(o===void 0&&(o=0),a===void 0&&(a=360),e.push(Yc,t,i,s,r,n,o,a,h?1:0))},arc(e,t,i,s,r,n,o){r===void 0?e.push(Gc,t,i,s):(n===void 0&&(n=360),e.push(Hc,t,i,s,r,n,o?1:0))},arcTo(e,t,i,s,r,n,o,a){if(o!==void 0){const h=Vc(o,a,t,i,s,r);n=ua(n,ua(h/2,h/2*Qc(Kc(qc(o,a,t,i,s,r)/2))))}e.push(Uc,t,i,s,r,n)},drawEllipse(e,t,i,s,r,n,o,a,h){Ve.ellipse(null,t,i,s,r,n===void 0?0:n,o===void 0?0:o,a===void 0?360:a,h,null,null,hi),e.push(Ur,hi.x,hi.y),Jc(e,t,i,s,r,n,o,a,h)},drawArc(e,t,i,s,r,n,o){Ve.arc(null,t,i,s,r===void 0?0:r,n===void 0?360:n,o,null,null,hi),e.push(Ur,hi.x,hi.y),Zc(e,t,i,s,r,n,o)},drawPoints(e,t,i,s){Ve.points(e,t,i,s)}},{ellipse:Jc,arc:Zc}=ti,{moveTo:tu,lineTo:eu,quadraticCurveTo:iu,bezierCurveTo:su,closePath:ru,beginPath:nu,rect:ou,roundRect:au,ellipse:hu,arc:lu,arcTo:du,drawEllipse:cu,drawArc:uu,drawPoints:pu}=ti;class go{set path(t){this.__path=t}get path(){return this.__path}constructor(t){this.set(t)}set(t){return this.__path=t?typeof t=="string"?ae.parse(t):t:[],this}beginPath(){return nu(this.__path),this.paint(),this}moveTo(t,i){return tu(this.__path,t,i),this.paint(),this}lineTo(t,i){return eu(this.__path,t,i),this.paint(),this}bezierCurveTo(t,i,s,r,n,o){return su(this.__path,t,i,s,r,n,o),this.paint(),this}quadraticCurveTo(t,i,s,r){return iu(this.__path,t,i,s,r),this.paint(),this}closePath(){return ru(this.__path),this.paint(),this}rect(t,i,s,r){return ou(this.__path,t,i,s,r),this.paint(),this}roundRect(t,i,s,r,n){return au(this.__path,t,i,s,r,n),this.paint(),this}ellipse(t,i,s,r,n,o,a,h){return hu(this.__path,t,i,s,r,n,o,a,h),this.paint(),this}arc(t,i,s,r,n,o){return lu(this.__path,t,i,s,r,n,o),this.paint(),this}arcTo(t,i,s,r,n){return du(this.__path,t,i,s,r,n),this.paint(),this}drawEllipse(t,i,s,r,n,o,a,h){return cu(this.__path,t,i,s,r,n,o,a,h),this.paint(),this}drawArc(t,i,s,r,n,o){return uu(this.__path,t,i,s,r,n,o),this.paint(),this}drawPoints(t,i,s){return pu(this.__path,t,i,s),this.paint(),this}clearPath(){return this.beginPath()}paint(){}}const{M:_u,L:fu,C:gu,Q:yu,Z:mu,N:wu,D:vu,X:xu,G:bu,F:Bu,O:ku,P:Su,U:Cu}=Gt,Ru=Q.get("PathDrawer"),Eu={drawPathByData(e,t){if(!t)return;let i,s=0,r=t.length;for(;s<r;)switch(i=t[s],i){case _u:e.moveTo(t[s+1],t[s+2]),s+=3;break;case fu:e.lineTo(t[s+1],t[s+2]),s+=3;break;case gu:e.bezierCurveTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5],t[s+6]),s+=7;break;case yu:e.quadraticCurveTo(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case mu:e.closePath(),s+=1;break;case wu:e.rect(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case vu:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],[t[s+5],t[s+6],t[s+7],t[s+8]]),s+=9;break;case xu:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;case bu:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]*V,t[s+6]*V,t[s+7]*V,t[s+8]),s+=9;break;case Bu:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],0,0,Yt,!1),s+=5;break;case ku:e.arc(t[s+1],t[s+2],t[s+3],t[s+4]*V,t[s+5]*V,t[s+6]),s+=7;break;case Su:e.arc(t[s+1],t[s+2],t[s+3],0,Yt,!1),s+=4;break;case Cu:e.arcTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;default:return void Ru.error(`command: ${i} [index:${s}]`,t)}}},{M:Tu,L:Pu,C:pa,Q:_a,Z:fa,N:Au,D:ga,X:Ou,G:Lu,F:Du,O:$u,P:Mu,U:Fu}=Gt,{toTwoPointBounds:Iu,toTwoPointBoundsByQuadraticCurve:Wu,arcTo:zu,arc:Nu,ellipse:ju}=Ve,{addPointBounds:$i,copy:Vr,addPoint:Yu,setPoint:qr,addBounds:Ts,toBounds:Xu}=br,Hu=Q.get("PathBounds");let li,Ps,Kr;const Lt={},ya={},pe={},yo={toBounds(e,t){yo.toTwoPointBounds(e,ya),Xu(ya,t)},toTwoPointBounds(e,t){if(!e||!e.length)return qr(t,0,0);let i,s,r,n,o,a=0,h=0,l=0;const c=e.length;for(;a<c;)switch(o=e[a],a===0&&(o===fa||o===pa||o===_a?qr(t,h,l):qr(t,e[a+1],e[a+2])),o){case Tu:case Pu:h=e[a+1],l=e[a+2],Yu(t,h,l),a+=3;break;case pa:r=e[a+5],n=e[a+6],Iu(h,l,e[a+1],e[a+2],e[a+3],e[a+4],r,n,Lt),$i(t,Lt),h=r,l=n,a+=7;break;case _a:i=e[a+1],s=e[a+2],r=e[a+3],n=e[a+4],Wu(h,l,i,s,r,n,Lt),$i(t,Lt),h=r,l=n,a+=5;break;case fa:a+=1;break;case Au:h=e[a+1],l=e[a+2],Ts(t,h,l,e[a+3],e[a+4]),a+=5;break;case ga:case Ou:h=e[a+1],l=e[a+2],Ts(t,h,l,e[a+3],e[a+4]),a+=o===ga?9:6;break;case Lu:ju(null,e[a+1],e[a+2],e[a+3],e[a+4],e[a+5],e[a+6],e[a+7],e[a+8],Lt,pe),a===0?Vr(t,Lt):$i(t,Lt),h=pe.x,l=pe.y,a+=9;break;case Du:h=e[a+1],l=e[a+2],Ps=e[a+3],Kr=e[a+4],Ts(t,h-Ps,l-Kr,2*Ps,2*Kr),h+=Ps,a+=5;break;case $u:Nu(null,e[a+1],e[a+2],e[a+3],e[a+4],e[a+5],e[a+6],Lt,pe),a===0?Vr(t,Lt):$i(t,Lt),h=pe.x,l=pe.y,a+=7;break;case Mu:h=e[a+1],l=e[a+2],li=e[a+3],Ts(t,h-li,l-li,2*li,2*li),h+=li,a+=4;break;case Fu:zu(null,h,l,e[a+1],e[a+2],e[a+3],e[a+4],e[a+5],Lt,pe),a===0?Vr(t,Lt):$i(t,Lt),h=pe.x,l=pe.y,a+=6;break;default:return void Hu.error(`command: ${o} [index:${a}]`,e)}}},{M:Qr,L:As,Z:Os}=Gt,{getCenterX:Gu,getCenterY:Uu}=$,{arcTo:Jr}=ti,Vu={smooth(e,t,i){let s,r,n=0,o=0,a=0,h=0,l=0,c=0,d=0,p=0,u=0;const f=e.length,g=[];for(;n<f;)switch(s=e[n],s){case Qr:h=p=e[n+1],l=u=e[n+2],n+=3,e[n]===As?(c=e[n+1],d=e[n+2],g.push(Qr,Gu(h,c),Uu(l,d))):g.push(Qr,h,l);break;case As:switch(o=e[n+1],a=e[n+2],n+=3,e[n]){case As:Jr(g,o,a,e[n+1],e[n+2],t,p,u);break;case Os:Jr(g,o,a,h,l,t,p,u);break;default:g.push(As,o,a)}p=o,u=a;break;case Os:Jr(g,h,l,c,d,t,p,u),g.push(Os),n+=1;break;default:r=fo[s];for(let w=0;w<r;w++)g.push(e[n+w]);n+=r}return s!==Os&&(g[1]=h,g[2]=l),g}};ae.creator=new go,ae.parse=Ke.parse,ae.convertToCanvasData=Ke.toCanvasData;const Mi=new go,{drawRoundRect:qu}=Pl;function ma(e){(function(t){t&&!t.roundRect&&(t.roundRect=function(i,s,r,n,o){qu(this,i,s,r,n,o)})})(e)}const es={opacityTypes:["png","webp","svg"],upperCaseTypeMap:{},mineType:e=>!e||e.startsWith("image")?e:(e==="jpg"&&(e="jpeg"),"image/"+e),fileType(e){const t=e.split(".");return t[t.length-1]},isOpaqueImage(e){const t=Kn.fileType(e);return["jpg","jpeg"].some(i=>i===t)},getExportOptions(e){switch(typeof e){case"object":return e;case"number":return{quality:e};case"boolean":return{blob:e};default:return{}}}},Kn=es;Kn.opacityTypes.forEach(e=>Kn.upperCaseTypeMap[e]=e.toUpperCase());const Ku=Q.get("TaskProcessor");let Qu=class{constructor(t){this.parallel=!0,this.time=1,this.id=we.create(we.TASK),this.task=t}run(){return Bl(this,void 0,void 0,function*(){try{this.task&&!this.isComplete&&this.parent.running&&(yield this.task())}catch(t){Ku.error(t)}})}complete(){this.isComplete=!0,this.parent=null,this.task=null}cancel(){this.isCancel=!0,this.complete()}},Al=class{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){const{total:t}=this;let i=0,s=0;for(let r=0;r<t;r++)r<=this.finishedIndex?(s+=this.list[r].time,r===this.finishedIndex&&(i=s)):i+=this.list[r].time;return this.isComplete?1:s/i}constructor(t){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,t&&ft.assign(this.config,t),this.empty()}add(t,i){let s,r,n,o;const a=new Qu(t);return a.parent=this,typeof i=="number"?o=i:i&&(r=i.parallel,s=i.start,n=i.time,o=i.delay),n&&(a.time=n),r===!1&&(a.parallel=!1),o===void 0?this.push(a,s):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(a,s))},o)),this.isComplete=!1,a}push(t,i){this.list.push(t),i===!1||this.timer||(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(t=>{t.isComplete||t.cancel()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){const t=this.list[this.index];t?t.run().then(()=>{this.onTask(t),this.index++,this.nextTask()}).catch(i=>{this.onError(i)}):this.nextTask()}runParallelTasks(){this.parallelList.forEach(t=>this.runParallelTask(t))}runParallelTask(t){t.run().then(()=>{this.onTask(t),this.fillParallelTask()}).catch(i=>{this.onParallelError(i)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let t;this.parallelList=[],this.parallelSuccessNumber=0;let i=this.index+this.config.parallel;i>this.list.length&&(i=this.list.length);for(let s=this.index;s<i&&(t=this.list[s],t.parallel);s++)this.parallelList.push(t)}fillParallelTask(){let t;const i=this.parallelList;this.parallelSuccessNumber++,i.pop();const s=i.length,r=this.finishedIndex+s;if(i.length){if(!this.running)return;r<this.total&&(t=this.list[r],t&&t.parallel&&(i.push(t),this.runParallelTask(t)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(t){t.complete(),this.config.onTask&&this.config.onTask()}onParallelError(t){this.parallelList.forEach(i=>{i.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(t)}onError(t){this.pause(),this.config.onError&&this.config.onError(t)}destroy(){this.stop()}};const Ju=Q.get("Resource"),Si={tasker:new Al,map:{},get isComplete(){return Ce.tasker.isComplete},set(e,t){Ce.map[e]&&Ju.repeat(e),Ce.map[e]=t},get:e=>Ce.map[e],remove(e){const t=Ce.map[e];t&&(t.destroy&&t.destroy(),delete Ce.map[e])},loadImage(e,t){return new Promise((i,s)=>{const r=this.setImage(e,e,t);r.load(()=>i(r),n=>s(n))})},setImage(e,t,i){let s;return typeof t=="string"?s={url:t}:t.url||(s={url:e,view:t}),s&&(i&&(s.format=i),t=ct.image(s)),Ce.set(e,t),t},destroy(){Ce.map={}}},Ce=Si,Ht={maxRecycled:10,recycledList:[],patternTasker:new Al,get(e){let t=Si.get(e.url);return t||Si.set(e.url,t=ct.image(e)),t.use++,t},recycle(e){e.use--,setTimeout(()=>{e.use||Fi.recycledList.push(e)})},clearRecycled(){const e=Fi.recycledList;e.length>Fi.maxRecycled&&(e.forEach(t=>!t.use&&t.url&&Si.remove(t.url)),e.length=0)},hasOpacityPixel:e=>es.opacityTypes.some(t=>Fi.isFormat(t,e)),isFormat(e,t){if(t.format===e)return!0;const{url:i}=t;if(i.startsWith("data:")){if(i.startsWith("data:"+es.mineType(e)))return!0}else if(i.includes("."+e)||i.includes("."+es.upperCaseTypeMap[e])||e==="png"&&!i.includes("."))return!0;return!1},destroy(){Fi.recycledList=[]}},Fi=Ht,{IMAGE:Zu,create:tp}=we;let Ol=class{get url(){return this.config.url}get completed(){return this.ready||!!this.error}constructor(t){if(this.use=0,this.waitComplete=[],this.innerId=tp(Zu),this.config=t||(t={url:""}),t.view){const{view:i}=t;this.setView(i.config?i.view:i)}Ht.isFormat("svg",t)&&(this.isSVG=!0),Ht.hasOpacityPixel(t)&&(this.hasOpacityPixel=!0)}load(t,i){if(!this.loading){this.loading=!0;let{loadImage:s,loadImageWithProgress:r}=E.origin,n=this.config.showProgress&&r&&this.onProgress.bind(this);n&&(s=r),Si.tasker.add(()=>Bl(this,void 0,void 0,function*(){return yield s(this.url,n).then(o=>this.setView(o)).catch(o=>{this.error=o,this.onComplete(!1)})}))}return this.waitComplete.push(t,i),this.waitComplete.length-2}unload(t,i){const s=this.waitComplete;if(i){const r=s[t+1];r&&r({type:"stop"})}s[t]=s[t+1]=void 0}setView(t){this.ready=!0,this.width=t.naturalWidth||t.width,this.height=t.naturalHeight||t.height,this.view=t,this.onComplete(!0)}onProgress(t){this.progress=t}onComplete(t){let i;this.waitComplete.forEach((s,r)=>{i=r%2,s&&(t?i||s(this):i&&s(this.error))}),this.waitComplete.length=0,this.loading=!1}getFull(t){return this.view}getCanvas(t,i,s,r){if(t||(t=this.width),i||(i=this.height),this.cache){let{params:a,data:h}=this.cache;for(let l in a)if(a[l]!==arguments[l]){h=null;break}if(h)return h}const n=E.origin.createCanvas(t,i),o=n.getContext("2d");return s&&(o.globalAlpha=s),o.drawImage(this.view,0,0,t,i),this.cache=this.use>1?{data:n,params:arguments}:null,n}getPattern(t,i,s,r){const n=E.canvas.createPattern(t,i);try{s&&n.setTransform&&(n.setTransform(s),s=null)}catch{}return r&&(r.transform=s),n}destroy(){this.config={url:""},this.cache=null,this.waitComplete.length=0}};function ei(e,t,i,s){i.configurable=i.enumerable=!0,Object.defineProperty(e,t,i)}function mo(e,t){return Object.getOwnPropertyDescriptor(e,t)}function nt(e,t){return(i,s)=>ep(i,s,e,t&&t(s))}function ep(e,t,i,s){ei(e,t,Object.assign({get(){return this.__getAttr(t)},set(n){this.__setAttr(t,n)}},s||{})),$l(e,t,i)}function kt(e){return nt(e)}function di(e,t){return nt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))}function ur(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal(),Oe(this))}}))}function wa(e,t){return nt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))}function Zr(e,t){return nt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))}function D(e,t){return nt(e,i=>({set(s){this.__setAttr(i,s,t)&&Oe(this)}}))}function ip(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(Oe(this),this.__.__removeNaturalSize())}}))}function Oe(e){e.__layout.boxChanged||e.__layout.boxChange(),e.__hasAutoLayout&&(e.__layout.matrixChanged||e.__layout.matrixChange())}function sp(e){return nt(e,t=>({set(i){const s=this.__;s.__pathInputed!==2&&(s.__pathInputed=i?1:0),i||(s.__pathForRender=void 0),this.__setAttr(t,i),Oe(this)}}))}const Rt=D;function Br(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&rp(this)}}))}function rp(e){e.__layout.strokeChanged||e.__layout.strokeChange(),e.__.__useArrow&&Oe(e)}const re=Br;function Ll(e){return nt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.renderChanged||this.__layout.renderChange()}}))}function me(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))}function np(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.opacityChanged||this.__layout.opacityChange()),this.mask&&Dl(this)}}))}function op(e){return nt(e,t=>({set(i){const s=this.visible;if(s===!0&&i===0){if(this.animationOut)return this.__runAnimation("out",()=>va(this,t,i,s))}else s===0&&i===!0&&this.animation&&this.__runAnimation("in");va(this,t,i,s),this.mask&&Dl(this)}}))}function Dl(e){const{parent:t}=e;if(t){const{__hasMask:i}=t;t.__updateMask(),i!==t.__hasMask&&t.forceUpdate()}}function va(e,t,i,s){e.__setAttr(t,i)&&(e.__layout.opacityChanged||e.__layout.opacityChange(),s!==0&&i!==0||Oe(e))}function ap(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))}function hp(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(i)}))}}))}function lp(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&this.waitParent(()=>{this.parent.__updateEraser(i)})}}))}function Ge(e){return nt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.hitCanvasChanged=!0,Q.showBounds==="hit"&&(this.__layout.surfaceChanged||this.__layout.surfaceChange()),this.leafer&&this.leafer.updateCursor())}}))}function dp(e){return nt(e,t=>({set(i){this.__setAttr(t,i),this.leafer&&this.leafer.updateCursor()}}))}function vt(e){return(t,i)=>{ei(t,"__DataProcessor",{get:()=>e})}}function $l(e,t,i){const s=e.__DataProcessor.prototype,r="_"+t,n=function(c){return"set"+c.charAt(0).toUpperCase()+c.slice(1)}(t),o={get(){const c=this[r];return c===void 0?i:c},set(c){this[r]=c}};if(i===void 0)o.get=function(){return this[r]};else if(typeof i=="function")o.get=function(){let c=this[r];return c===void 0?i(this.__leaf):c};else if(typeof i=="object"){const c=Zd(i);o.get=function(){let d=this[r];return d===void 0?this[r]=c?{}:ft.clone(i):d}}const a=e.isBranchLeaf;t==="width"?o.get=function(){const c=this[r];if(c===void 0){const d=this,p=d.__naturalWidth,u=d.__leaf;return!i||u.pathInputed?u.boxBounds.width:p?d._height&&d.__useNaturalRatio?d._height*p/d.__naturalHeight:p:a&&u.children.length?u.boxBounds.width:i}return c}:t==="height"&&(o.get=function(){const c=this[r];if(c===void 0){const d=this,p=d.__naturalHeight,u=d.__leaf;return!i||u.pathInputed?u.boxBounds.height:p?d._width&&d.__useNaturalRatio?d._width*p/d.__naturalWidth:p:a&&u.children.length?u.boxBounds.height:i}return c});let h,l=s;for(;!h&&l;)h=mo(l,t),l=l.__proto__;h&&h.set&&(o.set=h.set),s[n]&&(o.set=s[n],delete s[n]),ei(s,t,o)}const cp=new Q("rewrite"),sr=[],up=["destroy","constructor"];function Kt(e){return(t,i)=>{sr.push({name:t.constructor.name+"."+i,run:()=>{t[i]=e}})}}function kr(){return e=>{Ml()}}function Ml(e){sr.length&&(sr.forEach(t=>{e&&cp.error(t.name,"需在Class上装饰@rewriteAble()"),t.run()}),sr.length=0)}function Dt(e,t){return i=>{var s;(e.prototype?(s=e.prototype,Object.getOwnPropertyNames(s)):Object.keys(e)).forEach(r=>{up.includes(r)||t&&t.includes(r)||(e.prototype?mo(e.prototype,r).writable&&(i.prototype[r]=e.prototype[r]):i.prototype[r]=e[r])})}}function xt(){return e=>{ps.register(e)}}function Le(){return e=>{Ri.register(e)}}setTimeout(()=>Ml(!0));const{copy:ci,toInnerPoint:pp,toOuterPoint:_p,scaleOfOuter:xa,rotateOfOuter:fp,skewOfOuter:gp,multiplyParent:ba,divideParent:Ba,getLayout:yp}=L,st={},{round:ka}=Math,ve={updateAllMatrix(e,t,i){if(t&&e.__hasAutoLayout&&e.__layout.matrixChanged&&(i=!0),wp(e,t,i),e.isBranch){const{children:s}=e;for(let r=0,n=s.length;r<n;r++)mp(s[r],t,i)}},updateMatrix(e,t,i){const s=e.__layout;t?i&&(s.waitAutoLayout=!0,e.__hasAutoLayout&&(s.matrixChanged=!1)):s.waitAutoLayout&&(s.waitAutoLayout=!1),s.matrixChanged&&e.__updateLocalMatrix(),s.waitAutoLayout||e.__updateWorldMatrix()},updateBounds(e){const t=e.__layout;t.boundsChanged&&e.__updateLocalBounds(),t.waitAutoLayout||e.__updateWorldBounds()},updateAllWorldOpacity(e){if(e.__updateWorldOpacity(),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)Sa(t[i])}},updateChange(e){const t=e.__layout;t.stateStyleChanged&&e.updateState(),t.opacityChanged&&Sa(e),e.__updateChange()},updateAllChange(e){if(xp(e),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)vp(t[i])}},worldHittable(e){for(;e;){if(!e.__.hittable)return!1;e=e.parent}return!0},moveWorld(e,t,i=0,s,r){const n=typeof t=="object"?Object.assign({},t):{x:t,y:i};s?_p(e.localTransform,n,n,!0):e.parent&&pp(e.parent.worldTransform,n,n,!0),bt.moveLocal(e,n.x,n.y,r)},moveLocal(e,t,i=0,s){typeof t=="object"&&(i=t.y,t=t.x),t+=e.x,i+=e.y,e.leafer&&e.leafer.config.pointSnap&&(t=ka(t),i=ka(i)),s?e.animate({x:t,y:i},s):(e.x=t,e.y=i)},zoomOfWorld(e,t,i,s,r,n){bt.zoomOfLocal(e,tn(e,t),i,s,r,n)},zoomOfLocal(e,t,i,s=i,r,n){const o=e.__localMatrix;if(typeof s!="number"&&(s&&(n=s),s=i),ci(st,o),xa(st,t,i,s),e.origin||e.around)bt.setTransform(e,st,r,n);else{const a=e.x+st.e-o.e,h=e.y+st.f-o.f;n&&!r?e.animate({x:a,y:h,scaleX:e.scaleX*i,scaleY:e.scaleY*s},n):(e.x=a,e.y=h,e.scaleResize(i,s,r!==!0))}},rotateOfWorld(e,t,i,s){bt.rotateOfLocal(e,tn(e,t),i,s)},rotateOfLocal(e,t,i,s){const r=e.__localMatrix;ci(st,r),fp(st,t,i),e.origin||e.around?bt.setTransform(e,st,!1,s):e.set({x:e.x+st.e-r.e,y:e.y+st.f-r.f,rotation:yt.formatRotation(e.rotation+i)},s)},skewOfWorld(e,t,i,s,r,n){bt.skewOfLocal(e,tn(e,t),i,s,r,n)},skewOfLocal(e,t,i,s=0,r,n){ci(st,e.__localMatrix),gp(st,t,i,s),bt.setTransform(e,st,r,n)},transformWorld(e,t,i,s){ci(st,e.worldTransform),ba(st,t),e.parent&&Ba(st,e.parent.worldTransform),bt.setTransform(e,st,i,s)},transform(e,t,i,s){ci(st,e.localTransform),ba(st,t),bt.setTransform(e,st,i,s)},setTransform(e,t,i,s){const r=e.__,n=r.origin&&bt.getInnerOrigin(e,r.origin),o=yp(t,n,r.around&&bt.getInnerOrigin(e,r.around));if(i){const a=o.scaleX/e.scaleX,h=o.scaleY/e.scaleY;if(delete o.scaleX,delete o.scaleY,n){T.scale(e.boxBounds,Math.abs(a),Math.abs(h));const l=bt.getInnerOrigin(e,r.origin);$.move(o,n.x-l.x,n.y-l.y)}e.set(o),e.scaleResize(a,h,!1)}else e.set(o,s)},getFlipTransform(e,t){const i={a:1,b:0,c:0,d:1,e:0,f:0},s=t==="x"?1:-1;return xa(i,bt.getLocalOrigin(e,"center"),-1*s,1*s),i},getLocalOrigin:(e,t)=>$.tempToOuterOf(bt.getInnerOrigin(e,t),e.localTransform),getInnerOrigin(e,t){const i={};return Pi.toPoint(t,e.boxBounds,i),i},getRelativeWorld:(e,t,i)=>(ci(st,e.worldTransform),Ba(st,t.worldTransform),i?st:Object.assign({},st)),drop(e,t,i,s){e.setTransform(bt.getRelativeWorld(e,t,!0),s),t.add(e,i)},hasParent(e,t){if(!t)return!1;for(;e;){if(t===e)return!0;e=e.parent}}},bt=ve,{updateAllMatrix:mp,updateMatrix:wp,updateAllWorldOpacity:Sa,updateAllChange:vp,updateChange:xp}=bt;function tn(e,t){return e.__layout.update(),e.parent?$.tempToInnerOf(t,e.parent.__world):t}const Sr={worldBounds:e=>e.__world,localBoxBounds:e=>e.__.eraser||e.__.visible===0?null:e.__local||e.__layout,localStrokeBounds:e=>e.__.eraser||e.__.visible===0?null:e.__layout.localStrokeBounds,localRenderBounds:e=>e.__.eraser||e.__.visible===0?null:e.__layout.localRenderBounds,maskLocalBoxBounds:e=>e.__.mask?e.__localBoxBounds:null,maskLocalStrokeBounds:e=>e.__.mask?e.__layout.localStrokeBounds:null,maskLocalRenderBounds:e=>e.__.mask?e.__layout.localRenderBounds:null,excludeRenderBounds:(e,t)=>!(!t.bounds||t.bounds.hit(e.__world,t.matrix))||!(!t.hideBounds||!t.hideBounds.includes(e.__world,t.matrix))},{updateBounds:Ca}=ve,_s={sort:(e,t)=>e.__.zIndex===t.__.zIndex?e.__tempNumber-t.__tempNumber:e.__.zIndex-t.__.zIndex,pushAllChildBranch(e,t){if(e.__tempNumber=1,e.__.__childBranchNumber){const{children:i}=e;for(let s=0,r=i.length;s<r;s++)(e=i[s]).isBranch&&(e.__tempNumber=1,t.add(e),bp(e,t))}},pushAllParent(e,t){const{keys:i}=t;if(i)for(;e.parent&&i[e.parent.innerId]===void 0;)t.add(e.parent),e=e.parent;else for(;e.parent;)t.add(e.parent),e=e.parent},pushAllBranchStack(e,t){let i=t.length;const{children:s}=e;for(let r=0,n=s.length;r<n;r++)s[r].isBranch&&t.push(s[r]);for(let r=i,n=t.length;r<n;r++)Ra(t[r],t)},updateBounds(e,t){const i=[e];Ra(e,i),Bp(i,t)},updateBoundsByBranchStack(e,t){let i,s;for(let r=e.length-1;r>-1;r--){i=e[r],s=i.children;for(let n=0,o=s.length;n<o;n++)Ca(s[n]);t&&t===i||Ca(i)}}},{pushAllChildBranch:bp,pushAllBranchStack:Ra,updateBoundsByBranchStack:Bp}=_s,Ii={run(e){if(e&&e.length){const t=e.length;for(let i=0;i<t;i++)e[i]();e.length===t?e.length=0:e.splice(0,t)}}},{getRelativeWorld:Ea}=ve,{toOuterOf:Ls,getPoints:kp,copy:Sp}=T,en="_localContentBounds",sn="_worldContentBounds",rn="_worldBoxBounds",nn="_worldStrokeBounds";class Cp{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(t){this._contentBounds=t}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}set renderBounds(t){this._renderBounds=t}get localContentBounds(){return Ls(this.contentBounds,this.leaf.__localMatrix,this[en]||(this[en]={})),this[en]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return Ls(this.contentBounds,this.leaf.__world,this[sn]||(this[sn]={})),this[sn]}get worldBoxBounds(){return Ls(this.boxBounds,this.leaf.__world,this[rn]||(this[rn]={})),this[rn]}get worldStrokeBounds(){return Ls(this.strokeBounds,this.leaf.__world,this[nn]||(this[nn]={})),this[nn]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(t){this.leaf=t,this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),t.__world&&(this.boxBounds={x:0,y:0,width:0,height:0},this.boxChange(),this.matrixChange())}createLocal(){const t=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||(this._localStrokeBounds=t),this._localRenderBounds||(this._localRenderBounds=t)}update(){const{leafer:t}=this.leaf;if(t)t.ready?t.watcher.changed&&t.layouter.layout():t.start();else{let i=this.leaf;for(;i.parent&&!i.parent.leafer;)i=i.parent;const s=i;if(s.__fullLayouting)return;s.__fullLayouting=!0,E.layout(s),delete s.__fullLayouting}}getTransform(t="world"){this.update();const{leaf:i}=this;switch(t){case"world":return i.__world;case"local":return i.__localMatrix;case"inner":return L.defaultMatrix;case"page":t=i.zoomLayer;default:return Ea(i,t)}}getBounds(t,i="world"){switch(this.update(),i){case"world":return this.getWorldBounds(t);case"local":return this.getLocalBounds(t);case"inner":return this.getInnerBounds(t);case"page":i=this.leaf.zoomLayer;default:return new wt(this.getInnerBounds(t)).toOuterOf(this.getTransform(i))}}getInnerBounds(t="box"){switch(t){case"render":return this.renderBounds;case"content":if(this.contentBounds)return this.contentBounds;case"box":return this.boxBounds;case"stroke":return this.strokeBounds}}getLocalBounds(t="box"){switch(t){case"render":return this.localRenderBounds;case"stroke":return this.localStrokeBounds;case"content":if(this.contentBounds)return this.localContentBounds;case"box":return this.leaf.__localBoxBounds}}getWorldBounds(t="box"){switch(t){case"render":return this.leaf.__world;case"stroke":return this.worldStrokeBounds;case"content":if(this.contentBounds)return this.worldContentBounds;case"box":return this.worldBoxBounds}}getLayoutBounds(t,i="world",s){const{leaf:r}=this;let n,o,a,h=this.getInnerBounds(t);switch(i){case"world":n=r.getWorldPoint(h),o=r.__world;break;case"local":const{scaleX:l,scaleY:c,rotation:d,skewX:p,skewY:u}=r.__;a={scaleX:l,scaleY:c,rotation:d,skewX:p,skewY:u},n=r.getLocalPointByInner(h);break;case"inner":n=h,o=L.defaultMatrix;break;case"page":i=r.zoomLayer;default:n=r.getWorldPoint(h,i),o=Ea(r,i,!0)}if(a||(a=L.getLayout(o)),Sp(a,h),$.copy(a,n),s){const{scaleX:l,scaleY:c}=a,d=Math.abs(l),p=Math.abs(c);d===1&&p===1||(a.scaleX/=d,a.scaleY/=p,a.width*=d,a.height*=p)}return a}getLayoutPoints(t,i="world"){const{leaf:s}=this,r=kp(this.getInnerBounds(t));let n;switch(i){case"world":n=null;break;case"local":n=s.parent;break;case"inner":break;case"page":i=s.zoomLayer;default:n=i}return n!==void 0&&r.forEach(o=>s.innerToWorld(o,null,!1,n)),r}shrinkContent(){const{x:t,y:i,width:s,height:r}=this.boxBounds;this._contentBounds={x:t,y:i,width:s,height:r}}spreadStroke(){const{x:t,y:i,width:s,height:r}=this.strokeBounds;this._strokeBounds={x:t,y:i,width:s,height:r},this._localStrokeBounds={x:t,y:i,width:s,height:r},this.renderSpread||this.spreadRenderCancel()}spreadRender(){const{x:t,y:i,width:s,height:r}=this.renderBounds;this._renderBounds={x:t,y:i,width:s,height:r},this._localRenderBounds={x:t,y:i,width:s,height:r}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){const t=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,t&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged||this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||(this.strokeSpread=1),this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||(this.renderSpread=1),this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged||this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=!0,this.leaf.forceUpdate("surface"))}destroy(){}}class xe{constructor(t,i){this.bubbles=!1,this.type=t,i&&(this.target=i)}stopDefault(){this.isStopDefault=!0,this.origin&&E.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&E.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&E.event.stop(this.origin)}}class pt extends xe{constructor(t,i,s){super(t,i),this.parent=s,this.child=i}}pt.ADD="child.add",pt.REMOVE="child.remove",pt.CREATED="created",pt.MOUNTED="mounted",pt.UNMOUNTED="unmounted",pt.DESTROY="destroy";class Ue extends xe{constructor(t,i,s,r,n){super(t,i),this.attrName=s,this.oldValue=r,this.newValue=n}}Ue.CHANGE="property.change",Ue.LEAFER_CHANGE="property.leafer_change";class le extends xe{constructor(t,i){super(t),Object.assign(this,i)}}le.LOAD="image.load",le.LOADED="image.loaded",le.ERROR="image.error";class De extends xe{get bigger(){if(!this.old)return!0;const{width:t,height:i}=this.old;return this.width>=t&&this.height>=i}get smaller(){return!this.bigger}get samePixelRatio(){return!this.old||this.pixelRatio===this.old.pixelRatio}constructor(t,i){typeof t=="object"?(super(De.RESIZE),Object.assign(this,t)):super(t),this.old=i}static isResizing(t){return this.resizingKeys&&this.resizingKeys[t.innerId]!==void 0}}De.RESIZE="resize";class Ae extends xe{constructor(t,i){super(t),this.data=i}}Ae.REQUEST="watch.request",Ae.DATA="watch.data";class tt extends xe{constructor(t,i,s){super(t),i&&(this.data=i,this.times=s)}}tt.REQUEST="layout.request",tt.START="layout.start",tt.BEFORE="layout.before",tt.LAYOUT="layout",tt.AFTER="layout.after",tt.AGAIN="layout.again",tt.END="layout.end";class U extends xe{constructor(t,i,s,r){super(t),i&&(this.times=i),s&&(this.renderBounds=s,this.renderOptions=r)}}U.REQUEST="render.request",U.CHILD_START="render.child_start",U.CHILD_END="render.child_end",U.START="render.start",U.BEFORE="render.before",U.RENDER="render",U.AFTER="render.after",U.AGAIN="render.again",U.END="render.end",U.NEXT="render.next";class dt extends xe{}dt.START="leafer.start",dt.BEFORE_READY="leafer.before_ready",dt.READY="leafer.ready",dt.AFTER_READY="leafer.after_ready",dt.VIEW_READY="leafer.view_ready",dt.VIEW_COMPLETED="leafer.view_completed",dt.STOP="leafer.stop",dt.RESTART="leafer.restart",dt.END="leafer.end";const Ta={};class Fl{set event(t){this.on(t)}on(t,i,s){if(!i){let c,d=t;for(let p in d)c=d[p],c instanceof Array?this.on(p,c[0],c[1]):this.on(p,c);return}let r,n,o;s&&(s==="once"?n=!0:typeof s=="boolean"?r=s:(r=s.capture,n=s.once));const a=on(this,r,!0),h=typeof t=="string"?t.split(" "):t,l=n?{listener:i,once:n}:{listener:i};h.forEach(c=>{c&&(o=a[c],o?o.findIndex(d=>d.listener===i)===-1&&o.push(l):a[c]=[l])})}off(t,i,s){if(t){const r=typeof t=="string"?t.split(" "):t;if(i){let n,o,a;s&&(n=typeof s=="boolean"?s:s!=="once"&&s.capture);const h=on(this,n);r.forEach(l=>{l&&(o=h[l],o&&(a=o.findIndex(c=>c.listener===i),a>-1&&o.splice(a,1),o.length||delete h[l]))})}else{const{__bubbleMap:n,__captureMap:o}=this;r.forEach(a=>{n&&delete n[a],o&&delete o[a]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(t,i,s,r){return s&&(i=i.bind(s)),this.on(t,i,r),{type:t,current:this,listener:i,options:r}}off_(t){if(!t)return;const i=t instanceof Array?t:[t];i.forEach(s=>s.current.off(s.type,s.listener,s.options)),i.length=0}once(t,i,s){this.on(t,i,{once:!0,capture:s})}emit(t,i,s){!i&&Ri.has(t)&&(i=Ri.get(t,{type:t,target:this,current:this}));const r=on(this,s)[t];if(r){let n;for(let o=0,a=r.length;o<a&&!((n=r[o])&&(n.listener(i),n.once&&(this.off(t,n.listener,s),o--,a--),i&&i.isStopNow));o++);}this.syncEventer&&this.syncEventer.emitEvent(i,s)}emitEvent(t,i){t.current=this,this.emit(t.type,t,i)}hasEvent(t,i){if(this.syncEventer&&this.syncEventer.hasEvent(t,i))return!0;const{__bubbleMap:s,__captureMap:r}=this,n=s&&s[t],o=r&&r[t];return!!(i===void 0?n||o:i?o:n)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}}function on(e,t,i){if(t){const{__captureMap:s}=e;return s||(i?e.__captureMap={}:Ta)}{const{__bubbleMap:s}=e;return s||(i?e.__bubbleMap={}:Ta)}}const{on:Rp,on_:Ep,off:Tp,off_:Pp,once:Ap,emit:Op,emitEvent:Lp,hasEvent:Dp,destroy:$p}=Fl.prototype,wo={on:Rp,on_:Ep,off:Tp,off_:Pp,once:Ap,emit:Op,emitEvent:Lp,hasEvent:Dp,destroyEventer:$p},{isFinite:Mp}=Number,Fp=Q.get("setAttr"),Ip={__setAttr(e,t,i){if(this.leaferIsCreated){const s=this.__.__getInput(e);if(i&&!Mp(t)&&t!==void 0&&(Fp.warn(this.innerName,e,t),t=void 0),typeof t=="object"||s!==t){this.__realSetAttr(e,t);const{CHANGE:r}=Ue,n=new Ue(r,this,e,s,t);return this.isLeafer?this.emitEvent(new Ue(Ue.LEAFER_CHANGE,this,e,s,t)):this.hasEvent(r)&&this.emitEvent(n),this.leafer.emitEvent(n),!0}return!1}return this.__realSetAttr(e,t),!0},__realSetAttr(e,t){const i=this.__;i[e]=t,this.__proxyData&&this.setProxyAttr(e,t),i.normalStyle&&(this.lockNormalStyle||i.normalStyle[e]===void 0||(i.normalStyle[e]=t))},__getAttr(e){return this.__proxyData?this.getProxyAttr(e):this.__.__get(e)}},{setLayout:Wp,multiplyParent:zp,translateInner:Np,defaultWorld:jp}=L,{toPoint:Yp,tempPoint:an}=Pi,Xp={__updateWorldMatrix(){zp(this.__local||this.__layout,this.parent?this.parent.__world:jp,this.__world,!!this.__layout.affectScaleOrRotation,this.__,this.parent&&this.parent.__)},__updateLocalMatrix(){if(this.__local){const e=this.__layout,t=this.__local,i=this.__;e.affectScaleOrRotation&&(e.scaleChanged||e.rotationChanged)&&(Wp(t,i,null,null,e.affectRotation),e.scaleChanged=e.rotationChanged=!1),t.e=i.x+i.offsetX,t.f=i.y+i.offsetY,(i.around||i.origin)&&(Yp(i.around||i.origin,e.boxBounds,an),Np(t,-an.x,-an.y,!i.around))}this.__layout.matrixChanged=!1}},{updateMatrix:Hp,updateAllMatrix:Pa}=ve,{updateBounds:Aa}=_s,{toOuterOf:Ds,copyAndSpread:Oa,copy:Gp}=T,{toBounds:Up}=yo,Vp={__updateWorldBounds(){Ds(this.__layout.renderBounds,this.__world,this.__world),this.__layout.resized&&(this.__onUpdateSize(),this.__layout.resized=!1)},__updateLocalBounds(){const e=this.__layout;e.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),e.resized=!0),e.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),e.localBoxChanged=!1,e.strokeSpread&&(e.strokeChanged=!0),e.renderSpread&&(e.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),e.boxChanged=!1,e.strokeChanged&&(e.strokeSpread=this.__updateStrokeSpread(),e.strokeSpread?(e.strokeBounds===e.boxBounds&&e.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):e.spreadStrokeCancel(),e.strokeChanged=!1,(e.renderSpread||e.strokeSpread!==e.strokeBoxSpread)&&(e.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),e.resized=!0),e.renderChanged&&(e.renderSpread=this.__updateRenderSpread(),e.renderSpread?(e.renderBounds!==e.boxBounds&&e.renderBounds!==e.strokeBounds||e.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):e.spreadRenderCancel(),e.renderChanged=!1,this.parent&&this.parent.__layout.renderChange()),e.boundsChanged=!1},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),Ds(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){Ds(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){Ds(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(){const e=this.__layout.boxBounds,t=this.__;t.__pathInputed?Up(t.path,e):(e.x=0,e.y=0,e.width=t.width,e.height=t.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.__extraUpdate(),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),Pa(this),Aa(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(Pa(this),Aa(this,this))):Hp(this)},__updateNaturalSize(){const{__:e,__layout:t}=this;e.__naturalWidth=t.boxBounds.width,e.__naturalHeight=t.boxBounds.height},__updateStrokeBounds(){const e=this.__layout;Oa(e.strokeBounds,e.boxBounds,e.strokeBoxSpread)},__updateRenderBounds(){const e=this.__layout;e.renderSpread>0?Oa(e.renderBounds,e.boxBounds,e.renderSpread):Gp(e.renderBounds,e.strokeBounds)}},qp={__render(e,t){if(this.__worldOpacity){const i=this.__;if(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),e.opacity=t.dimOpacity&&!i.dimskip?i.opacity*t.dimOpacity:i.opacity,this.__.__single){if(i.eraser==="path")return this.__renderEraser(e,t);const s=e.getSameCanvas(!0,!0);this.__draw(s,t,e),this.__worldFlipped?e.copyWorldByReset(s,this.__nowWorld,null,i.__blendMode,!0):e.copyWorldToInner(s,this.__nowWorld,this.__layout.renderBounds,i.__blendMode),s.recycle(this.__nowWorld)}else this.__draw(e,t);Q.showBounds&&Q.drawBounds(this,e,t)}},__clip(e,t){this.__worldOpacity&&(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),this.__drawRenderPath(e),this.windingRule?e.clip(this.windingRule):e.clip())},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:La}=Sr,Kp={__updateChange(){const{__layout:e}=this;e.childrenSortChanged&&(this.__updateSortChildren(),e.childrenSortChanged=!1),this.__.__checkSingle()},__render(e,t){if(this.__nowWorld=this.__getNowWorld(t),this.__worldOpacity){const i=this.__;if(i.dim?t.dimOpacity=i.dim===!0?.2:i.dim:i.dimskip&&t.dimOpacity&&(t.dimOpacity=0),i.__single){if(i.eraser==="path")return this.__renderEraser(e,t);const s=e.getSameCanvas(!1,!0);this.__renderBranch(s,t);const r=this.__nowWorld;e.opacity=t.dimOpacity?i.opacity*t.dimOpacity:i.opacity,e.copyWorldByReset(s,r,r,i.__blendMode,!0),s.recycle(r)}else this.__renderBranch(e,t)}},__renderBranch(e,t){if(this.__hasMask)this.__renderMask(e,t);else{const{children:i}=this;for(let s=0,r=i.length;s<r;s++)La(i[s],t)||i[s].__render(e,t)}},__clip(e,t){if(this.__worldOpacity){const{children:i}=this;for(let s=0,r=i.length;s<r;s++)La(i[s],t)||i[s].__clip(e,t)}}},{LEAF:Qp,create:Jp}=we,{toInnerPoint:Zp,toOuterPoint:t_,multiplyParent:e_}=L,{toOuterOf:Da}=T,{copy:$a,move:Ma}=$,{moveLocal:i_,zoomOfLocal:s_,rotateOfLocal:r_,skewOfLocal:n_,moveWorld:Fa,zoomOfWorld:o_,rotateOfWorld:a_,skewOfWorld:h_,transform:Ia,transformWorld:l_,setTransform:d_,getFlipTransform:c_,getLocalOrigin:hn,getRelativeWorld:u_,drop:p_}=ve;let Qe=class{get tag(){return this.__tag}set tag(e){}get __tag(){return"Leaf"}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return bl}get __LayoutProcessor(){return Cp}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform("world")}get localTransform(){return this.__layout.getTransform("local")}get boxBounds(){return this.getBounds("box","inner")}get renderBounds(){return this.getBounds("render","inner")}get worldBoxBounds(){return this.getBounds("box")}get worldStrokeBounds(){return this.getBounds("stroke")}get worldRenderBounds(){return this.getBounds("render")}get worldOpacity(){return this.__layout.update(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){return this.leaferIsCreated&&this.leafer.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(e){this.on(e)}constructor(e){this.innerId=Jp(Qp),this.reset(e),this.__bubbleMap&&this.__emitLifeEvent(pt.CREATED)}reset(e){this.leafer&&this.leafer.forceRender(this.__world),e!==0&&(this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},e!==null&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0})),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),e&&(e.__&&(e=e.toJSON()),e.children?this.set(e):Object.assign(this,e))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(e,t){t&&(e=e.bind(t)),this.parent?e():this.on(pt.ADD,e,"once")}waitLeafer(e,t){t&&(e=e.bind(t)),this.leafer?e():this.on(pt.MOUNTED,e,"once")}nextRender(e,t,i){this.leafer?this.leafer.nextRender(e,t,i):this.waitLeafer(()=>this.leafer.nextRender(e,t,i))}removeNextRender(e){this.nextRender(e,null,"off")}__bindLeafer(e){if(this.isLeafer&&e!==null&&(e=this),this.leafer&&!e&&this.leafer.leafs--,this.leafer=e,e?(e.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation("in"),this.__bubbleMap&&this.__emitLifeEvent(pt.MOUNTED)):this.__emitLifeEvent(pt.UNMOUNTED),this.isBranch){const{children:t}=this;for(let i=0,s=t.length;i<s;i++)t[i].__bindLeafer(e)}}set(e,t){}get(e){}setAttr(e,t){this[e]=t}getAttr(e){return this[e]}getComputedAttr(e){return this.__[e]}toJSON(e){return e&&this.__layout.update(),this.__.__getInputData(null,e)}toString(e){return JSON.stringify(this.toJSON(e))}toSVG(){}__SVG(e){}toHTML(){}__setAttr(e,t){return!0}__getAttr(e){}setProxyAttr(e,t){}getProxyAttr(e){}find(e,t){}findTag(e){}findOne(e,t){}findId(e){}focus(e){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(e){e===void 0?e="width":e==="surface"&&(e="blendMode");const t=this.__.__getInput(e);this.__[e]=t===void 0?null:void 0,this[e]=t}forceRender(e,t){this.forceUpdate("surface")}__extraUpdate(){this.leaferIsReady&&this.leafer.layouter.addExtra(this)}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(){}__updateContentBounds(){}__updateStrokeBounds(){}__updateRenderBounds(){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(e){this.__hasEraser=!!e||this.children.some(t=>t.__.eraser)}__renderEraser(e,t){e.save(),this.__clip(e,t);const{renderBounds:i}=this.__layout;e.clearRect(i.x,i.y,i.width,i.height),e.restore()}__updateMask(e){this.__hasMask=this.children.some(t=>t.__.mask&&t.__.visible&&t.__.opacity)}__renderMask(e,t){}__getNowWorld(e){if(e.matrix){this.__cameraWorld||(this.__cameraWorld={});const t=this.__cameraWorld,i=this.__world;return e_(i,e.matrix,t,void 0,i),Da(this.__layout.renderBounds,t,t),t.half!==i.half&&(t.half=i.half),t}return this.__world}getTransform(e){return this.__layout.getTransform(e||"local")}getBounds(e,t){return this.__layout.getBounds(e,t)}getLayoutBounds(e,t,i){return this.__layout.getLayoutBounds(e,t,i)}getLayoutPoints(e,t){return this.__layout.getLayoutPoints(e,t)}getWorldBounds(e,t,i){const s=t?u_(this,t):this.worldTransform,r=i?e:{};return Da(e,s,r),r}worldToLocal(e,t,i,s){this.parent?this.parent.worldToInner(e,t,i,s):t&&$a(t,e)}localToWorld(e,t,i,s){this.parent?this.parent.innerToWorld(e,t,i,s):t&&$a(t,e)}worldToInner(e,t,i,s){s&&(s.innerToWorld(e,t,i),e=t||e),Zp(this.worldTransform,e,t,i)}innerToWorld(e,t,i,s){t_(this.worldTransform,e,t,i),s&&s.worldToInner(t||e,null,i)}getBoxPoint(e,t,i,s){return this.getBoxPointByInner(this.getInnerPoint(e,t,i,s),null,null,!0)}getBoxPointByInner(e,t,i,s){const r=s?e:Object.assign({},e),{x:n,y:o}=this.boxBounds;return Ma(r,-n,-o),r}getInnerPoint(e,t,i,s){const r=s?e:{};return this.worldToInner(e,r,i,t),r}getInnerPointByBox(e,t,i,s){const r=s?e:Object.assign({},e),{x:n,y:o}=this.boxBounds;return Ma(r,n,o),r}getInnerPointByLocal(e,t,i,s){return this.getInnerPoint(e,this.parent,i,s)}getLocalPoint(e,t,i,s){const r=s?e:{};return this.worldToLocal(e,r,i,t),r}getLocalPointByInner(e,t,i,s){return this.getWorldPoint(e,this.parent,i,s)}getPagePoint(e,t,i,s){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(e,t,i,s)}getWorldPoint(e,t,i,s){const r=s?e:{};return this.innerToWorld(e,r,i,t),r}getWorldPointByBox(e,t,i,s){return this.getWorldPoint(this.getInnerPointByBox(e,null,null,s),t,i,!0)}getWorldPointByLocal(e,t,i,s){const r=s?e:{};return this.localToWorld(e,r,i,t),r}getWorldPointByPage(e,t,i,s){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(e,t,i,s)}setTransform(e,t,i){d_(this,e,t,i)}transform(e,t,i){Ia(this,e,t,i)}move(e,t,i){i_(this,e,t,i)}moveInner(e,t,i){Fa(this,e,t,!0,i)}scaleOf(e,t,i,s,r){s_(this,hn(this,e),t,i,s,r)}rotateOf(e,t,i){r_(this,hn(this,e),t,i)}skewOf(e,t,i,s,r){n_(this,hn(this,e),t,i,s,r)}transformWorld(e,t,i){l_(this,e,t,i)}moveWorld(e,t,i){Fa(this,e,t,!1,i)}scaleOfWorld(e,t,i,s,r){o_(this,e,t,i,s,r)}rotateOfWorld(e,t){a_(this,e,t)}skewOfWorld(e,t,i,s,r){h_(this,e,t,i,s,r)}flip(e,t){Ia(this,c_(this,e),!1,t)}scaleResize(e,t=e,i){this.scaleX*=e,this.scaleY*=t}__scaleResize(e,t){}resizeWidth(e){}resizeHeight(e){}__hitWorld(e){return!0}__hit(e){return!0}__hitFill(e){return!0}__hitStroke(e,t){return!0}__hitPixel(e){return!0}__drawHitPath(e){}__updateHitCanvas(){}__render(e,t){}__drawFast(e,t){}__draw(e,t,i){}__clip(e,t){}__renderShape(e,t,i,s){}__updateWorldOpacity(){}__updateChange(){}__drawPath(e){}__drawRenderPath(e){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return gt.need("path")}getMotionPoint(e){return gt.need("path")}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(e,t){}__updateSortChildren(){}add(e,t){}remove(e,t){this.parent&&this.parent.remove(this,t)}dropTo(e,t,i){p_(this,e,t,i)}on(e,t,i){}off(e,t,i){}on_(e,t,i,s){}off_(e){}once(e,t,i){}emit(e,t,i){}emitEvent(e,t){}hasEvent(e,t){return!1}static changeAttr(e,t,i){i?this.addAttr(e,t,i):$l(this.prototype,e,t)}static addAttr(e,t,i,s){i||(i=D),i(t,s)(this.prototype,e)}__emitLifeEvent(e){this.hasEvent(e)&&this.emitEvent(new pt(e,this,this.parent))}destroy(){this.destroyed||(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(pt.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),this.destroyed=!0)}};Qe=S([Dt(Ip),Dt(Xp),Dt(Vp),Dt(wo),Dt(qp)],Qe);const{setListWithFn:ln}=T,{sort:__}=_s,{localBoxBounds:f_,localStrokeBounds:g_,localRenderBounds:y_,maskLocalBoxBounds:m_,maskLocalStrokeBounds:w_,maskLocalRenderBounds:v_}=Sr,x_=new Q("Branch");let Qn=class extends Qe{__updateStrokeSpread(){const{children:e}=this;for(let t=0,i=e.length;t<i;t++)if(e[t].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){const{children:e}=this;for(let t=0,i=e.length;t<i;t++)if(e[t].__layout.renderSpread)return 1;return 0}__updateBoxBounds(){ln(this.__layout.boxBounds,this.children,this.__hasMask?m_:f_)}__updateStrokeBounds(){ln(this.__layout.strokeBounds,this.children,this.__hasMask?w_:g_)}__updateRenderBounds(){ln(this.__layout.renderBounds,this.children,this.__hasMask?v_:y_)}__updateSortChildren(){let e;const{children:t}=this;if(t.length>1){for(let i=0,s=t.length;i<s;i++)t[i].__tempNumber=i,t[i].__.zIndex&&(e=!0);t.sort(__),this.__layout.affectChildrenSort=e}}add(e,t){if(e===this||e.destroyed)return x_.warn("add self or destroyed");const i=t===void 0;if(!e.__){if(e instanceof Array)return e.forEach(r=>{this.add(r,t),i||t++});e=ps.get(e.tag,e)}e.parent&&e.parent.remove(e),e.parent=this,i?this.children.push(e):this.children.splice(t,0,e),e.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1);const s=e.__layout;s.boxChanged||s.boxChange(),s.matrixChanged||s.matrixChange(),e.__bubbleMap&&e.__emitLifeEvent(pt.ADD),this.leafer&&(e.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(pt.ADD,e)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...e){this.add(e)}remove(e,t){e?e.__?e.animationOut?e.__runAnimation("out",()=>this.__remove(e,t)):this.__remove(e,t):this.find(e).forEach(i=>this.remove(i,t)):e===void 0&&super.remove(null,t)}removeAll(e){const{children:t}=this;t.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,t.forEach(i=>{this.__realRemoveChild(i),e&&i.destroy()}))}clear(){this.removeAll(!0)}__remove(e,t){const i=this.children.indexOf(e);i>-1&&(this.children.splice(i,1),e.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(e),t&&e.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(e){e.__emitLifeEvent(pt.REMOVE),e.parent=null,this.leafer&&(e.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(pt.REMOVE,e),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(e,t){const i=new pt(e,t,this);this.hasEvent(e)&&!this.isLeafer&&this.emitEvent(i),this.leafer.emitEvent(i)}};Qn=S([Dt(Kp)],Qn);class ht{get length(){return this.list.length}constructor(t){this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return t&&this.keys[t.innerId]!==void 0}indexAt(t){return this.list[t]}indexOf(t){const i=this.keys[t.innerId];return i===void 0?-1:i}add(t){const{list:i,keys:s}=this;s[t.innerId]===void 0&&(i.push(t),s[t.innerId]=i.length-1)}addAt(t,i=0){const{keys:s}=this;if(s[t.innerId]===void 0){const{list:r}=this;for(let n=i,o=r.length;n<o;n++)s[r[n].innerId]++;i===0?r.unshift(t):(i>r.length&&(i=r.length),r.splice(i,0,t)),s[t.innerId]=i}}addList(t){for(let i=0;i<t.length;i++)this.add(t[i])}remove(t){const{list:i}=this;let s;for(let r=0,n=i.length;r<n;r++)s!==void 0?this.keys[i[r].innerId]=r-1:i[r].innerId===t.innerId&&(s=r,delete this.keys[t.innerId]);s!==void 0&&i.splice(s,1)}sort(t){const{list:i}=this;t?i.sort((s,r)=>r.__level-s.__level):i.sort((s,r)=>s.__level-r.__level)}forEach(t){this.list.forEach(t)}clone(){const t=new ht;return t.list=[...this.list],t.keys=Object.assign({},this.keys),t}update(){this.keys={};const{list:t,keys:i}=this;for(let s=0,r=t.length;s<r;s++)i[t[s].innerId]=s}reset(){this.list=[],this.keys={}}destroy(){this.reset()}}class b_{get length(){return this._length}constructor(t){this._length=0,this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return this.keys[t.innerId]!==void 0}without(t){return this.keys[t.innerId]===void 0}sort(t){const{levels:i}=this;t?i.sort((s,r)=>r-s):i.sort((s,r)=>s-r)}addList(t){t.forEach(i=>{this.add(i)})}add(t){const{keys:i,levelMap:s}=this;i[t.innerId]||(i[t.innerId]=1,s[t.__level]?s[t.__level].push(t):(s[t.__level]=[t],this.levels.push(t.__level)),this._length++)}forEach(t){let i;this.levels.forEach(s=>{i=this.levelMap[s];for(let r=0,n=i.length;r<n;r++)t(i[r])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}}function _(e,t,i,s){var r,n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function ui(e){return nt(e,t=>({set(i){this.__setAttr(t,i),i&&(this.__.__useEffect=!0),this.__layout.renderChanged||this.__layout.renderChange()}}))}function Wi(e){return nt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.boxChanged||this.__layout.boxChange(),this.__updateSize()}}))}function B_(){return(e,t)=>{const i="_"+t;ei(e,t,{set(s){this.isLeafer&&(this[i]=s)},get(){return this.isApp?this.tree.zoomLayer:this.isLeafer?this[i]||this:this.leafer&&this.leafer.zoomLayer}})}}const Il={},Mt={},Jn={number:(e,t)=>typeof e=="object"?e.type==="percent"?e.value*t:e.value:e},Wl={},_t={},Je={},rr={},Zn={},zl={apply(){gt.need("filter")}},is={},I={setStyleName:()=>gt.need("state"),set:()=>gt.need("state")},Ze={list:{},register(e,t){Ze.list[e]=t},get:e=>Ze.list[e]},{parse:k_,objectToCanvasData:S_}=Ke,Wa={},za=Q.get("UIData");let be=class extends bl{get scale(){const{scaleX:t,scaleY:i}=this;return t!==i?{x:t,y:i}:t}get __strokeWidth(){const{strokeWidth:t,strokeWidthFixed:i}=this;if(i){const s=this.__leaf;let{scaleX:r}=s.__nowWorld||s.__world;return r<0&&(r=-r),r>1?t/r:t}return t}get __hasStroke(){return this.stroke&&this.strokeWidth}get __hasHalf(){const t=this;return t.stroke&&t.strokeAlign==="center"&&t.strokeWidth%2||void 0}get __hasMultiPaint(){const t=this;return!!(t.__isFills&&t.fill.length>1||t.__isStrokes&&t.stroke.length>1||t.__useEffect)||t.fill&&this.__hasStroke}get __clipAfterFill(){const t=this;return t.cornerRadius||t.innerShadow||t.__pathInputed}get __hasSurface(){return this.fill||this.stroke}get __autoWidth(){return!this._width}get __autoHeight(){return!this._height}get __autoSide(){return!this._width||!this._height}get __autoSize(){return!this._width&&!this._height}setVisible(t){this._visible=t;const{leafer:i}=this.__leaf;i&&(i.watcher.hasVisible=!0)}setWidth(t){t<0?(this._width=-t,this.__leaf.scaleX*=-1,za.warn("width < 0, instead -scaleX ",this)):this._width=t}setHeight(t){t<0?(this._height=-t,this.__leaf.scaleY*=-1,za.warn("height < 0, instead -scaleY",this)):this._height=t}setFill(t){if(this.__naturalWidth&&this.__removeNaturalSize(),typeof t!="string"&&t){if(typeof t=="object"){this.__setInput("fill",t);const i=this.__leaf.__layout;i.boxChanged||i.boxChange(),this.__isFills=!0,this._fill||(this._fill=Wa)}}else this.__isFills&&(this.__removeInput("fill"),Je.recycleImage("fill",this),this.__isFills=!1,this.__pixelFill&&(this.__pixelFill=!1)),this._fill=t}setStroke(t){if(typeof t!="string"&&t){if(typeof t=="object"){this.__setInput("stroke",t);const i=this.__leaf.__layout;i.boxChanged||i.boxChange(),this.__isStrokes=!0,this._stroke||(this._stroke=Wa)}}else this.__isStrokes&&(this.__removeInput("stroke"),Je.recycleImage("stroke",this),this.__isStrokes=!1,this.__pixelStroke&&(this.__pixelStroke=!1)),this._stroke=t}setPath(t){const i=typeof t=="string";i||t&&typeof t[0]=="object"?(this.__setInput("path",t),this._path=i?k_(t):S_(t)):(this.__input&&this.__removeInput("path"),this._path=t)}setShadow(t){dn(this,"shadow",t)}setInnerShadow(t){dn(this,"innerShadow",t)}setFilter(t){dn(this,"filter",t)}__computePaint(){const{fill:t,stroke:i}=this.__input;t&&_t.compute("fill",this.__leaf),i&&_t.compute("stroke",this.__leaf),this.__needComputePaint=!1}};function dn(e,t,i){e.__setInput(t,i),i instanceof Array?(i.some(s=>s.visible===!1)&&(i=i.filter(s=>s.visible!==!1)),i.length||(i=null)):i=i&&i.visible!==!1?[i]:null,e["_"+t]=i}let Cr=class extends be{},vo=class extends Cr{get __boxStroke(){return!this.__pathInputed}get __drawAfterFill(){const t=this;return t.overflow==="hide"&&(t.__clipAfterFill||t.innerShadow)&&t.__leaf.children.length}get __clipAfterFill(){return this.__leaf.isOverflow||super.__clipAfterFill}},C_=class extends Cr{__getInputData(t,i){const s=super.__getInputData(t,i);return Zt.forEach(r=>delete s[r]),s}},R_=class extends vo{},E_=class extends be{},xo=class extends be{get __boxStroke(){return!this.__pathInputed}},T_=class extends be{get __boxStroke(){return!this.__pathInputed}},P_=class extends be{},A_=class extends be{},O_=class extends be{get __pathInputed(){return 2}},L_=class extends Cr{};const D_={thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,black:900};let $_=class extends be{get __useNaturalRatio(){return!1}setFontWeight(t){typeof t=="string"?(this.__setInput("fontWeight",t),t=D_[t]||400):this.__input&&this.__removeInput("fontWeight"),this._fontWeight=t}setBoxStyle(t){let i=this.__leaf,s=i.__box;if(t){const{boxStyle:r}=this;if(s)for(let a in r)s[a]=void 0;else s=i.__box=ps.get("Rect",0);const n=i.__layout,o=s.__layout;r||(s.parent=i,s.__world=i.__world,o.boxBounds=n.boxBounds),s.set(t),o.strokeChanged&&n.strokeChange(),o.renderChanged&&n.renderChange(),s.__updateChange()}else s&&(i.__box=s.parent=null,s.destroy());this._boxStyle=t}},M_=class extends xo{setUrl(t){this.__setImageFill(t),this._url=t}__setImageFill(t){this.__leaf.image&&(this.__leaf.image=null),this.fill=t?{type:"image",mode:"stretch",url:t}:void 0}__getData(){const t=super.__getData();return delete t.fill,t}__getInputData(t,i){const s=super.__getInputData(t,i);return delete s.fill,s}},F_=class extends xo{get __isCanvas(){return!0}get __drawAfterFill(){return!0}__getInputData(t,i){const s=super.__getInputData(t,i);return s.url=this.__leaf.canvas.toDataURL("image/png"),s}};const I_={__updateStrokeSpread(){let e=0,t=0;const i=this.__,{strokeAlign:s,strokeWidth:r}=i,n=this.__box;if((i.stroke||i.hitStroke==="all")&&r&&s!=="inside"&&(t=e=s==="center"?r/2:r,!i.__boxStroke)){const o=i.__isLinePath?0:10*e,a=i.strokeCap==="none"?0:r;e+=Math.max(o,a)}return i.__useArrow&&(e+=5*r),n&&(e=Math.max(n.__layout.strokeSpread=n.__updateStrokeSpread(),e),t=n.__layout.strokeBoxSpread),this.__layout.strokeBoxSpread=t,e},__updateRenderSpread(){let e=0;const{shadow:t,innerShadow:i,blur:s,backgroundBlur:r,filter:n}=this.__;t&&t.forEach(a=>e=Math.max(e,Math.max(Math.abs(a.y),Math.abs(a.x))+(a.spread>0?a.spread:0)+1.5*a.blur)),s&&(e=Math.max(e,s)),n&&(e+=zl.getSpread(n));let o=e=Math.ceil(e);return i&&i.forEach(a=>o=Math.max(o,Math.max(Math.abs(a.y),Math.abs(a.x))+(a.spread<0?-a.spread:0)+1.5*a.blur)),r&&(o=Math.max(o,r)),this.__layout.renderShapeSpread=o,e+=this.__layout.strokeSpread||0,this.__box?Math.max(this.__box.__updateRenderSpread(),e):e}},W_={__updateChange(){const e=this.__,t=this.__world;if(e.__useEffect){const{shadow:s,innerShadow:r,blur:n,backgroundBlur:o,filter:a}=this.__;e.__useEffect=!!(s||r||n||o||a)}const i=e.__hasHalf;t.half!==i&&(t.half=i),e.__checkSingle(),e.__isFills||e.__isStrokes||e.cornerRadius||e.__useEffect?e.__complex=!0:e.__complex&&(e.__complex=!1)},__drawFast(e,t){Na(this,e,t)},__draw(e,t,i){const s=this.__;if(s.__complex){s.__needComputePaint&&s.__computePaint();const{fill:r,stroke:n,__drawAfterFill:o}=s;if(this.__drawRenderPath(e),s.__useEffect){const a=_t.shape(this,e,t);this.__nowWorld=this.__getNowWorld(t);const{shadow:h,innerShadow:l,filter:c}=s;h&&Zn.shadow(this,e,a),r&&(s.__isFills?_t.fills(r,this,e):_t.fill(r,this,e)),o&&this.__drawAfterFill(e,t),l&&Zn.innerShadow(this,e,a),n&&(s.__isStrokes?_t.strokes(n,this,e):_t.stroke(n,this,e)),c&&zl.apply(c,this,this.__nowWorld,e,i,a),a.worldCanvas&&a.worldCanvas.recycle(),a.canvas.recycle()}else r&&(s.__isFills?_t.fills(r,this,e):_t.fill(r,this,e)),o&&this.__drawAfterFill(e,t),n&&(s.__isStrokes?_t.strokes(n,this,e):_t.stroke(n,this,e))}else s.__pathInputed?Na(this,e,t):this.__drawFast(e,t)},__renderShape(e,t,i,s){if(this.__worldOpacity){e.setWorld(this.__nowWorld=this.__getNowWorld(t));const{fill:r,stroke:n}=this.__;this.__drawRenderPath(e),r&&!i&&(this.__.__pixelFill?_t.fills(r,this,e):_t.fill("#000000",this,e)),this.__.__isCanvas&&this.__drawAfterFill(e,t),n&&!s&&(this.__.__pixelStroke?_t.strokes(n,this,e):_t.stroke("#000000",this,e))}},__drawAfterFill(e,t){this.__.__clipAfterFill?(e.save(),this.windingRule?e.clip(this.windingRule):e.clip(),this.__drawContent(e,t),e.restore()):this.__drawContent(e,t)}};function Na(e,t,i){const{fill:s,stroke:r,__drawAfterFill:n}=e.__;e.__drawRenderPath(t),s&&_t.fill(s,e,t),n&&e.__drawAfterFill(t,i),r&&_t.stroke(r,e,t)}const z_={__drawFast(e,t){let{x:i,y:s,width:r,height:n}=this.__layout.boxBounds;const{fill:o,stroke:a,__drawAfterFill:h}=this.__;if(o&&(e.fillStyle=o,e.fillRect(i,s,r,n)),h&&this.__drawAfterFill(e,t),a){const{strokeAlign:l,__strokeWidth:c}=this.__;if(!c)return;e.setStroke(a,c,this.__);const d=c/2;switch(l){case"center":e.strokeRect(0,0,r,n);break;case"inside":r-=c,n-=c,r<0||n<0?(e.save(),this.__clip(e,t),e.strokeRect(i+d,s+d,r,n),e.restore()):e.strokeRect(i+d,s+d,r,n);break;case"outside":e.strokeRect(i-d,s-d,r+c,n+c)}}}};var to;let m=to=class extends Qe{get app(){return this.leafer&&this.leafer.app}get isFrame(){return!1}set scale(e){yt.assignScale(this,e)}get scale(){return this.__.scale}get pen(){const{path:e}=this.__;return Mi.set(this.path=e||[]),e||this.__drawPathByBox(Mi),Mi}constructor(e){super(e)}reset(e){}set(e,t){e&&(t?t==="temp"?(this.lockNormalStyle=!0,Object.assign(this,e),this.lockNormalStyle=!1):this.animate(e,t):Object.assign(this,e))}get(e){return typeof e=="string"?this.__.__getInput(e):this.__.__getInputData(e)}createProxyData(){}find(e,t){return gt.need("find")}findTag(e){return this.find({tag:e})}findOne(e,t){return gt.need("find")}findId(e){return this.findOne({id:e})}getPath(e,t){this.__layout.update();let i=t?this.__.__pathForRender:this.__.path;return i||(Mi.set(i=[]),this.__drawPathByBox(Mi)),e?Ke.toCanvasData(i,!0):i}getPathString(e,t,i){return Ke.stringify(this.getPath(e,t),i)}load(){this.__.__computePaint()}__onUpdateSize(){if(this.__.__input){const e=this.__;!e.lazy||this.__inLazyBounds||is.running?e.__computePaint():e.__needComputePaint=!0}}__updateRenderPath(){if(this.__.path){const e=this.__;e.__pathForRender=e.cornerRadius?Vu.smooth(e.path,e.cornerRadius,e.cornerSmoothing):e.path,e.__useArrow&&Wl.addArrows(this,!e.cornerRadius)}}__drawRenderPath(e){e.beginPath(),this.__drawPathByData(e,this.__.__pathForRender)}__drawPath(e){e.beginPath(),this.__drawPathByData(e,this.__.path)}__drawPathByData(e,t){t?Eu.drawPathByData(e,t):this.__drawPathByBox(e)}__drawPathByBox(e){const{x:t,y:i,width:s,height:r}=this.__layout.boxBounds;if(this.__.cornerRadius){const{cornerRadius:n}=this.__;e.roundRect(t,i,s,r,typeof n=="number"?[n]:n)}else e.rect(t,i,s,r)}drawImagePlaceholder(e,t){_t.fill(this.__.placeholderColor,this,e)}animate(e,t,i,s){return gt.need("animate")}killAnimate(e,t){}export(e,t){return gt.need("export")}syncExport(e,t){return gt.need("export")}clone(e){const t=ft.clone(this.toJSON());return e&&Object.assign(t,e),to.one(t)}static one(e,t,i,s,r){return ps.get(e.tag||this.prototype.__tag,e,t,i,s,r)}static registerUI(){xt()(this)}static registerData(e){vt(e)(this.prototype)}static setEditConfig(e){}static setEditOuter(e){}static setEditInner(e){}destroy(){this.fill=this.stroke=null,this.__animate&&this.killAnimate(),super.destroy()}};_([vt(be)],m.prototype,"__",void 0),_([B_()],m.prototype,"zoomLayer",void 0),_([kt("")],m.prototype,"id",void 0),_([kt("")],m.prototype,"name",void 0),_([kt("")],m.prototype,"className",void 0),_([me("pass-through")],m.prototype,"blendMode",void 0),_([np(1)],m.prototype,"opacity",void 0),_([op(!0)],m.prototype,"visible",void 0),_([me(!1)],m.prototype,"locked",void 0),_([me(!1)],m.prototype,"dim",void 0),_([me(!1)],m.prototype,"dimskip",void 0),_([ap(0)],m.prototype,"zIndex",void 0),_([hp(!1)],m.prototype,"mask",void 0),_([lp(!1)],m.prototype,"eraser",void 0),_([di(0,!0)],m.prototype,"x",void 0),_([di(0,!0)],m.prototype,"y",void 0),_([D(100,!0)],m.prototype,"width",void 0),_([D(100,!0)],m.prototype,"height",void 0),_([wa(1,!0)],m.prototype,"scaleX",void 0),_([wa(1,!0)],m.prototype,"scaleY",void 0),_([Zr(0,!0)],m.prototype,"rotation",void 0),_([Zr(0,!0)],m.prototype,"skewX",void 0),_([Zr(0,!0)],m.prototype,"skewY",void 0),_([di(0,!0)],m.prototype,"offsetX",void 0),_([di(0,!0)],m.prototype,"offsetY",void 0),_([di(0,!0)],m.prototype,"scrollX",void 0),_([di(0,!0)],m.prototype,"scrollY",void 0),_([ur()],m.prototype,"origin",void 0),_([ur()],m.prototype,"around",void 0),_([kt(!1)],m.prototype,"lazy",void 0),_([ip(1)],m.prototype,"pixelRatio",void 0),_([sp()],m.prototype,"path",void 0),_([Rt()],m.prototype,"windingRule",void 0),_([Rt(!0)],m.prototype,"closed",void 0),_([D(0)],m.prototype,"padding",void 0),_([D(!1)],m.prototype,"lockRatio",void 0),_([D()],m.prototype,"widthRange",void 0),_([D()],m.prototype,"heightRange",void 0),_([kt(!1)],m.prototype,"draggable",void 0),_([kt()],m.prototype,"dragBounds",void 0),_([kt(!1)],m.prototype,"editable",void 0),_([Ge(!0)],m.prototype,"hittable",void 0),_([Ge("path")],m.prototype,"hitFill",void 0),_([re("path")],m.prototype,"hitStroke",void 0),_([Ge(!1)],m.prototype,"hitBox",void 0),_([Ge(!0)],m.prototype,"hitChildren",void 0),_([Ge(!0)],m.prototype,"hitSelf",void 0),_([Ge()],m.prototype,"hitRadius",void 0),_([dp("")],m.prototype,"cursor",void 0),_([me()],m.prototype,"fill",void 0),_([re()],m.prototype,"stroke",void 0),_([re("inside")],m.prototype,"strokeAlign",void 0),_([re(1)],m.prototype,"strokeWidth",void 0),_([re(!1)],m.prototype,"strokeWidthFixed",void 0),_([re("none")],m.prototype,"strokeCap",void 0),_([re("miter")],m.prototype,"strokeJoin",void 0),_([re()],m.prototype,"dashPattern",void 0),_([re(0)],m.prototype,"dashOffset",void 0),_([re(10)],m.prototype,"miterLimit",void 0),_([Rt(0)],m.prototype,"cornerRadius",void 0),_([Rt()],m.prototype,"cornerSmoothing",void 0),_([ui()],m.prototype,"shadow",void 0),_([ui()],m.prototype,"innerShadow",void 0),_([ui()],m.prototype,"blur",void 0),_([ui()],m.prototype,"backgroundBlur",void 0),_([ui()],m.prototype,"grayscale",void 0),_([ui()],m.prototype,"filter",void 0),_([me()],m.prototype,"placeholderColor",void 0),_([kt({})],m.prototype,"data",void 0),_([Kt(Qe.prototype.reset)],m.prototype,"reset",null),m=to=_([Dt(I_),Dt(W_),kr()],m);let $t=class extends m{get __tag(){return"Group"}get isBranch(){return!0}constructor(t){super(t)}reset(t){this.__setBranch(),super.reset(t)}__setBranch(){this.children||(this.children=[])}set(t,i){if(t)if(t.children){const{children:s}=t;delete t.children,this.children?this.clear():this.__setBranch(),super.set(t,i),s.forEach(r=>this.add(r)),t.children=s}else super.set(t,i)}toJSON(t){const i=super.toJSON(t);return i.children=this.children.map(s=>s.toJSON(t)),i}pick(t,i){}addAt(t,i){this.add(t,i)}addAfter(t,i){this.add(t,this.children.indexOf(i)+1)}addBefore(t,i){this.add(t,this.children.indexOf(i))}add(t,i){}addMany(...t){}remove(t,i){}removeAll(t){}clear(){}};var nr;_([vt(Cr)],$t.prototype,"__",void 0),_([D(0)],$t.prototype,"width",void 0),_([D(0)],$t.prototype,"height",void 0),$t=_([Dt(Qn),xt()],$t);const N_=Q.get("Leafer");let Te=nr=class extends $t{get __tag(){return"Leafer"}get isApp(){return!1}get app(){return this.parent||this}get isLeafer(){return!0}get imageReady(){return this.viewReady&&Si.isComplete}get layoutLocked(){return!this.layouter.running}get FPS(){return this.renderer?this.renderer.FPS:60}get cursorPoint(){return this.interaction&&this.interaction.hoverData||{x:this.width/2,y:this.height/2}}get clientBounds(){return this.canvas&&this.canvas.getClientBounds(!0)||zd()}constructor(e,t){super(t),this.config={start:!0,hittable:!0,smooth:!0,lazySpeard:100},this.leafs=0,this.__eventIds=[],this.__controllers=[],this.__readyWait=[],this.__viewReadyWait=[],this.__viewCompletedWait=[],this.__nextRenderWait=[],this.userConfig=e,e&&(e.view||e.width)&&this.init(e),nr.list.add(this)}init(e,t){if(this.canvas)return;let i;const{config:s}=this;this.__setLeafer(this),t&&(this.parentApp=t,this.__bindApp(t),i=t.running),e&&(this.parent=t,this.initType(e.type),this.parent=void 0,ft.assign(s,e));const r=this.canvas=ct.canvas(s);this.__controllers.push(this.renderer=ct.renderer(this,r,s),this.watcher=ct.watcher(this,s),this.layouter=ct.layouter(this,s)),this.isApp&&this.__setApp(),this.__checkAutoLayout(s,t),this.view=r.view,t||(this.selector=ct.selector(this),this.interaction=ct.interaction(this,r,this.selector,s),this.interaction&&(this.__controllers.unshift(this.interaction),this.hitCanvasManager=ct.hitCanvasManager()),this.canvasManager=new xl,i=s.start),this.hittable=s.hittable,this.fill=s.fill,this.canvasManager.add(r),this.__listenEvents(),i&&(this.__startTimer=setTimeout(this.start.bind(this))),Ii.run(this.__initWait),this.onInit()}onInit(){}initType(e){}set(e,t){this.waitInit(()=>{super.set(e,t)})}start(){clearTimeout(this.__startTimer),!this.running&&this.canvas&&(this.running=!0,this.ready?this.emitLeafer(dt.RESTART):this.emitLeafer(dt.START),this.__controllers.forEach(e=>e.start()),this.isApp||this.renderer.render())}stop(){clearTimeout(this.__startTimer),this.running&&this.canvas&&(this.__controllers.forEach(e=>e.stop()),this.running=!1,this.emitLeafer(dt.STOP))}unlockLayout(){this.layouter.start(),this.updateLayout()}lockLayout(){this.updateLayout(),this.layouter.stop()}resize(e){const t=ft.copyAttrs({},e,Zt);Object.keys(t).forEach(i=>this[i]=t[i])}forceRender(e,t){const{renderer:i}=this;i&&(i.addBlock(e?new wt(e):this.canvas.bounds),this.viewReady&&(t?i.render():i.update()))}requestRender(e=!1){this.renderer&&this.renderer.update(e)}updateCursor(e){const t=this.interaction;t&&(e?t.setCursor(e):t.updateCursor())}updateLazyBounds(){this.lazyBounds=this.canvas.bounds.clone().spread(this.config.lazySpeard)}__doResize(e){const{canvas:t}=this;if(!t||t.isSameSize(e))return;const i=ft.copyAttrs({},this.canvas,Zt);t.resize(e),this.updateLazyBounds(),this.__onResize(new De(e,i))}__onResize(e){this.emitEvent(e),ft.copyAttrs(this.__,e,Zt),setTimeout(()=>{this.canvasManager&&this.canvasManager.clearRecycled()},0)}__setApp(){}__bindApp(e){this.selector=e.selector,this.interaction=e.interaction,this.canvasManager=e.canvasManager,this.hitCanvasManager=e.hitCanvasManager}__setLeafer(e){this.leafer=e,this.__level=1}__checkAutoLayout(e,t){t||(e.width&&e.height||(this.autoLayout=new Ud(e)),this.canvas.startAutoLayout(this.autoLayout,this.__onResize.bind(this)))}__setAttr(e,t){return this.canvas&&(Zt.includes(e)?this.__changeCanvasSize(e,t):e==="fill"?this.__changeFill(t):e==="hittable"?this.parent||(this.canvas.hittable=t):e==="zIndex"&&(this.canvas.zIndex=t,setTimeout(()=>this.parent&&this.parent.__updateSortChildren()))),super.__setAttr(e,t)}__getAttr(e){return this.canvas&&Zt.includes(e)?this.canvas[e]:super.__getAttr(e)}__changeCanvasSize(e,t){const i=ft.copyAttrs({},this.canvas,Zt);i[e]=this.config[e]=t,t&&this.canvas.stopAutoLayout(),this.__doResize(i)}__changeFill(e){this.config.fill=e,this.canvas.allowBackgroundColor?this.canvas.backgroundColor=e:this.forceRender()}__onCreated(){this.created=!0}__onReady(){this.ready=!0,this.emitLeafer(dt.BEFORE_READY),this.emitLeafer(dt.READY),this.emitLeafer(dt.AFTER_READY),Ii.run(this.__readyWait)}__onViewReady(){this.viewReady||(this.viewReady=!0,this.emitLeafer(dt.VIEW_READY),Ii.run(this.__viewReadyWait))}__onLayoutEnd(){const{grow:e,width:t,height:i}=this.config;if(e){let{width:s,height:r,pixelRatio:n}=this;const o=e==="box"?this.worldBoxBounds:this.__world;t||(s=Math.max(1,o.x+o.width)),i||(r=Math.max(1,o.y+o.height)),this.__doResize({width:s,height:r,pixelRatio:n})}this.ready||this.__onReady()}__onNextRender(){if(this.viewReady){Ii.run(this.__nextRenderWait);const{imageReady:e}=this;e&&!this.viewCompleted&&this.__checkViewCompleted(),e||(this.viewCompleted=!1,this.requestRender())}else this.requestRender()}__checkViewCompleted(e=!0){this.nextRender(()=>{this.imageReady&&(e&&this.emitLeafer(dt.VIEW_COMPLETED),Ii.run(this.__viewCompletedWait),this.viewCompleted=!0)})}__onWatchData(){this.watcher.childrenChanged&&this.interaction&&this.nextRender(()=>this.interaction.updateCursor())}waitInit(e,t){t&&(e=e.bind(t)),this.__initWait||(this.__initWait=[]),this.canvas?e():this.__initWait.push(e)}waitReady(e,t){t&&(e=e.bind(t)),this.ready?e():this.__readyWait.push(e)}waitViewReady(e,t){t&&(e=e.bind(t)),this.viewReady?e():this.__viewReadyWait.push(e)}waitViewCompleted(e,t){t&&(e=e.bind(t)),this.__viewCompletedWait.push(e),this.viewCompleted?this.__checkViewCompleted(!1):this.running||this.start()}nextRender(e,t,i){t&&(e=e.bind(t));const s=this.__nextRenderWait;if(i){for(let r=0;r<s.length;r++)if(s[r]===e){s.splice(r,1);break}}else s.push(e);this.requestRender()}zoom(e,t,i,s){return gt.need("view")}getValidMove(e,t){return{x:e,y:t}}getValidScale(e){return e}getWorldPointByClient(e,t){return this.interaction&&this.interaction.getLocal(e,t)}getPagePointByClient(e,t){return this.getPagePoint(this.getWorldPointByClient(e,t))}getClientPointByWorld(e){const{x:t,y:i}=this.clientBounds;return{x:t+e.x,y:i+e.y}}updateClientBounds(){this.canvas&&this.canvas.updateClientBounds()}receiveEvent(e){}emitLeafer(e){this.emitEvent(new dt(e,this))}__listenEvents(){const e=te.start("FirstCreate "+this.innerName);this.once(dt.START,()=>te.end(e)),this.once(tt.START,()=>this.updateLazyBounds()),this.once(U.START,()=>this.__onCreated()),this.once(U.END,()=>this.__onViewReady()),this.__eventIds.push(this.on_(Ae.DATA,this.__onWatchData,this),this.on_(tt.END,this.__onLayoutEnd,this),this.on_(U.NEXT,this.__onNextRender,this))}__removeListenEvents(){this.off_(this.__eventIds),this.__eventIds.length=0}destroy(e){const t=()=>{if(!this.destroyed){nr.list.remove(this);try{this.stop(),this.emitEvent(new dt(dt.END,this)),this.__removeListenEvents(),this.__controllers.forEach(i=>!(this.parent&&i===this.interaction)&&i.destroy()),this.__controllers.length=0,this.parent||(this.selector&&this.selector.destroy(),this.hitCanvasManager&&this.hitCanvasManager.destroy(),this.canvasManager.destroy()),this.canvas.destroy(),this.config.view=this.view=this.parentApp=null,this.userConfig&&(this.userConfig.view=null),super.destroy(),setTimeout(()=>{Ht.clearRecycled()},100)}catch(i){N_.error(i)}}};e?t():setTimeout(t)}};Te.list=new ht,_([vt(C_)],Te.prototype,"__",void 0),_([D()],Te.prototype,"pixelRatio",void 0),Te=nr=_([xt()],Te);let qe=class extends m{get __tag(){return"Rect"}constructor(t){super(t)}};_([vt(xo)],qe.prototype,"__",void 0),qe=_([Dt(z_),kr(),xt()],qe);const{copy:j_,add:Y_,includes:X_}=T,ze=qe.prototype,H_=$t.prototype,cn={};let at=class extends $t{get __tag(){return"Box"}get isBranchLeaf(){return!0}constructor(t){super(t),this.__layout.renderChanged||this.__layout.renderChange()}__updateStrokeSpread(){return 0}__updateRectRenderSpread(){return 0}__updateRenderSpread(){return this.__updateRectRenderSpread()||-1}__updateRectBoxBounds(){}__updateBoxBounds(t){const i=this.__;if(this.children.length&&!this.pathInputed)if(i.__autoSide){i.__hasSurface&&this.__extraUpdate(),super.__updateBoxBounds();const{boxBounds:s}=this.__layout;i.__autoSize||(i.__autoWidth?(s.width+=s.x,s.x=0,s.height=i.height,s.y=0):(s.height+=s.y,s.y=0,s.width=i.width,s.x=0)),this.__updateNaturalSize()}else this.__updateRectBoxBounds();else this.__updateRectBoxBounds()}__updateStrokeBounds(){}__updateRenderBounds(){let t;const{renderBounds:i}=this.__layout;this.children.length?(super.__updateRenderBounds(),j_(cn,i),this.__updateRectRenderBounds(),t=!X_(i,cn)||void 0,t&&this.__.overflow!=="hide"&&Y_(i,cn)):this.__updateRectRenderBounds(),this.isOverflow!==t&&(this.isOverflow=t)}__updateRectRenderBounds(){}__updateRectChange(){}__updateChange(){super.__updateChange(),this.__updateRectChange()}__renderRect(t,i){}__renderGroup(t,i){}__render(t,i){this.__.__drawAfterFill?this.__renderRect(t,i):(this.__renderRect(t,i),this.children.length&&this.__renderGroup(t,i))}__drawContent(t,i){this.__renderGroup(t,i),this.__.__hasStroke&&(t.setWorld(this.__nowWorld),this.__drawRenderPath(t))}};_([vt(vo)],at.prototype,"__",void 0),_([D(100)],at.prototype,"width",void 0),_([D(100)],at.prototype,"height",void 0),_([kt(!1)],at.prototype,"resizeChildren",void 0),_([Ll("show")],at.prototype,"overflow",void 0),_([Kt(ze.__updateStrokeSpread)],at.prototype,"__updateStrokeSpread",null),_([Kt(ze.__updateRenderSpread)],at.prototype,"__updateRectRenderSpread",null),_([Kt(ze.__updateBoxBounds)],at.prototype,"__updateRectBoxBounds",null),_([Kt(ze.__updateStrokeBounds)],at.prototype,"__updateStrokeBounds",null),_([Kt(ze.__updateRenderBounds)],at.prototype,"__updateRectRenderBounds",null),_([Kt(ze.__updateChange)],at.prototype,"__updateRectChange",null),_([Kt(ze.__render)],at.prototype,"__renderRect",null),_([Kt(H_.__render)],at.prototype,"__renderGroup",null),at=_([kr(),xt()],at);let zi=class extends at{get __tag(){return"Frame"}get isFrame(){return!0}constructor(t){super(t)}};_([vt(R_)],zi.prototype,"__",void 0),_([me("#FFFFFF")],zi.prototype,"fill",void 0),_([Ll("hide")],zi.prototype,"overflow",void 0),zi=_([xt()],zi);const{moveTo:ja,closePath:Ya,ellipse:pi}=ti;let _i=class extends m{get __tag(){return"Ellipse"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,innerRadius:s,startAngle:r,endAngle:n}=this.__,o=t/2,a=i/2,h=this.__.path=[];s?(r||n?(s<1&&pi(h,o,a,o*s,a*s,0,r,n,!1),pi(h,o,a,o,a,0,n,r,!0),s<1&&Ya(h)):(s<1&&(pi(h,o,a,o*s,a*s),ja(h,t,a)),pi(h,o,a,o,a,0,360,0,!0)),E.ellipseToCurve&&(this.__.path=this.getPath(!0))):r||n?(ja(h,o,a),pi(h,o,a,o,a,0,r,n,!1),Ya(h)):pi(h,o,a,o,a)}};_([vt(T_)],_i.prototype,"__",void 0),_([Rt(0)],_i.prototype,"innerRadius",void 0),_([Rt(0)],_i.prototype,"startAngle",void 0),_([Rt(0)],_i.prototype,"endAngle",void 0),_i=_([xt()],_i);const{moveTo:G_,lineTo:U_,drawPoints:Xa}=ti,{rotate:V_,getAngle:q_,getDistance:K_,defaultPoint:Ha}=$,{toBounds:Q_}=yo;let ne=class extends m{get __tag(){return"Line"}get toPoint(){const{width:t,rotation:i}=this.__,s=Wd();return t&&(s.x=t),i&&V_(s,i),s}set toPoint(t){this.width=K_(Ha,t),this.rotation=q_(Ha,t),this.height&&(this.height=0)}constructor(t){super(t)}__updatePath(){const t=this.__,i=t.path=[];t.points?Xa(i,t.points,!1,t.closed):(G_(i,0,0),U_(i,this.width,0))}__updateRenderPath(){const t=this.__;!this.pathInputed&&t.points&&t.curve?(Xa(t.__pathForRender=[],t.points,t.curve,t.closed),t.__useArrow&&Wl.addArrows(this,!1)):super.__updateRenderPath()}__updateBoxBounds(){this.points?Q_(this.__.__pathForRender,this.__layout.boxBounds):super.__updateBoxBounds()}};_([vt(E_)],ne.prototype,"__",void 0),_([Br("center")],ne.prototype,"strokeAlign",void 0),_([D(0)],ne.prototype,"height",void 0),_([Rt()],ne.prototype,"points",void 0),_([Rt(0)],ne.prototype,"curve",void 0),_([Rt(!1)],ne.prototype,"closed",void 0),ne=_([xt()],ne);const{sin:J_,cos:Z_,PI:Ga}=Math,{moveTo:tf,lineTo:ef,closePath:sf,drawPoints:rf}=ti,Ua=ne.prototype;let ye=class extends m{get __tag(){return"Polygon"}constructor(t){super(t)}__updatePath(){const t=this.__.path=[];if(this.__.points)rf(t,this.__.points,!1,!0);else{const{width:i,height:s,sides:r}=this.__,n=i/2,o=s/2;tf(t,n,0);for(let a=1;a<r;a++)ef(t,n+n*J_(2*a*Ga/r),o-o*Z_(2*a*Ga/r))}sf(t)}__updateRenderPath(){}__updateBoxBounds(){}};_([vt(P_)],ye.prototype,"__",void 0),_([Rt(3)],ye.prototype,"sides",void 0),_([Rt()],ye.prototype,"points",void 0),_([Rt(0)],ye.prototype,"curve",void 0),_([Kt(Ua.__updateRenderPath)],ye.prototype,"__updateRenderPath",null),_([Kt(Ua.__updateBoxBounds)],ye.prototype,"__updateBoxBounds",null),ye=_([kr(),xt()],ye);const{sin:nf,cos:of,PI:Va}=Math,{moveTo:af,lineTo:hf,closePath:lf}=ti;let Ni=class extends m{get __tag(){return"Star"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,corners:s,innerRadius:r}=this.__,n=t/2,o=i/2,a=this.__.path=[];af(a,n,0);for(let h=1;h<2*s;h++)hf(a,n+(h%2==0?n:n*r)*nf(h*Va/s),o-(h%2==0?o:o*r)*of(h*Va/s));lf(a)}};_([vt(A_)],Ni.prototype,"__",void 0),_([Rt(5)],Ni.prototype,"corners",void 0),_([Rt(.382)],Ni.prototype,"innerRadius",void 0),Ni=_([xt()],Ni);let $s=class extends qe{get __tag(){return"Image"}get ready(){return!!this.image&&this.image.ready}constructor(t){super(t),this.on_(le.LOADED,this.__onLoaded,this)}__onLoaded(t){t.attrName==="fill"&&t.attrValue.url===this.url&&(this.image=t.image)}destroy(){this.image=null,super.destroy()}};_([vt(M_)],$s.prototype,"__",void 0),_([D("")],$s.prototype,"url",void 0),$s=_([xt()],$s);let _e=class extends qe{get __tag(){return"Canvas"}get ready(){return!this.url}constructor(t){super(t),this.canvas=ct.canvas(this.__),this.context=this.canvas.context,t&&t.url&&this.drawImage(t.url)}drawImage(t){new Ol({url:t}).load(i=>{this.context.drawImage(i.view,0,0),this.url=void 0,this.paint(),this.emitEvent(new le(le.LOADED,{image:i}))})}draw(t,i,s,r){const n=new hs(t.worldTransform).invert(),o=new hs;i&&o.translate(i.x,i.y),s&&(typeof s=="number"?o.scale(s):o.scale(s.x,s.y)),r&&o.rotate(r),n.multiplyParent(o),t.__render(this.canvas,{matrix:n.withScale()}),this.paint()}paint(){this.forceRender()}__drawContent(t,i){const{width:s,height:r}=this.__,{view:n}=this.canvas;t.drawImage(n,0,0,n.width,n.height,0,0,s,r)}__updateSize(){const{canvas:t}=this;if(t){const{smooth:i,safeResize:s}=this.__;t.resize(this.__,s),t.smooth!==i&&(t.smooth=i)}}destroy(){this.canvas&&(this.canvas.destroy(),this.canvas=this.context=null),super.destroy()}};_([vt(F_)],_e.prototype,"__",void 0),_([Wi(100)],_e.prototype,"width",void 0),_([Wi(100)],_e.prototype,"height",void 0),_([Wi(1)],_e.prototype,"pixelRatio",void 0),_([Wi(!0)],_e.prototype,"smooth",void 0),_([kt(!1)],_e.prototype,"safeResize",void 0),_([Wi()],_e.prototype,"contextSettings",void 0),_e=_([xt()],_e);const{copyAndSpread:df,includes:cf,spread:uf,setList:pf}=T;let j=class extends m{get __tag(){return"Text"}get textDrawData(){return this.updateLayout(),this.__.__textDrawData}constructor(t){super(t)}__updateTextDrawData(){const t=this.__,{lineHeight:i,letterSpacing:s,fontFamily:r,fontSize:n,fontWeight:o,italic:a,textCase:h,textOverflow:l,padding:c}=t;t.__lineHeight=Jn.number(i,n),t.__letterSpacing=Jn.number(s,n),t.__padding=c?yt.fourNumber(c):void 0,t.__baseLine=t.__lineHeight-(t.__lineHeight-.7*n)/2,t.__font=`${a?"italic ":""}${h==="small-caps"?"small-caps ":""}${o!=="normal"?o+" ":""}${n}px ${r}`,t.__clipText=l!=="show"&&!t.__autoSize,t.__textDrawData=Il.getDrawData((t.__isPlacehold=t.placeholder&&t.text==="")?t.placeholder:t.text,this.__)}__updateBoxBounds(){const t=this.__,i=this.__layout,{fontSize:s,italic:r,padding:n,__autoWidth:o,__autoHeight:a}=t;this.__updateTextDrawData();const{bounds:h}=t.__textDrawData,l=i.boxBounds;if(i.contentBounds=h,t.__lineHeight<s&&uf(h,s/2),o||a){if(l.x=o?h.x:0,l.y=a?h.y:0,l.width=o?h.width:t.width,l.height=a?h.height:t.height,n){const[d,p,u,f]=t.__padding;o&&(l.x-=f,l.width+=p+f),a&&(l.y-=d,l.height+=u+d)}this.__updateNaturalSize()}else super.__updateBoxBounds();r&&(l.width+=.16*s);const c=!cf(l,h)||void 0;c?(pf(t.__textBoxBounds={},[l,h]),i.renderChanged=!0):t.__textBoxBounds=l,this.isOverflow!==c&&(this.isOverflow=c)}__onUpdateSize(){this.__box&&this.__box.__onUpdateSize(),super.__onUpdateSize()}__updateRenderSpread(){let t=super.__updateRenderSpread();return t||(t=this.isOverflow?1:0),t}__updateRenderBounds(){const{renderBounds:t,renderSpread:i}=this.__layout;df(t,this.__.__textBoxBounds,i),this.__box&&(this.__box.__layout.renderBounds=t)}__drawRenderPath(t){t.font=this.__.__font}__draw(t,i,s){const r=this.__box;r&&(r.__nowWorld=this.__nowWorld,r.__draw(t,i,s)),this.textEditing&&!is.running||super.__draw(t,i,s)}destroy(){this.boxStyle&&(this.boxStyle=null),super.destroy()}};_([vt($_)],j.prototype,"__",void 0),_([D(0)],j.prototype,"width",void 0),_([D(0)],j.prototype,"height",void 0),_([me()],j.prototype,"boxStyle",void 0),_([kt(!1)],j.prototype,"resizeFontSize",void 0),_([me("#000000")],j.prototype,"fill",void 0),_([Br("outside")],j.prototype,"strokeAlign",void 0),_([Ge("all")],j.prototype,"hitFill",void 0),_([D("")],j.prototype,"text",void 0),_([D("")],j.prototype,"placeholder",void 0),_([D("caption")],j.prototype,"fontFamily",void 0),_([D(12)],j.prototype,"fontSize",void 0),_([D("normal")],j.prototype,"fontWeight",void 0),_([D(!1)],j.prototype,"italic",void 0),_([D("none")],j.prototype,"textCase",void 0),_([D("none")],j.prototype,"textDecoration",void 0),_([D(0)],j.prototype,"letterSpacing",void 0),_([D({type:"percent",value:1.5})],j.prototype,"lineHeight",void 0),_([D(0)],j.prototype,"paraIndent",void 0),_([D(0)],j.prototype,"paraSpacing",void 0),_([D("x")],j.prototype,"writingMode",void 0),_([D("left")],j.prototype,"textAlign",void 0),_([D("top")],j.prototype,"verticalAlign",void 0),_([D(!0)],j.prototype,"autoSizeAlign",void 0),_([D("normal")],j.prototype,"textWrap",void 0),_([D("show")],j.prototype,"textOverflow",void 0),j=_([xt()],j);let xi=class extends m{get __tag(){return"Path"}constructor(t){super(t)}};_([vt(O_)],xi.prototype,"__",void 0),_([Br("center")],xi.prototype,"strokeAlign",void 0),xi=_([xt()],xi);let Ms=class extends $t{get __tag(){return"Pen"}constructor(t){super(t)}setStyle(t){const i=this.pathElement=new xi(t);return this.pathStyle=t,this.__path=i.path||(i.path=[]),this.add(i),this}beginPath(){return this}moveTo(t,i){return this}lineTo(t,i){return this}bezierCurveTo(t,i,s,r,n,o){return this}quadraticCurveTo(t,i,s,r){return this}closePath(){return this}rect(t,i,s,r){return this}roundRect(t,i,s,r,n){return this}ellipse(t,i,s,r,n,o,a,h){return this}arc(t,i,s,r,n,o){return this}arcTo(t,i,s,r,n){return this}drawEllipse(t,i,s,r,n,o,a,h){return this}drawArc(t,i,s,r,n,o){return this}drawPoints(t,i,s){return this}clearPath(){return this}paint(){this.pathElement.__layout.boxChanged||this.pathElement.forceUpdate("path")}};_([vt(L_)],Ms.prototype,"__",void 0),_([(e,t)=>{ei(e,t,{get(){return this.__path}})}],Ms.prototype,"path",void 0),Ms=_([Dt(go,["set","path","paint"]),xt()],Ms);function Be(e,t,i,s){var r,n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}let qa=class extends Te{get __tag(){return"App"}get isApp(){return!0}constructor(t,i){super(t,i)}init(t,i){if(super.init(t,i),t){const{ground:s,tree:r,sky:n,editor:o}=t;s&&(this.ground=this.addLeafer(s)),(r||o)&&(this.tree=this.addLeafer(r||{type:t.type||"design"})),(n||o)&&(this.sky=this.addLeafer(n)),o&&this.sky.add(this.editor=ct.editor(o))}}__setApp(){const{canvas:t}=this,{realCanvas:i,view:s}=this.config;i||s===this.canvas.view||!t.parentView?this.realCanvas=!0:t.unrealCanvas(),this.leafer=this,this.watcher.disable(),this.layouter.disable()}start(){super.start(),this.forEach(t=>t.start())}stop(){this.forEach(t=>t.stop()),super.stop()}unlockLayout(){super.unlockLayout(),this.forEach(t=>t.unlockLayout())}lockLayout(){super.lockLayout(),this.forEach(t=>t.lockLayout())}forceRender(t,i){this.forEach(s=>s.forceRender(t,i))}addLeafer(t){const i=new Te(t);return this.add(i),i}add(t,i){if(!t.view){if(this.realCanvas&&!this.canvas.bounds)return void setTimeout(()=>this.add(t,i),10);t.init(this.__getChildConfig(t.userConfig),this)}super.add(t,i),i!==void 0&&(t.canvas.childIndex=i),this.__listenChildEvents(t)}forEach(t){this.children.forEach(t)}__onCreated(){this.created=this.children.every(t=>t.created)}__onReady(){this.children.every(t=>t.ready)&&super.__onReady()}__onViewReady(){this.children.every(t=>t.viewReady)&&super.__onViewReady()}__onChildRenderEnd(t){this.renderer.addBlock(t.renderBounds),this.viewReady&&this.renderer.update()}__render(t,i){if(t.context){const s=i.matrix;s&&t.setTransform(s.a,s.b,s.c,s.d,s.e,s.f),this.forEach(r=>t.copyWorld(r.canvas))}}__onResize(t){this.forEach(i=>i.resize(t)),super.__onResize(t)}updateLayout(){this.forEach(t=>t.updateLayout())}__getChildConfig(t){const i=Object.assign({},this.config);return i.hittable=i.realCanvas=void 0,t&&ft.assign(i,t),this.autoLayout&&ft.copyAttrs(i,this,Zt),i.view=this.realCanvas?void 0:this.view,i.fill=void 0,i}__listenChildEvents(t){t.once(tt.END,()=>this.__onReady()),t.once(U.START,()=>this.__onCreated()),t.once(U.END,()=>this.__onViewReady()),this.realCanvas&&this.__eventIds.push(t.on_(U.END,this.__onChildRenderEnd,this))}};qa=Be([xt()],qa);const Fs={},ss={isHoldSpaceKey:()=>ss.isHold("Space"),isHold:e=>Fs[e],setDownCode(e){Fs[e]||(Fs[e]=!0)},setUpCode(e){Fs[e]=!1}},Qt={LEFT:1,RIGHT:2,MIDDLE:4,defaultLeft(e){e.buttons||(e.buttons=1)},left:e=>e.buttons===1,right:e=>e.buttons===2,middle:e=>e.buttons===4};let Rr=class extends xe{get spaceKey(){return ss.isHoldSpaceKey()}get left(){return Qt.left(this)}get right(){return Qt.right(this)}get middle(){return Qt.middle(this)}constructor(t){super(t.type),this.bubbles=!0,Object.assign(this,t)}getBoxPoint(t){return(t||this.current).getBoxPoint(this)}getInnerPoint(t){return(t||this.current).getInnerPoint(this)}getLocalPoint(t){return(t||this.current).getLocalPoint(this)}getPagePoint(){return this.current.getPagePoint(this)}getInner(t){return this.getInnerPoint(t)}getLocal(t){return this.getLocalPoint(t)}getPage(){return this.getPagePoint()}static changeName(t,i){Ri.changeName(t,i)}},R=class extends Rr{};R.POINTER="pointer",R.BEFORE_DOWN="pointer.before_down",R.BEFORE_MOVE="pointer.before_move",R.BEFORE_UP="pointer.before_up",R.DOWN="pointer.down",R.MOVE="pointer.move",R.UP="pointer.up",R.OVER="pointer.over",R.OUT="pointer.out",R.ENTER="pointer.enter",R.LEAVE="pointer.leave",R.TAP="tap",R.DOUBLE_TAP="double_tap",R.CLICK="click",R.DOUBLE_CLICK="double_click",R.LONG_PRESS="long_press",R.LONG_TAP="long_tap",R.MENU="pointer.menu",R.MENU_TAP="pointer.menu_tap",R=Be([Le()],R);const ji={};let X=class extends R{static setList(t){this.list=t instanceof ht?t:new ht(t)}static setData(t){this.data=t}static getValidMove(t,i,s){const{draggable:r,dragBounds:n}=t,o=t.getLocalPoint(s,null,!0);return $.move(o,i.x-t.x,i.y-t.y),n&&this.getMoveInDragBounds(t.__localBoxBounds,n==="parent"?t.parent.boxBounds:n,o,!0),r==="x"&&(o.y=0),r==="y"&&(o.x=0),o}static getMoveInDragBounds(t,i,s,r){const n=t.x+s.x,o=t.y+s.y,a=n+t.width,h=o+t.height,l=i.x+i.width,c=i.y+i.height;return r||(s=Object.assign({},s)),T.includes(t,i)?(n>i.x?s.x+=i.x-n:a<l&&(s.x+=l-a),o>i.y?s.y+=i.y-o:h<c&&(s.y+=c-h)):(n<i.x?s.x+=i.x-n:a>l&&(s.x+=l-a),o<i.y?s.y+=i.y-o:h>c&&(s.y+=c-h)),s}getPageMove(t){return this.assignMove(t),this.current.getPagePoint(ji,null,!0)}getInnerMove(t,i){return t||(t=this.current),this.assignMove(i),t.getInnerPoint(ji,null,!0)}getLocalMove(t,i){return t||(t=this.current),this.assignMove(i),t.getLocalPoint(ji,null,!0)}getPageTotal(){return this.getPageMove(!0)}getInnerTotal(t){return this.getInnerMove(t,!0)}getLocalTotal(t){return this.getLocalMove(t,!0)}getPageBounds(){const t=this.getPageTotal(),i=this.getPagePoint(),s={};return T.set(s,i.x-t.x,i.y-t.y,t.x,t.y),T.unsign(s),s}assignMove(t){ji.x=t?this.totalX:this.moveX,ji.y=t?this.totalY:this.moveY}};X.BEFORE_DRAG="drag.before_drag",X.START="drag.start",X.DRAG="drag",X.END="drag.end",X.OVER="drag.over",X.OUT="drag.out",X.ENTER="drag.enter",X.LEAVE="drag.leave",X=Be([Le()],X);let rs=class extends R{static setList(t){X.setList(t)}static setData(t){X.setData(t)}};rs.DROP="drop",rs=Be([Le()],rs);let he=class extends X{};he.BEFORE_MOVE="move.before_move",he.START="move.start",he.MOVE="move",he.END="move.end",he=Be([Le()],he);let fi=class extends Rr{};fi.BEFORE_ROTATE="rotate.before_rotate",fi.START="rotate.start",fi.ROTATE="rotate",fi.END="rotate.end",fi=Be([Le()],fi);let Jt=class extends X{};Jt.SWIPE="swipe",Jt.LEFT="swipe.left",Jt.RIGHT="swipe.right",Jt.UP="swipe.up",Jt.DOWN="swipe.down",Jt=Be([Le()],Jt);let gi=class extends Rr{};gi.BEFORE_ZOOM="zoom.before_zoom",gi.START="zoom.start",gi.ZOOM="zoom",gi.END="zoom.end",gi=Be([Le()],gi);let Pe=class extends Rr{};Pe.DOWN="key.down",Pe.HOLD="key.hold",Pe.UP="key.up",Pe=Be([Le()],Pe);const ee={getDragEventData:(e,t,i)=>Object.assign(Object.assign({},i),{x:i.x,y:i.y,moveX:i.x-t.x,moveY:i.y-t.y,totalX:i.x-e.x,totalY:i.y-e.y}),getDropEventData:(e,t,i)=>Object.assign(Object.assign({},e),{list:t,data:i}),getSwipeDirection:e=>e<-45&&e>-135?Jt.UP:e>45&&e<135?Jt.DOWN:e<=45&&e>=-45?Jt.RIGHT:Jt.LEFT,getSwipeEventData:(e,t,i)=>Object.assign(Object.assign({},i),{moveX:t.moveX,moveY:t.moveY,totalX:i.x-e.x,totalY:i.y-e.y,type:_f.getSwipeDirection($.getAngle(e,i))}),getBase(e){const t=e.button===1?4:e.button;return{altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,buttons:e.buttons===void 0?1:e.buttons===0?t:e.buttons,origin:e}},pathHasEventType(e,t){const{list:i}=e;for(let s=0,r=i.length;s<r;s++)if(i[s].hasEvent(t))return!0;return!1},filterPathByEventType(e,t){const i=new ht,{list:s}=e;for(let r=0,n=s.length;r<n;r++)s[r].hasEvent(t)&&i.add(s[r]);return i},pathCanDrag:e=>e&&e.list.some(t=>t.draggable||t.editable||!t.isLeafer&&t.hasEvent(X.DRAG)),pathHasOutside:e=>e&&e.list.some(t=>t.isOutside)},_f=ee,Ka=new ht,{getDragEventData:un,getDropEventData:ff,getSwipeEventData:gf}=ee;let yf=class{constructor(t){this.interaction=t}setDragData(t){this.animateWait&&this.dragEndReal(),this.downData=this.interaction.downData,this.dragData=un(t,t,t),this.canAnimate=this.canDragOut=!0}getList(t,i){const{proxy:s}=this.interaction.selector,r=s&&s.list.length,n=X.list||this.draggableList||Ka;return this.dragging&&(r?t?Ka:new ht(i?[...s.list,...s.dragHoverExclude]:s.list):n)}checkDrag(t,i){const{interaction:s}=this;if(this.moving&&t.buttons<1)return this.canAnimate=!1,void s.pointerCancel();!this.moving&&i&&(this.moving=s.canMove(this.downData)||s.isHoldRightKey||s.isMobileDragEmpty)&&(this.dragData.moveType="drag",s.emit(he.START,this.dragData)),this.moving||this.dragStart(t,i),this.drag(t)}dragStart(t,i){this.dragging||(this.dragging=i&&Qt.left(t),this.dragging&&(this.interaction.emit(X.START,this.dragData),this.getDraggableList(this.dragData.path),this.setDragStartPoints(this.realDraggableList=this.getList(!0))))}setDragStartPoints(t){this.dragStartPoints={},t.forEach(i=>this.dragStartPoints[i.innerId]={x:i.x,y:i.y})}getDraggableList(t){let i;for(let s=0,r=t.length;s<r;s++)if(i=t.list[s],(i.draggable||i.editable)&&i.hitSelf&&!i.locked){this.draggableList=new ht(i);break}}drag(t){const{interaction:i,dragData:s,downData:r}=this,{path:n,throughPath:o}=r;this.dragData=un(r,s,t),o&&(this.dragData.throughPath=o),this.dragData.path=n,this.moving?(this.dragData.moveType="drag",i.emit(he.BEFORE_MOVE,this.dragData),i.emit(he.MOVE,this.dragData)):this.dragging&&(this.dragReal(),i.emit(X.BEFORE_DRAG,this.dragData),i.emit(X.DRAG,this.dragData))}dragReal(){const{running:t}=this.interaction,i=this.realDraggableList;if(i.length&&t){const{totalX:s,totalY:r}=this.dragData;i.forEach(n=>n.draggable&&n.move(X.getValidMove(n,this.dragStartPoints[n.innerId],{x:s,y:r})))}}dragOverOrOut(t){const{interaction:i}=this,{dragOverPath:s}=this,{path:r}=t;this.dragOverPath=r,s?r.indexAt(0)!==s.indexAt(0)&&(i.emit(X.OUT,t,s),i.emit(X.OVER,t,r)):i.emit(X.OVER,t,r)}dragEnterOrLeave(t){const{interaction:i}=this,{dragEnterPath:s}=this,{path:r}=t;i.emit(X.LEAVE,t,s,r),i.emit(X.ENTER,t,r,s),this.dragEnterPath=r}dragEnd(t,i){(this.dragging||this.moving)&&(this.checkDragEndAnimate(t,i)||this.dragEndReal(t))}dragEndReal(t){const{interaction:i,downData:s,dragData:r}=this;t||(t=r);const{path:n,throughPath:o}=s,a=un(s,t,t);if(o&&(a.throughPath=o),a.path=n,this.moving&&(this.moving=!1,a.moveType="drag",i.emit(he.END,a)),this.dragging){const h=this.getList();this.dragging=!1,i.emit(X.END,a),this.swipe(t,s,r,a),this.drop(t,h,this.dragEnterPath)}this.autoMoveCancel(),this.dragReset(),this.animate(null,"off")}swipe(t,i,s,r){const{interaction:n}=this;if($.getDistance(i,t)>n.config.pointer.swipeDistance){const o=gf(i,s,r);this.interaction.emit(o.type,o)}}drop(t,i,s){const r=ff(t,i,X.data);r.path=s,this.interaction.emit(rs.DROP,r),this.interaction.emit(X.LEAVE,t,s)}dragReset(){X.list=X.data=this.draggableList=this.dragData=this.downData=this.dragOverPath=this.dragEnterPath=null}checkDragEndAnimate(t,i){return!1}animate(t,i){}checkDragOut(t){}autoMoveOnDragOut(t){}autoMoveCancel(){}destroy(){this.dragReset()}};const mf=Q.get("emit"),wf=["move","zoom","rotate","key"];function Qa(e,t,i,s,r){if(wf.some(n=>t.startsWith(n))&&e.__.hitChildren&&!Nl(e,r)){let n;for(let o=0,a=e.children.length;o<a;o++)n=e.children[o],!i.path.has(n)&&n.__.hittable&&eo(n,t,i,s,r)}}function eo(e,t,i,s,r){if(e.destroyed)return!1;if(e.__.hitSelf&&!Nl(e,r)&&(I.updateEventStyle&&!s&&I.updateEventStyle(e,t),e.hasEvent(t,s))){i.phase=s?1:e===i.target?2:3;const n=Ri.get(t,i);if(e.emitEvent(n,s),n.isStop)return!0}return!1}function Nl(e,t){return t&&t.has(e)}const vf={wheel:{zoomSpeed:.5,moveSpeed:.5,rotateSpeed:.5,delta:{x:20,y:8}},pointer:{snap:!0,hitRadius:5,tapTime:120,longPressTime:800,transformTime:500,hover:!0,dragHover:!0,dragDistance:2,swipeDistance:20},touch:{preventDefault:"auto"},multiTouch:{},move:{autoDistance:2},zoom:{},cursor:!0,keyEvent:!0},{pathHasEventType:pn,pathCanDrag:xf,pathHasOutside:Ja}=ee;let bf=class{get dragging(){return this.dragger.dragging}get transforming(){return this.transformer.transforming}get moveMode(){return this.m.drag===!0||this.isHoldSpaceKey||this.isHoldMiddleKey||this.isHoldRightKey&&this.dragger.moving||this.isDragEmpty}get canHover(){return this.p.hover&&!this.config.mobile}get isDragEmpty(){return this.m.dragEmpty&&this.isRootPath(this.hoverData)&&(!this.downData||this.isRootPath(this.downData))}get isMobileDragEmpty(){return this.m.dragEmpty&&!this.canHover&&this.downData&&this.isTreePath(this.downData)}get isHoldMiddleKey(){return this.m.holdMiddleKey&&this.downData&&Qt.middle(this.downData)}get isHoldRightKey(){return this.m.holdRightKey&&this.downData&&Qt.right(this.downData)}get isHoldSpaceKey(){return this.m.holdSpaceKey&&ss.isHoldSpaceKey()}get m(){return this.config.move}get p(){return this.config.pointer}get hitRadius(){return this.p.hitRadius}constructor(t,i,s,r){this.config=ft.clone(vf),this.tapCount=0,this.downKeyMap={},this.target=t,this.canvas=i,this.selector=s,this.defaultPath=new ht(t),this.createTransformer(),this.dragger=new yf(this),r&&(this.config=ft.default(r,this.config)),this.__listenEvents()}start(){this.running=!0}stop(){this.running=!1}receive(t){}pointerDown(t,i){t||(t=this.hoverData),t&&(Qt.defaultLeft(t),this.updateDownData(t),this.checkPath(t,i),this.downTime=Date.now(),this.emit(R.BEFORE_DOWN,t),this.emit(R.DOWN,t),Qt.left(t)&&(this.tapWait(),this.longPressWait(t)),this.waitRightTap=Qt.right(t),this.dragger.setDragData(t),this.isHoldRightKey||this.updateCursor(t))}pointerMove(t){if(t||(t=this.hoverData),!t)return;const{downData:i}=this;i&&Qt.defaultLeft(t),(this.canvas.bounds.hitPoint(t)||i)&&(this.pointerMoveReal(t),i&&this.dragger.checkDragOut(t))}pointerMoveReal(t){if(this.emit(R.BEFORE_MOVE,t,this.defaultPath),this.downData){const i=$.getDistance(this.downData,t)>this.p.dragDistance;i&&(this.pointerWaitCancel(),this.waitRightTap=!1),this.dragger.checkDrag(t,i)}this.dragger.moving||(this.updateHoverData(t),this.checkPath(t),this.emit(R.MOVE,t),this.pointerHover(t),this.dragging&&(this.dragger.dragOverOrOut(t),this.dragger.dragEnterOrLeave(t))),this.updateCursor(this.downData||t)}pointerUp(t){const{downData:i}=this;if(t||(t=i),!i)return;Qt.defaultLeft(t),t.multiTouch=i.multiTouch,this.findPath(t);const s=Object.assign(Object.assign({},t),{path:t.path.clone()});t.path.addList(i.path.list),this.checkPath(t),this.downData=null,this.emit(R.BEFORE_UP,t),this.emit(R.UP,t),this.touchLeave(t),t.isCancel||(this.tap(t),this.menuTap(t)),this.dragger.dragEnd(t),this.updateCursor(s)}pointerCancel(){const t=Object.assign({},this.dragger.dragData);t.isCancel=!0,this.pointerUp(t)}menu(t){this.findPath(t),this.emit(R.MENU,t),this.waitMenuTap=!0,!this.downData&&this.waitRightTap&&this.menuTap(t)}menuTap(t){this.waitRightTap&&this.waitMenuTap&&(this.emit(R.MENU_TAP,t),this.waitRightTap=this.waitMenuTap=!1)}createTransformer(){}move(t){}zoom(t){}rotate(t){}transformEnd(){}wheel(t){}multiTouch(t,i){}keyDown(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]||(this.downKeyMap[i]=!0,ss.setDownCode(i),this.emit(Pe.HOLD,t,this.defaultPath),this.moveMode&&(this.cancelHover(),this.updateCursor())),this.emit(Pe.DOWN,t,this.defaultPath)}keyUp(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]=!1,ss.setUpCode(i),this.emit(Pe.UP,t,this.defaultPath),this.cursor==="grab"&&this.updateCursor()}pointerHover(t){!this.canHover||this.dragging&&!this.p.dragHover||(t.path||(t.path=new ht),this.pointerOverOrOut(t),this.pointerEnterOrLeave(t))}pointerOverOrOut(t){const{path:i}=t,{overPath:s}=this;this.overPath=i,s?i.indexAt(0)!==s.indexAt(0)&&(this.emit(R.OUT,t,s),this.emit(R.OVER,t,i)):this.emit(R.OVER,t,i)}pointerEnterOrLeave(t){let{path:i}=t;this.downData&&!this.moveMode&&(i=i.clone(),this.downData.path.forEach(r=>i.add(r)));const{enterPath:s}=this;this.enterPath=i,this.emit(R.LEAVE,t,s,i),this.emit(R.ENTER,t,i,s)}touchLeave(t){t.pointerType==="touch"&&this.enterPath&&(this.emit(R.LEAVE,t),this.dragger.dragging&&this.emit(rs.LEAVE,t))}tap(t){const{pointer:i}=this.config,s=this.longTap(t);if(!i.tapMore&&s||!this.waitTap)return;i.tapMore&&this.emitTap(t);const r=Date.now()-this.downTime,n=[R.DOUBLE_TAP,R.DOUBLE_CLICK].some(o=>pn(t.path,o));r<i.tapTime+50&&n?(this.tapCount++,this.tapCount===2?(this.tapWaitCancel(),this.emitDoubleTap(t)):(clearTimeout(this.tapTimer),this.tapTimer=setTimeout(()=>{i.tapMore||(this.tapWaitCancel(),this.emitTap(t))},i.tapTime))):i.tapMore||(this.tapWaitCancel(),this.emitTap(t))}findPath(t,i){const{hitRadius:s,through:r}=this.p,{bottomList:n,target:o}=this;E.backgrounder||t.origin||o&&o.updateLayout();const a=this.selector.getByPoint(t,s,Object.assign({bottomList:n,name:t.type},i||{through:r}));return a.throughPath&&(t.throughPath=a.throughPath),t.path=a.path,a.path}isRootPath(t){return t&&t.path.list[0].isLeafer}isTreePath(t){const i=this.target.app;return!(!i||!i.isApp)&&i.editor&&!t.path.has(i.editor)&&t.path.has(i.tree)&&!t.target.syncEventer}checkPath(t,i){(i||this.moveMode&&!Ja(t.path))&&(t.path=this.defaultPath)}canMove(t){return t&&(this.moveMode||this.m.drag==="auto"&&!xf(t.path))&&!Ja(t.path)}isDrag(t){return this.dragger.getList().has(t)}isPress(t){return this.downData&&this.downData.path.has(t)}isHover(t){return this.enterPath&&this.enterPath.has(t)}isFocus(t){return this.focusData===t}cancelHover(){const{hoverData:t}=this;t&&(t.path=this.defaultPath,this.pointerHover(t))}updateDownData(t,i,s){const{downData:r}=this;!t&&r&&(t=r),t&&(this.findPath(t,i),s&&r&&t.path.addList(r.path.list),this.downData=t)}updateHoverData(t){t||(t=this.hoverData),t&&(this.findPath(t,{exclude:this.dragger.getList(!1,!0),name:R.MOVE}),this.hoverData=t)}updateCursor(t){if(!this.config.cursor||!this.canHover)return;if(t||(this.updateHoverData(),t=this.downData||this.hoverData),this.dragger.moving)return this.setCursor("grabbing");if(this.canMove(t))return this.setCursor(this.downData?"grabbing":"grab");if(!t)return;let i,s;const{path:r}=t;for(let n=0,o=r.length;n<o&&(i=r.list[n],s=i.syncEventer&&i.syncEventer.cursor||i.cursor,!s);n++);this.setCursor(s)}setCursor(t){this.cursor=t}getLocal(t,i){const s=this.canvas.getClientBounds(i),r={x:t.clientX-s.x,y:t.clientY-s.y};return this.p.snap&&$.round(r),r}emitTap(t){this.emit(R.TAP,t),this.emit(R.CLICK,t)}emitDoubleTap(t){this.emit(R.DOUBLE_TAP,t),this.emit(R.DOUBLE_CLICK,t)}pointerWaitCancel(){this.tapWaitCancel(),this.longPressWaitCancel()}tapWait(){clearTimeout(this.tapTimer),this.waitTap=!0}tapWaitCancel(){this.waitTap&&(clearTimeout(this.tapTimer),this.waitTap=!1,this.tapCount=0)}longPressWait(t){clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(()=>{this.longPressed=!0,this.emit(R.LONG_PRESS,t)},this.p.longPressTime)}longTap(t){let i;return this.longPressed&&(this.emit(R.LONG_TAP,t),(pn(t.path,R.LONG_TAP)||pn(t.path,R.LONG_PRESS))&&(i=!0)),this.longPressWaitCancel(),i}longPressWaitCancel(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressed=!1)}__onResize(){const{dragOut:t}=this.m;this.shrinkCanvasBounds=new wt(this.canvas.bounds),this.shrinkCanvasBounds.spread(-(typeof t=="number"?t:2))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(De.RESIZE,this.__onResize,this)],t.once(dt.READY,()=>this.__onResize())}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}emit(t,i,s,r){this.running&&function(n,o,a,h){if(!a&&!o.path)return;let l;o.type=n,a?o=Object.assign(Object.assign({},o),{path:a}):a=o.path,o.target=a.indexAt(0);try{for(let c=a.length-1;c>-1;c--){if(l=a.list[c],eo(l,n,o,!0,h))return;l.isApp&&Qa(l,n,o,!0,h)}for(let c=0,d=a.length;c<d;c++)if(l=a.list[c],l.isApp&&Qa(l,n,o,!1,h),eo(l,n,o,!1,h))return}catch(c){mf.error(c)}}(t,i,s,r)}destroy(){this.__eventIds.length&&(this.stop(),this.__removeListenEvents(),this.dragger.destroy(),this.transformer&&this.transformer.destroy(),this.downData=this.overPath=this.enterPath=null)}},jl=class{static set(t,i){this.custom[t]=i}static get(t){return this.custom[t]}};jl.custom={};let Bf=class extends xl{constructor(){super(...arguments),this.maxTotal=1e3,this.pathList=new ht,this.pixelList=new ht}getPixelType(t,i){return this.__autoClear(),this.pixelList.add(t),ct.hitCanvas(i)}getPathType(t){return this.__autoClear(),this.pathList.add(t),ct.hitCanvas()}clearImageType(){this.__clearLeafList(this.pixelList)}clearPathType(){this.__clearLeafList(this.pathList)}__clearLeafList(t){t.length&&(t.forEach(i=>{i.__hitCanvas&&(i.__hitCanvas.destroy(),i.__hitCanvas=null)}),t.reset())}__autoClear(){this.pathList.length+this.pixelList.length>this.maxTotal&&this.clear()}clear(){this.clearPathType(),this.clearImageType()}};const{toInnerRadiusPointOf:kf,copy:Sf,setRadius:Cf}=$,Yi={},Xi=Qe.prototype;Xi.__hitWorld=function(e){const t=this.__;if(!t.hitSelf)return!1;const i=this.__world,s=this.__layout,r=i.width<10&&i.height<10;if(t.hitRadius&&(Sf(Yi,e),Cf(e=Yi,t.hitRadius)),kf(e,i,Yi),t.hitBox||r){if(T.hitRadiusPoint(s.boxBounds,Yi))return!0;if(r)return!1}return!s.hitCanvasChanged&&this.__hitCanvas||(this.__updateHitCanvas(),s.boundsChanged||(s.hitCanvasChanged=!1)),this.__hit(Yi)},Xi.__hitFill=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitFill(e,this.__.windingRule)},Xi.__hitStroke=function(e,t){var i;return(i=this.__hitCanvas)===null||i===void 0?void 0:i.hitStroke(e,t)},Xi.__hitPixel=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitPixel(e,this.__layout.renderBounds,this.__hitCanvas.hitScale)},Xi.__drawHitPath=function(e){e&&this.__drawRenderPath(e)};const Rf=new hs,Za=m.prototype;Za.__updateHitCanvas=function(){this.__box&&this.__box.__updateHitCanvas();const e=this.__,{hitCanvasManager:t}=this.leafer||this.parent.leafer,i=(e.__pixelFill||e.__isCanvas)&&e.hitFill==="pixel",s=e.__pixelStroke&&e.hitStroke==="pixel",r=i||s;this.__hitCanvas||(this.__hitCanvas=r?t.getPixelType(this,{contextSettings:{willReadFrequently:!0}}):t.getPathType(this));const n=this.__hitCanvas;if(r){const{renderBounds:o}=this.__layout,a=E.image.hitCanvasSize,h=n.hitScale=F.set(0,0,a,a).getFitMatrix(o).a,{x:l,y:c,width:d,height:p}=F.set(o).scale(h);n.resize({width:d,height:p,pixelRatio:1}),n.clear(),Ht.patternLocked=!0,this.__renderShape(n,{matrix:Rf.setWith(this.__world).scaleWith(1/h).invertWith().translate(-l,-c)},!i,!s),Ht.patternLocked=!1,n.resetTransform(),e.__isHitPixel=!0}else e.__isHitPixel&&(e.__isHitPixel=!1);this.__drawHitPath(n),n.setStrokeOptions(e)},Za.__hit=function(e){if(this.__box&&this.__box.__hit(e))return!0;const t=this.__;if(t.__isHitPixel&&this.__hitPixel(e))return!0;const{hitFill:i}=t,s=(t.fill||t.__isCanvas)&&(i==="path"||i==="pixel"&&!(t.__pixelFill||t.__isCanvas))||i==="all";if(s&&this.__hitFill(e))return!0;const{hitStroke:r,__strokeWidth:n}=t,o=t.stroke&&(r==="path"||r==="pixel"&&!t.__pixelStroke)||r==="all";if(!s&&!o)return!1;const a=2*e.radiusX;let h=a;if(o)switch(t.strokeAlign){case"inside":if(h+=2*n,!s&&this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a;break;case"center":h+=n;break;case"outside":if(h+=2*n,!s){if(!this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a}}return!!h&&this.__hitStroke(e,h)};const th=m.prototype,eh=qe.prototype,ih=at.prototype;eh.__updateHitCanvas=ih.__updateHitCanvas=function(){this.stroke||this.cornerRadius||(this.fill||this.__.__isCanvas)&&this.hitFill==="pixel"||this.hitStroke==="all"?th.__updateHitCanvas.call(this):this.__hitCanvas&&(this.__hitCanvas=null)},eh.__hitFill=ih.__hitFill=function(e){return this.__hitCanvas?th.__hitFill.call(this,e):T.hitRadiusPoint(this.__layout.boxBounds,e)},j.prototype.__drawHitPath=function(e){const{__lineHeight:t,fontSize:i,__baseLine:s,__letterSpacing:r,__textDrawData:n}=this.__;e.beginPath(),r<0?this.__drawPathByBox(e):n.rows.forEach(o=>e.rect(o.x,o.y-s,o.width,t<i?i:t))},$t.prototype.pick=function(e,t){return t||(t=Jd),this.updateLayout(),function(i){return i.leafer?i.leafer.selector:E.selector||(E.selector=ct.selector())}(this).getByPoint(e,t.hitRadius||0,Object.assign(Object.assign({},t),{target:this}))};const _n=Sl.prototype;_n.hitFill=function(e,t){return t?this.context.isPointInPath(e.x,e.y,t):this.context.isPointInPath(e.x,e.y)},_n.hitStroke=function(e,t){return this.strokeWidth=t,this.context.isPointInStroke(e.x,e.y)},_n.hitPixel=function(e,t,i=1){let{x:s,y:r,radiusX:n,radiusY:o}=e;t&&(s-=t.x,r-=t.y),F.set(s-n,r-o,2*n,2*o).scale(i).ceil();const{data:a}=this.context.getImageData(F.x,F.y,F.width||1,F.height||1);for(let h=0,l=a.length;h<l;h+=4)if(a[h+3]>0)return!0;return a[3]>0};const sh=Q.get("LeaferCanvas");let Yl=class extends Sl{set zIndex(t){const{style:i}=this.view;i.zIndex=t,this.setAbsolute(this.view)}set childIndex(t){const{view:i,parentView:s}=this;if(i&&s){const r=s.children[t];r?(this.setAbsolute(r),s.insertBefore(i,r)):s.appendChild(r)}}init(){const{config:t}=this,i=t.view||t.canvas;i?this.__createViewFrom(i):this.__createView();const{style:s}=this.view;if(s.display||(s.display="block"),this.parentView=this.view.parentElement,this.parentView){const r=this.parentView.style;r.webkitUserSelect=r.userSelect="none"}E.syncDomFont&&!this.parentView&&(s.display="none",document.body.appendChild(this.view)),this.__createContext(),this.autoLayout||this.resize(t)}set backgroundColor(t){this.view.style.backgroundColor=t}get backgroundColor(){return this.view.style.backgroundColor}set hittable(t){this.view.style.pointerEvents=t?"auto":"none"}get hittable(){return this.view.style.pointerEvents!=="none"}__createView(){this.view=document.createElement("canvas")}__createViewFrom(t){let i=typeof t=="string"?document.getElementById(t):t;if(i)if(i instanceof HTMLCanvasElement)this.view=i;else{let s=i;if(i===window||i===document){const n=document.createElement("div"),{style:o}=n;o.position="absolute",o.top=o.bottom=o.left=o.right="0px",document.body.appendChild(n),s=n}this.__createView();const r=this.view;s.hasChildNodes()&&(this.setAbsolute(r),s.style.position||(s.style.position="relative")),s.appendChild(r)}else sh.error(`no id: ${t}`),this.__createView()}setAbsolute(t){const{style:i}=t;i.position="absolute",i.top=i.left="0px"}updateViewSize(){const{width:t,height:i,pixelRatio:s}=this,{style:r}=this.view;r.width=t+"px",r.height=i+"px",this.view.width=Math.ceil(t*s),this.view.height=Math.ceil(i*s)}updateClientBounds(){this.view.parentElement&&(this.clientBounds=this.view.getBoundingClientRect())}startAutoLayout(t,i){if(this.resizeListener=i,t){this.autoBounds=t;try{this.resizeObserver=new ResizeObserver(r=>{this.updateClientBounds();for(const n of r)this.checkAutoBounds(n.contentRect)});const s=this.parentView;s?(this.resizeObserver.observe(s),this.checkAutoBounds(s.getBoundingClientRect())):(this.checkAutoBounds(this.view),sh.warn("no parent"))}catch{this.imitateResizeObserver()}}else window.addEventListener("resize",this.windowListener=()=>{const s=E.devicePixelRatio;if(!this.config.pixelRatio&&this.pixelRatio!==s){const{width:r,height:n}=this;this.emitResize({width:r,height:n,pixelRatio:s})}})}imitateResizeObserver(){this.autoLayout&&(this.parentView&&this.checkAutoBounds(this.parentView.getBoundingClientRect()),E.requestRender(this.imitateResizeObserver.bind(this)))}checkAutoBounds(t){const i=this.view,{x:s,y:r,width:n,height:o}=this.autoBounds.getBoundsFrom(t),a={width:n,height:o,pixelRatio:this.config.pixelRatio?this.pixelRatio:E.devicePixelRatio};if(!this.isSameSize(a)){const{style:h}=i;h.marginLeft=s+"px",h.marginTop=r+"px",this.emitResize(a)}}stopAutoLayout(){this.autoLayout=!1,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeListener=this.resizeObserver=null}emitResize(t){const i={};ft.copyAttrs(i,this,Zt),this.resize(t),this.resizeListener&&this.width!==void 0&&this.resizeListener(new De(t,i))}unrealCanvas(){if(!this.unreal&&this.parentView){const t=this.view;t&&t.remove(),this.view=this.parentView,this.unreal=!0}}destroy(){if(this.view){if(this.stopAutoLayout(),this.windowListener&&(window.removeEventListener("resize",this.windowListener),this.windowListener=null),!this.unreal){const t=this.view;t.parentElement&&t.remove()}super.destroy()}}};ma(CanvasRenderingContext2D.prototype),ma(Path2D.prototype);const{mineType:fn,fileType:Ef}=es;function Tf(e,t){E.origin={createCanvas(i,s){const r=document.createElement("canvas");return r.width=i,r.height=s,r},canvasToDataURL:(i,s,r)=>{const n=fn(s),o=i.toDataURL(n,r);return n==="image/bmp"?o.replace("image/png;","image/bmp;"):o},canvasToBolb:(i,s,r)=>new Promise(n=>i.toBlob(n,fn(s),r)),canvasSaveAs:(i,s,r)=>{const n=i.toDataURL(fn(Ef(s)),r);return E.origin.download(n,s)},download:(i,s)=>new Promise(r=>{let n=document.createElement("a");n.href=i,n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),r()}),loadImage:i=>new Promise((s,r)=>{const n=new E.origin.Image,{crossOrigin:o}=E.image;o&&(n.setAttribute("crossOrigin",o),n.crossOrigin=o),n.onload=()=>{s(n)},n.onerror=a=>{r(a)},n.src=E.image.getRealURL(i)}),Image,PointerEvent,DragEvent},E.event={stopDefault(i){i.preventDefault()},stopNow(i){i.stopImmediatePropagation()},stop(i){i.stopPropagation()}},E.canvas=ct.canvas(),E.conicGradientSupport=!!E.canvas.context.createConicGradient}Object.assign(ct,{canvas:(e,t)=>new Yl(e,t),image:e=>new Ol(e)}),E.name="web",E.isMobile="ontouchstart"in window,E.requestRender=function(e){window.requestAnimationFrame(e)},ei(E,"devicePixelRatio",{get:()=>devicePixelRatio});const{userAgent:Hi}=navigator;Hi.indexOf("Firefox")>-1?(E.conicGradientRotate90=!0,E.intWheelDeltaY=!0,E.syncDomFont=!0):Hi.indexOf("AppleWebKit")>-1&&(E.fullImageShadow=!0),Hi.indexOf("Windows")>-1?(E.os="Windows",E.intWheelDeltaY=!0):Hi.indexOf("Mac")>-1?E.os="Mac":Hi.indexOf("Linux")>-1&&(E.os="Linux");class Pf{get childrenChanged(){return this.hasAdd||this.hasRemove||this.hasVisible}get updatedList(){if(this.hasRemove){const t=new ht;return this.__updatedList.list.forEach(i=>{i.leafer&&t.add(i)}),t}return this.__updatedList}constructor(t,i){this.totalTimes=0,this.config={},this.__updatedList=new ht,this.target=t,i&&(this.config=ft.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}update(){this.changed=!0,this.running&&this.target.emit(U.REQUEST)}__onAttrChange(t){this.__updatedList.add(t.target),this.update()}__onChildEvent(t){t.type===pt.ADD?(this.hasAdd=!0,this.__pushChild(t.child)):(this.hasRemove=!0,this.__updatedList.add(t.parent)),this.update()}__pushChild(t){this.__updatedList.add(t),t.isBranch&&this.__loopChildren(t)}__loopChildren(t){const{children:i}=t;for(let s=0,r=i.length;s<r;s++)this.__pushChild(i[s])}__onRquestData(){this.target.emitEvent(new Ae(Ae.DATA,{updatedList:this.updatedList})),this.__updatedList=new ht,this.totalTimes++,this.changed=!1,this.hasVisible=!1,this.hasRemove=!1,this.hasAdd=!1}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(Ue.CHANGE,this.__onAttrChange,this),t.on_([pt.ADD,pt.REMOVE],this.__onChildEvent,this),t.on_(Ae.REQUEST,this.__onRquestData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=null,this.__updatedList=null)}}const{updateAllMatrix:Af,updateBounds:rh,updateChange:Of}=ve,{pushAllChildBranch:Lf,pushAllParent:nh}=_s,{worldBounds:oh}=Sr;class ah{constructor(t){this.updatedBounds=new wt,this.beforeBounds=new wt,this.afterBounds=new wt,t instanceof Array&&(t=new ht(t)),this.updatedList=t}setBefore(){this.beforeBounds.setListWithFn(this.updatedList.list,oh)}setAfter(){this.afterBounds.setListWithFn(this.updatedList.list,oh),this.updatedBounds.setList([this.beforeBounds,this.afterBounds])}merge(t){this.updatedList.addList(t.updatedList.list),this.beforeBounds.add(t.beforeBounds),this.afterBounds.add(t.afterBounds),this.updatedBounds.add(t.updatedBounds)}destroy(){this.updatedList=null}}const{updateAllMatrix:Df,updateAllChange:$f}=ve,gn=Q.get("Layouter");class pr{constructor(t,i){this.totalTimes=0,this.config={},this.__levelList=new b_,this.target=t,i&&(this.config=ft.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}layout(){if(!this.running)return;const{target:t}=this;this.times=0;try{t.emit(tt.START),this.layoutOnce(),t.emitEvent(new tt(tt.END,this.layoutedBlocks,this.times))}catch(i){gn.error(i)}this.layoutedBlocks=null}layoutAgain(){this.layouting?this.waitAgain=!0:this.layoutOnce()}layoutOnce(){return this.layouting?gn.warn("layouting"):this.times>3?gn.warn("layout max times"):(this.times++,this.totalTimes++,this.layouting=!0,this.target.emit(Ae.REQUEST),this.totalTimes>1?this.partLayout():this.fullLayout(),this.layouting=!1,void(this.waitAgain&&(this.waitAgain=!1,this.layoutOnce())))}partLayout(){var t;if(!(!((t=this.__updatedList)===null||t===void 0)&&t.length))return;const i=te.start("PartLayout"),{target:s,__updatedList:r}=this,{BEFORE:n,LAYOUT:o,AFTER:a}=tt,h=this.getBlocks(r);h.forEach(l=>l.setBefore()),s.emitEvent(new tt(n,h,this.times)),this.extraBlock=null,r.sort(),function(l,c){let d;l.list.forEach(p=>{d=p.__layout,c.without(p)&&!d.proxyZoom&&(d.matrixChanged?(Af(p,!0),c.add(p),p.isBranch&&Lf(p,c),nh(p,c)):d.boundsChanged&&(c.add(p),p.isBranch&&(p.__tempNumber=0),nh(p,c)))})}(r,this.__levelList),function(l){let c,d,p;l.sort(!0),l.levels.forEach(u=>{c=l.levelMap[u];for(let f=0,g=c.length;f<g;f++){if(d=c[f],d.isBranch&&d.__tempNumber){p=d.children;for(let w=0,v=p.length;w<v;w++)p[w].isBranch||rh(p[w])}rh(d)}})}(this.__levelList),function(l){l.list.forEach(Of)}(r),this.extraBlock&&h.push(this.extraBlock),h.forEach(l=>l.setAfter()),s.emitEvent(new tt(o,h,this.times)),s.emitEvent(new tt(a,h,this.times)),this.addBlocks(h),this.__levelList.reset(),this.__updatedList=null,te.end(i)}fullLayout(){const t=te.start("FullLayout"),{target:i}=this,{BEFORE:s,LAYOUT:r,AFTER:n}=tt,o=this.getBlocks(new ht(i));i.emitEvent(new tt(s,o,this.times)),pr.fullLayout(i),o.forEach(a=>{a.setAfter()}),i.emitEvent(new tt(r,o,this.times)),i.emitEvent(new tt(n,o,this.times)),this.addBlocks(o),te.end(t)}static fullLayout(t){Df(t,!0),t.isBranch?_s.updateBounds(t):ve.updateBounds(t),$f(t)}addExtra(t){if(!this.__updatedList.has(t)){const{updatedList:i,beforeBounds:s}=this.extraBlock||(this.extraBlock=new ah([]));i.length?s.add(t.__world):s.set(t.__world),i.add(t)}}createBlock(t){return new ah(t)}getBlocks(t){return[this.createBlock(t)]}addBlocks(t){this.layoutedBlocks?this.layoutedBlocks.push(...t):this.layoutedBlocks=t}__onReceiveWatchData(t){this.__updatedList=t.data.updatedList}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(tt.REQUEST,this.layout,this),t.on_(tt.AGAIN,this.layoutAgain,this),t.on_(Ae.DATA,this.__onReceiveWatchData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.config=null)}}const yi=Q.get("Renderer");class Er{get needFill(){return!(this.canvas.allowBackgroundColor||!this.config.fill)}constructor(t,i,s){this.FPS=60,this.totalTimes=0,this.times=0,this.config={usePartRender:!0,maxFPS:60},this.target=t,this.canvas=i,s&&(this.config=ft.default(s,this.config)),this.__listenEvents()}start(){this.running=!0,this.update(!1)}stop(){this.running=!1}update(t=!0){this.changed||(this.changed=t),this.__requestRender()}requestLayout(){this.target.emit(tt.REQUEST)}checkRender(){if(this.running){const{target:t}=this;t.isApp&&(t.emit(U.CHILD_START,t),t.children.forEach(i=>{i.renderer.FPS=this.FPS,i.renderer.checkRender()}),t.emit(U.CHILD_END,t)),this.changed&&this.canvas.view&&this.render(),this.target.emit(U.NEXT)}}render(t){if(!this.running||!this.canvas.view)return this.update();const{target:i}=this;this.times=0,this.totalBounds=new wt,yi.log(i.innerName,"--->");try{this.emitRender(U.START),this.renderOnce(t),this.emitRender(U.END,this.totalBounds),Ht.clearRecycled()}catch(s){this.rendering=!1,yi.error(s)}yi.log("-------------|")}renderAgain(){this.rendering?this.waitAgain=!0:this.renderOnce()}renderOnce(t){if(this.rendering)return yi.warn("rendering");if(this.times>3)return yi.warn("render max times");if(this.times++,this.totalTimes++,this.rendering=!0,this.changed=!1,this.renderBounds=new wt,this.renderOptions={},t)this.emitRender(U.BEFORE),t();else{if(this.requestLayout(),this.ignore)return void(this.ignore=this.rendering=!1);this.emitRender(U.BEFORE),this.config.usePartRender&&this.totalTimes>1?this.partRender():this.fullRender()}this.emitRender(U.RENDER,this.renderBounds,this.renderOptions),this.emitRender(U.AFTER,this.renderBounds,this.renderOptions),this.updateBlocks=null,this.rendering=!1,this.waitAgain&&(this.waitAgain=!1,this.renderOnce())}partRender(){const{canvas:t,updateBlocks:i}=this;i&&(this.mergeBlocks(),i.forEach(s=>{t.bounds.hit(s)&&!s.isEmpty()&&this.clipRender(s)}))}clipRender(t){const i=te.start("PartRender"),{canvas:s}=this,r=t.getIntersect(s.bounds),n=new wt(r);s.save(),r.spread(Er.clipSpread).ceil(),s.clearWorld(r,!0),s.clipWorld(r,!0),this.__render(r,n),s.restore(),te.end(i)}fullRender(){const t=te.start("FullRender"),{canvas:i}=this;i.save(),i.clear(),this.__render(i.bounds),i.restore(),te.end(t)}__render(t,i){const{canvas:s}=this,r=t.includes(this.target.__world),n=r?{includes:r}:{bounds:t,includes:r};this.needFill&&s.fillWorld(t,this.config.fill),Q.showRepaint&&Q.drawRepaint(s,t),this.target.__render(s,n),this.renderBounds=i=i||t,this.renderOptions=n,this.totalBounds.isEmpty()?this.totalBounds=i:this.totalBounds.add(i),s.updateRender(i)}addBlock(t){this.updateBlocks||(this.updateBlocks=[]),this.updateBlocks.push(t)}mergeBlocks(){const{updateBlocks:t}=this;if(t){const i=new wt;i.setList(t),t.length=0,t.push(i)}}__requestRender(){const t=this.target;if(this.requestTime||!t)return;if(t.parentApp)return t.parentApp.requestRender(!1);const i=this.requestTime=Date.now();E.requestRender(()=>{this.FPS=Math.min(60,Math.ceil(1e3/(Date.now()-i))),this.requestTime=0,this.checkRender()})}__onResize(t){if(!this.canvas.unreal){if(t.bigger||!t.samePixelRatio){const{width:i,height:s}=t.old;if(!new wt(0,0,i,s).includes(this.target.__world)||this.needFill||!t.samePixelRatio)return this.addBlock(this.canvas.bounds),void this.target.forceUpdate("surface")}this.addBlock(new wt(0,0,1,1)),this.update()}}__onLayoutEnd(t){t.data&&t.data.map(i=>{let s;i.updatedList&&i.updatedList.list.some(r=>(s=!r.__world.width||!r.__world.height,s&&(r.isLeafer||yi.tip(r.innerName,": empty"),s=!r.isBranch||r.isBranchLeaf),s)),this.addBlock(s?this.canvas.bounds:i.updatedBounds)})}emitRender(t,i,s){this.target.emitEvent(new U(t,this.times,i,s))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(U.REQUEST,this.update,this),t.on_(tt.END,this.__onLayoutEnd,this),t.on_(U.AGAIN,this.renderAgain,this),t.on_(De.RESIZE,this.__onResize,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.canvas=this.config=null)}}Er.clipSpread=10;const{hitRadiusPoint:Mf}=T;class Ff{constructor(t,i){this.target=t,this.selector=i}getByPoint(t,i,s){i||(i=0),s||(s={});const r=s.through||!1,n=s.ignoreHittable||!1,o=s.target||this.target;this.exclude=s.exclude||null,this.point={x:t.x,y:t.y,radiusX:i,radiusY:i},this.findList=new ht(s.findList),s.findList||this.hitBranch(o);const{list:a}=this.findList,h=this.getBestMatchLeaf(a,s.bottomList,n),l=n?this.getPath(h):this.getHitablePath(h);return this.clear(),r?{path:l,target:h,throughPath:a.length?this.getThroughPath(a):l}:{path:l,target:h}}getBestMatchLeaf(t,i,s){if(t.length){let r;this.findList=new ht;const{x:n,y:o}=this.point,a={x:n,y:o,radiusX:0,radiusY:0};for(let h=0,l=t.length;h<l;h++)if(r=t[h],(s||ve.worldHittable(r))&&(this.hitChild(r,a),this.findList.length))return this.findList.list[0]}if(i){for(let r=0,n=i.length;r<n;r++)if(this.hitChild(i[r].target,this.point,i[r].proxy),this.findList.length)return this.findList.list[0]}return t[0]}getPath(t){const i=new ht;for(;t;)i.add(t),t=t.parent;return this.target&&i.add(this.target),i}getHitablePath(t){const i=this.getPath(t&&t.hittable?t:null);let s,r=new ht;for(let n=i.list.length-1;n>-1&&(s=i.list[n],s.__.hittable)&&(r.addAt(s,0),s.__.hitChildren);n--);return r}getThroughPath(t){const i=new ht,s=[];for(let a=t.length-1;a>-1;a--)s.push(this.getPath(t[a]));let r,n,o;for(let a=0,h=s.length;a<h;a++){r=s[a],n=s[a+1];for(let l=0,c=r.length;l<c&&(o=r.list[l],!n||!n.has(o));l++)i.add(o)}return i}hitBranch(t){this.eachFind(t.children,t.__onlyHitMask)}eachFind(t,i){let s,r;const{point:n}=this;for(let o=t.length-1;o>-1;o--)s=t[o],!s.__.visible||i&&!s.__.mask||(r=!!s.__.hitRadius||Mf(s.__world,n),s.isBranch?(r||s.__ignoreHitWorld)&&(this.eachFind(s.children,s.__onlyHitMask),s.isBranchLeaf&&this.hitChild(s,n)):r&&this.hitChild(s,n))}hitChild(t,i,s){if((!this.exclude||!this.exclude.has(t))&&t.__hitWorld(i)){const{parent:r}=t;if(r&&r.__hasMask&&!t.__.mask&&!r.children.some(n=>n.__.mask&&n.__hitWorld(i)))return;this.findList.add(s||t)}}clear(){this.point=null,this.findList=null,this.exclude=null}destroy(){this.clear()}}class If{constructor(t,i){this.config={},i&&(this.config=ft.default(i,this.config)),this.picker=new Ff(this.target=t,this),this.finder=ct.finder&&ct.finder()}getByPoint(t,i,s){const{target:r,picker:n}=this;return E.backgrounder&&r&&r.updateLayout(),n.getByPoint(t,i,s)}getBy(t,i,s,r){return this.finder?this.finder.getBy(t,i,s,r):gt.need("find")}destroy(){this.picker.destroy(),this.finder&&this.finder.destroy()}}Object.assign(ct,{watcher:(e,t)=>new Pf(e,t),layouter:(e,t)=>new pr(e,t),renderer:(e,t,i)=>new Er(e,t,i),selector:(e,t)=>new If(e,t)}),E.layout=pr.fullLayout;const Tt={convert(e,t){const i=ee.getBase(e),s=Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:e.width,height:e.height,pointerType:e.pointerType,pressure:e.pressure});return s.pointerType==="pen"&&(s.tangentialPressure=e.tangentialPressure,s.tiltX=e.tiltX,s.tiltY=e.tiltY,s.twist=e.twist),s},convertMouse(e,t){const i=ee.getBase(e);return Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:1,height:1,pointerType:"mouse",pressure:.5})},convertTouch(e,t){const i=Tt.getTouch(e),s=ee.getBase(e);return Object.assign(Object.assign({},s),{x:t.x,y:t.y,width:1,height:1,pointerType:"touch",multiTouch:e.touches.length>1,pressure:i.force})},getTouch:e=>e.targetTouches[0]||e.changedTouches[0]},hh={convert(e){const t=ee.getBase(e);return Object.assign(Object.assign({},t),{code:e.code,key:e.key})}},{pathCanDrag:Wf}=ee;class zf extends bf{__listenEvents(){super.__listenEvents();const t=this.view=this.canvas.view;this.viewEvents={pointerdown:this.onPointerDown,mousedown:this.onMouseDown,touchstart:this.onTouchStart,pointerleave:this.onPointerLeave,contextmenu:this.onContextMenu,wheel:this.onWheel,gesturestart:this.onGesturestart,gesturechange:this.onGesturechange,gestureend:this.onGestureend},this.windowEvents={pointermove:this.onPointerMove,pointerup:this.onPointerUp,pointercancel:this.onPointerCancel,mousemove:this.onMouseMove,mouseup:this.onMouseUp,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,keydown:this.onKeyDown,keyup:this.onKeyUp,scroll:this.onScroll};const{viewEvents:i,windowEvents:s}=this;for(let r in i)i[r]=i[r].bind(this),t.addEventListener(r,i[r]);for(let r in s)s[r]=s[r].bind(this),window.addEventListener(r,s[r])}__removeListenEvents(){super.__removeListenEvents();const{viewEvents:t,windowEvents:i}=this;for(let s in t)this.view.removeEventListener(s,t[s]),this.viewEvents={};for(let s in i)window.removeEventListener(s,i[s]),this.windowEvents={}}getTouches(t){const i=[];for(let s=0,r=t.length;s<r;s++)i.push(t[s]);return i}preventDefaultPointer(t){const{pointer:i}=this.config;i.preventDefault&&t.preventDefault()}preventDefaultWheel(t){const{wheel:i}=this.config;i.preventDefault&&t.preventDefault()}preventWindowPointer(t){return!this.downData&&t.target!==this.view}onKeyDown(t){this.keyDown(hh.convert(t))}onKeyUp(t){this.keyUp(hh.convert(t))}onContextMenu(t){this.config.pointer.preventDefaultMenu&&t.preventDefault(),this.menu(Tt.convert(t,this.getLocal(t)))}onScroll(){this.canvas.updateClientBounds()}onPointerDown(t){this.preventDefaultPointer(t),this.config.pointer.touch||this.useMultiTouch||(this.usePointer||(this.usePointer=!0),this.pointerDown(Tt.convert(t,this.getLocal(t))))}onPointerMove(t,i){if(this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t))return;this.usePointer||(this.usePointer=!0);const s=Tt.convert(t,this.getLocal(t,!0));i?this.pointerHover(s):this.pointerMove(s)}onPointerLeave(t){this.onPointerMove(t,!0)}onPointerUp(t){this.downData&&this.preventDefaultPointer(t),this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t)||this.pointerUp(Tt.convert(t,this.getLocal(t)))}onPointerCancel(){this.useMultiTouch||this.pointerCancel()}onMouseDown(t){this.preventDefaultPointer(t),this.useTouch||this.usePointer||this.pointerDown(Tt.convertMouse(t,this.getLocal(t)))}onMouseMove(t){this.useTouch||this.usePointer||this.preventWindowPointer(t)||this.pointerMove(Tt.convertMouse(t,this.getLocal(t,!0)))}onMouseUp(t){this.downData&&this.preventDefaultPointer(t),this.useTouch||this.usePointer||this.preventWindowPointer(t)||this.pointerUp(Tt.convertMouse(t,this.getLocal(t)))}onMouseCancel(){this.useTouch||this.usePointer||this.pointerCancel()}onTouchStart(t){const i=Tt.getTouch(t),s=this.getLocal(i,!0),{preventDefault:r}=this.config.touch;(r===!0||r==="auto"&&Wf(this.findPath(s)))&&t.preventDefault(),this.multiTouchStart(t),this.usePointer||(this.touchTimer&&(window.clearTimeout(this.touchTimer),this.touchTimer=0),this.useTouch=!0,this.pointerDown(Tt.convertTouch(t,s)))}onTouchMove(t){if(this.multiTouchMove(t),this.usePointer||this.preventWindowPointer(t))return;const i=Tt.getTouch(t);this.pointerMove(Tt.convertTouch(t,this.getLocal(i)))}onTouchEnd(t){if(this.multiTouchEnd(),this.usePointer||this.preventWindowPointer(t))return;this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(()=>{this.useTouch=!1},500);const i=Tt.getTouch(t);this.pointerUp(Tt.convertTouch(t,this.getLocal(i)))}onTouchCancel(){this.usePointer||this.pointerCancel()}multiTouchStart(t){this.useMultiTouch=t.touches.length>1,this.touches=this.useMultiTouch?this.getTouches(t.touches):void 0,this.useMultiTouch&&this.pointerCancel()}multiTouchMove(t){if(this.useMultiTouch&&t.touches.length>1){const i=this.getTouches(t.touches),s=this.getKeepTouchList(this.touches,i);s.length>1&&(this.multiTouch(ee.getBase(t),s),this.touches=i)}}multiTouchEnd(){this.touches=null,this.useMultiTouch=!1,this.transformEnd()}getKeepTouchList(t,i){let s;const r=[];return t.forEach(n=>{s=i.find(o=>o.identifier===n.identifier),s&&r.push({from:this.getLocal(n),to:this.getLocal(s)})}),r}getLocalTouchs(t){return t.map(i=>this.getLocal(i))}onWheel(t){this.preventDefaultWheel(t),this.wheel(Object.assign(Object.assign(Object.assign({},ee.getBase(t)),this.getLocal(t)),{deltaX:t.deltaX,deltaY:t.deltaY}))}onGesturestart(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.lastGestureScale=1,this.lastGestureRotation=0)}onGesturechange(t){if(this.useMultiTouch)return;this.preventDefaultWheel(t);const i=ee.getBase(t);Object.assign(i,this.getLocal(t));const s=t.scale/this.lastGestureScale,r=(t.rotation-this.lastGestureRotation)/Math.PI*180*(yt.within(this.config.wheel.rotateSpeed,0,1)/4+.1);this.zoom(Object.assign(Object.assign({},i),{scale:s*s})),this.rotate(Object.assign(Object.assign({},i),{rotation:r})),this.lastGestureScale=t.scale,this.lastGestureRotation=t.rotation}onGestureend(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.transformEnd())}setCursor(t){super.setCursor(t);const i=[];this.eachCursor(t,i),typeof i[i.length-1]=="object"&&i.push("default"),this.canvas.view.style.cursor=i.map(s=>typeof s=="object"?`url(${s.url}) ${s.x||0} ${s.y||0}`:s).join(",")}eachCursor(t,i,s=0){if(s++,t instanceof Array)t.forEach(r=>this.eachCursor(r,i,s));else{const r=typeof t=="string"&&jl.get(t);r&&s<2?this.eachCursor(r,i,s):i.push(t)}}destroy(){this.view&&(super.destroy(),this.view=null,this.touches=null)}}function bo(e,t){const i=e.__,{rows:s,decorationY:r}=i.__textDrawData;let n;i.__isPlacehold&&i.placeholderColor&&(t.fillStyle=i.placeholderColor);for(let o=0,a=s.length;o<a;o++)n=s[o],n.text?t.fillText(n.text,n.x,n.y):n.data&&n.data.forEach(h=>{t.fillText(h.char,h.x,n.y)});if(r){const{decorationColor:o,decorationHeight:a}=i.__textDrawData;o&&(t.fillStyle=o),s.forEach(h=>r.forEach(l=>t.fillRect(h.x,h.y+l,h.width,a)))}}function Gi(e,t){e.__.__font?bo(e,t):e.__.windingRule?t.fill(e.__.windingRule):t.fill()}function yn(e,t,i){const{strokeAlign:s}=t.__,r=typeof e!="string";switch(s){case"center":i.setStroke(r?void 0:e,t.__.strokeWidth,t.__),r?ns(e,!0,t,i):ls(t,i);break;case"inside":lh("inside",e,r,t,i);break;case"outside":lh("outside",e,r,t,i)}}function lh(e,t,i,s,r){const{__strokeWidth:n,__font:o}=s.__,a=r.getSameCanvas(!0,!0);a.setStroke(i?void 0:t,2*n,s.__),a.font=o,i?ns(t,!0,s,a):ls(s,a),a.blendMode=e==="outside"?"destination-out":"destination-in",bo(s,a),a.blendMode="normal",s.__worldFlipped?r.copyWorldByReset(a,s.__nowWorld):r.copyWorldToInner(a,s.__nowWorld,s.__layout.renderBounds),a.recycle(s.__nowWorld)}function ls(e,t){let i,s=e.__.__textDrawData;const{rows:r,decorationY:n}=s;for(let o=0,a=r.length;o<a;o++)i=r[o],i.text?t.strokeText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.strokeText(h.char,h.x,i.y)});if(n){const{decorationHeight:o}=s;r.forEach(a=>n.forEach(h=>t.strokeRect(a.x,a.y+h,a.width,o)))}}function ns(e,t,i,s){let r;for(let n=0,o=e.length;n<o;n++)r=e[n],r.image&&Je.checkImage(i,s,r,!1)||r.style&&(s.strokeStyle=r.style,r.blendMode?(s.saveBlendMode(r.blendMode),t?ls(i,s):s.stroke(),s.restoreBlendMode()):t?ls(i,s):s.stroke())}function dh(e,t){e.__.dashPattern&&(t.beginPath(),e.__drawPathByData(t,e.__.__pathForArrow),t.dashPattern=null,t.stroke())}const{getSpread:Nf,getOuterOf:jf,getByMove:Yf,getIntersectData:Xf}=T;let io;function Hf(e,t,i){if(typeof t!="object"||t.visible===!1||t.opacity===0)return;const{boxBounds:s}=i.__layout;switch(t.type){case"solid":let{type:r,blendMode:n,color:o,opacity:a}=t;return{type:r,blendMode:n,style:Mt.string(o,a)};case"image":return Je.image(i,e,t,s,!io||!io[t.url]);case"linear":return rr.linearGradient(t,s);case"radial":return rr.radialGradient(t,s);case"angular":return rr.conicGradient(t,s);default:return t.r!==void 0?{type:"solid",style:Mt.string(t)}:void 0}}const Gf={compute:function(e,t){const i=t.__,s=[];let r,n=i.__input[e];n instanceof Array||(n=[n]),io=Je.recycleImage(e,i);for(let o,a=0,h=n.length;a<h;a++)o=Hf(e,n[a],t),o&&s.push(o);i["_"+e]=s.length?s:void 0,s.length&&s[0].image&&(r=s[0].image.hasOpacityPixel),e==="fill"?i.__pixelFill=r:i.__pixelStroke=r},fill:function(e,t,i){i.fillStyle=e,Gi(t,i)},fills:function(e,t,i){let s;for(let r=0,n=e.length;r<n;r++){if(s=e[r],s.image){if(Je.checkImage(t,i,s,!t.__.__font))continue;if(!s.style){!r&&s.image.isPlacehold&&t.drawImagePlaceholder(i,s.image);continue}}i.fillStyle=s.style,s.transform?(i.save(),i.transform(s.transform),s.blendMode&&(i.blendMode=s.blendMode),Gi(t,i),i.restore()):s.blendMode?(i.saveBlendMode(s.blendMode),Gi(t,i),i.restoreBlendMode()):Gi(t,i)}},fillPathOrText:Gi,fillText:bo,stroke:function(e,t,i){const s=t.__,{__strokeWidth:r,strokeAlign:n,__font:o}=s;if(r)if(o)yn(e,t,i);else switch(n){case"center":i.setStroke(e,r,s),i.stroke(),s.__useArrow&&dh(t,i);break;case"inside":i.save(),i.setStroke(e,2*r,s),s.windingRule?i.clip(s.windingRule):i.clip(),i.stroke(),i.restore();break;case"outside":const a=i.getSameCanvas(!0,!0);a.setStroke(e,2*r,s),t.__drawRenderPath(a),a.stroke(),s.windingRule?a.clip(s.windingRule):a.clip(),a.clearWorld(t.__layout.renderBounds),t.__worldFlipped?i.copyWorldByReset(a,t.__nowWorld):i.copyWorldToInner(a,t.__nowWorld,t.__layout.renderBounds),a.recycle(t.__nowWorld)}},strokes:function(e,t,i){const s=t.__,{__strokeWidth:r,strokeAlign:n,__font:o}=s;if(r)if(o)yn(e,t,i);else switch(n){case"center":i.setStroke(void 0,r,s),ns(e,!1,t,i),s.__useArrow&&dh(t,i);break;case"inside":i.save(),i.setStroke(void 0,2*r,s),s.windingRule?i.clip(s.windingRule):i.clip(),ns(e,!1,t,i),i.restore();break;case"outside":const{renderBounds:a}=t.__layout,h=i.getSameCanvas(!0,!0);t.__drawRenderPath(h),h.setStroke(void 0,2*r,s),ns(e,!1,t,h),s.windingRule?h.clip(s.windingRule):h.clip(),h.clearWorld(a),t.__worldFlipped?i.copyWorldByReset(h,t.__nowWorld):i.copyWorldToInner(h,t.__nowWorld,a),h.recycle(t.__nowWorld)}},strokeText:yn,drawTextStroke:ls,shape:function(e,t,i){const s=t.getSameCanvas(),r=e.__nowWorld;let n,o,a,h,{scaleX:l,scaleY:c}=r;if(l<0&&(l=-l),c<0&&(c=-c),t.bounds.includes(r))h=s,n=a=r;else{const{renderShapeSpread:d}=e.__layout,p=Xf(d?Nf(t.bounds,l===c?d*l:[d*c,d*l]):t.bounds,r);o=t.bounds.getFitMatrix(p);let{a:u,d:f}=o;if(o.a<1&&(h=t.getSameCanvas(),e.__renderShape(h,i),l*=u,c*=f),a=jf(r,o),n=Yf(a,-o.e,-o.f),i.matrix){const{matrix:g}=i;o.multiply(g),u*=g.scaleX,f*=g.scaleY}i=Object.assign(Object.assign({},i),{matrix:o.withScale(u,f)})}return e.__renderShape(s,i),{canvas:s,matrix:o,bounds:n,worldCanvas:h,shapeBounds:a,scaleX:l,scaleY:c}}};let Ui={};const{get:Bo,rotateOfOuter:Xl,translate:bi,scaleOfOuter:Uf,scale:Hl,rotate:Gl}=L;function Ul(e,t,i,s,r,n,o){const a=Bo();bi(a,t.x+i,t.y+s),Hl(a,r,n),o&&Xl(a,{x:t.x+t.width/2,y:t.y+t.height/2},o),e.transform=a}function Vl(e,t,i,s,r,n,o){const a=Bo();bi(a,t.x+i,t.y+s),r&&Hl(a,r,n),o&&Gl(a,o),e.transform=a}function ql(e,t,i,s,r,n,o,a,h,l){const c=Bo();if(h)if(l==="center")Xl(c,{x:i/2,y:s/2},h);else switch(Gl(c,h),h){case 90:bi(c,s,0);break;case 180:bi(c,i,s);break;case 270:bi(c,0,i)}Ui.x=t.x+r,Ui.y=t.y+n,bi(c,Ui.x,Ui.y),o&&Uf(c,Ui,o,a),e.transform=c}const{get:Vf,translate:qf}=L,Kf=new wt,mn={},wn={};function Kl(e,t,i,s){const{blendMode:r,changeful:n,sync:o}=i;r&&(e.blendMode=r),n&&(e.changeful=n),o&&(e.sync=o),e.data=Ql(i,s,t)}function Ql(e,t,i){let{width:s,height:r}=i;e.padding&&(t=Kf.set(t).shrink(e.padding)),e.mode==="strench"&&(e.mode="stretch");const{opacity:n,mode:o,align:a,offset:h,scale:l,size:c,rotation:d,repeat:p,filters:u}=e,f=t.width===s&&t.height===r,g={mode:o},w=a!=="center"&&(d||0)%180==90,v=w?r:s,y=w?s:r;let b,B,k=0,P=0;if(o&&o!=="cover"&&o!=="fit")(l||c)&&(yt.getScaleData(l,c,i,wn),b=wn.scaleX,B=wn.scaleY);else if(!f||d){const x=t.width/v,O=t.height/y;b=B=o==="fit"?Math.min(x,O):Math.max(x,O),k+=(t.width-s*b)/2,P+=(t.height-r*B)/2}if(a){const x={x:k,y:P,width:v,height:y};b&&(x.width*=b,x.height*=B),wl.toPoint(a,x,t,mn,!0),k+=mn.x,P+=mn.y}switch(h&&(k+=h.x,P+=h.y),o){case"stretch":f||(s=t.width,r=t.height);break;case"normal":case"clip":(k||P||b||d)&&Vl(g,t,k,P,b,B,d);break;case"repeat":(!f||b||d)&&ql(g,t,s,r,k,P,b,B,d,a),p||(g.repeat="repeat");break;default:b&&Ul(g,t,k,P,b,B,d)}return g.transform||(t.x||t.y)&&(g.transform=Vf(),qf(g.transform,t.x,t.y)),b&&o!=="stretch"&&(g.scaleX=b,g.scaleY=B),g.width=s,g.height=r,n&&(g.opacity=n),u&&(g.filters=u),p&&(g.repeat=typeof p=="string"?p==="x"?"repeat-x":"repeat-y":"repeat"),g}let Vi,Qf=new wt;const{isSame:Jf}=T;function ch(e,t,i,s,r,n){if(t==="fill"&&!e.__.__naturalWidth){const o=e.__;if(o.__naturalWidth=s.width/o.pixelRatio,o.__naturalHeight=s.height/o.pixelRatio,o.__autoSide)return e.forceUpdate("width"),e.__proxyData&&(e.setProxyAttr("width",o.width),e.setProxyAttr("height",o.height)),!1}return r.data||Kl(r,s,i,n),!0}function uh(e,t){ko(e,le.LOAD,t)}function ph(e,t){ko(e,le.LOADED,t)}function _h(e,t,i){t.error=i,e.forceUpdate("surface"),ko(e,le.ERROR,t)}function ko(e,t,i){e.hasEvent(t)&&e.emitEvent(new le(t,i))}function vn(e,t){const{leafer:i}=e;i&&i.viewReady&&(i.renderer.ignore=t)}const{get:fh,scale:gh,copy:yh}=L,{ceil:mh,abs:wh}=Math;function xn(e,t,i){let{scaleX:s,scaleY:r}=Ht.patternLocked?e.__world:e.__nowWorld;const n=s+"-"+r+"-"+i;if(t.patternId===n||e.destroyed)return!1;{s=wh(s),r=wh(r);const{image:o,data:a}=t;let h,l,{width:c,height:d,scaleX:p,scaleY:u,transform:f,repeat:g}=a;p&&(l=fh(),yh(l,f),gh(l,1/p,1/u),s*=p,r*=u),s*=i,r*=i,c*=s,d*=r;const w=c*d;if(!g&&w>E.image.maxCacheSize)return!1;let v=E.image.maxPatternSize;if(!o.isSVG){const B=o.width*o.height;v>B&&(v=B)}w>v&&(h=Math.sqrt(w/v)),h&&(s/=h,r/=h,c/=h,d/=h),p&&(s/=p,r/=u),(f||s!==1||r!==1)&&(l||(l=fh(),f&&yh(l,f)),gh(l,1/s,1/r));const y=o.getCanvas(mh(c)||1,mh(d)||1,a.opacity,a.filters),b=o.getPattern(y,g||E.origin.noRepeat||"no-repeat",l,t);return t.style=b,t.patternId=n,!0}}function Zf(e,t,i,s){return new(i||(i=Promise))(function(r,n){function o(l){try{h(s.next(l))}catch(c){n(c)}}function a(l){try{h(s.throw(l))}catch(c){n(c)}}function h(l){var c;l.done?r(l.value):(c=l.value,c instanceof i?c:new i(function(d){d(c)})).then(o,a)}h((s=s.apply(e,[])).next())})}const{abs:vh}=Math,tg={image:function(e,t,i,s,r){let n,o;const a=Ht.get(i);return Vi&&i===Vi.paint&&Jf(s,Vi.boxBounds)?n=Vi.leafPaint:(n={type:i.type,image:a},Vi=a.use>1?{leafPaint:n,paint:i,boxBounds:Qf.set(s)}:null),(r||a.loading)&&(o={image:a,attrName:t,attrValue:i}),a.ready?(ch(e,t,i,a,n,s),r&&(uh(e,o),ph(e,o))):a.error?r&&_h(e,o,a.error):(r&&(vn(e,!0),uh(e,o)),n.loadId=a.load(()=>{vn(e,!1),e.destroyed||(ch(e,t,i,a,n,s)&&(a.hasOpacityPixel&&(e.__layout.hitCanvasChanged=!0),e.forceUpdate("surface")),ph(e,o)),n.loadId=null},h=>{vn(e,!1),_h(e,o,h),n.loadId=null}),e.placeholderColor&&setTimeout(()=>{a.ready||a.isPlacehold||(a.isPlacehold=!0,e.forceUpdate("surface"))},100)),n},checkImage:function(e,t,i,s){const{scaleX:r,scaleY:n}=Ht.patternLocked?e.__world:e.__nowWorld,{pixelRatio:o}=t,{data:a}=i;if(!a||i.patternId===r+"-"+n+"-"+o&&!is.running)return!1;if(s){if(a.repeat)s=!1;else if(!(i.changeful||De.isResizing(e)||is.running)){let{width:h,height:l}=a;h*=vh(r)*o,l*=vh(n)*o,a.scaleX&&(h*=a.scaleX,l*=a.scaleY),s=h*l>E.image.maxCacheSize}}return s?(function(h,l,c,d){l.save(),h.windingRule?l.clip(h.windingRule):l.clip(),c.blendMode&&(l.blendMode=c.blendMode),d.opacity&&(l.opacity*=d.opacity),d.transform&&l.transform(d.transform),l.drawImage(c.image.getFull(d.filters),0,0,d.width,d.height),l.restore()}(e,t,i,a),!0):(!i.style||i.sync||is.running?xn(e,i,o):i.patternTask||(i.patternTask=Ht.patternTasker.add(()=>Zf(this,void 0,void 0,function*(){i.patternTask=null,t.bounds.hit(e.__nowWorld)&&xn(e,i,o),e.forceUpdate("surface")}),300)),!1)},createPattern:xn,recycleImage:function(e,t){const i=t["_"+e];if(i instanceof Array){let s,r,n,o,a;for(let h=0,l=i.length;h<l;h++)s=i[h],r=s.image,a=r&&r.url,a&&(n||(n={}),n[a]=!0,Ht.recycle(r),r.loading&&(o||(o=t.__input&&t.__input[e]||[],o instanceof Array||(o=[o])),r.unload(i[h].loadId,!o.some(c=>c.url===a))));return n}return null},createData:Kl,getPatternData:Ql,fillOrFitMode:Ul,clipMode:Vl,repeatMode:ql},{toPoint:xh}=Pi,bn={},Bn={};function kn(e,t,i){if(t){let s;for(let r=0,n=t.length;r<n;r++)s=t[r],typeof s=="string"?e.addColorStop(r/(n-1),Mt.string(s,i)):e.addColorStop(s.offset,Mt.string(s.color,i))}}const{getAngle:eg,getDistance:ig}=$,{get:sg,rotateOfOuter:bh,scaleOfOuter:Bh}=L,{toPoint:kh}=Pi,Ne={},Sn={};function Cn(e,t,i,s,r){let n;const{width:o,height:a}=e;if(o!==a||s){const h=eg(t,i);n=sg(),r?(Bh(n,t,o/a*(s||1),1),bh(n,t,h+90)):(Bh(n,t,1,o/a*(s||1)),bh(n,t,h))}return n}const{getDistance:rg}=$,{toPoint:Sh}=Pi,fe={},Rn={},ng={linearGradient:function(e,t){let{from:i,to:s,type:r,blendMode:n,opacity:o}=e;xh(i||"top",t,bn),xh(s||"bottom",t,Bn);const a=E.canvas.createLinearGradient(bn.x,bn.y,Bn.x,Bn.y);kn(a,e.stops,o);const h={type:r,style:a};return n&&(h.blendMode=n),h},radialGradient:function(e,t){let{from:i,to:s,type:r,opacity:n,blendMode:o,stretch:a}=e;kh(i||"center",t,Ne),kh(s||"bottom",t,Sn);const h=E.canvas.createRadialGradient(Ne.x,Ne.y,0,Ne.x,Ne.y,ig(Ne,Sn));kn(h,e.stops,n);const l={type:r,style:h},c=Cn(t,Ne,Sn,a,!0);return c&&(l.transform=c),o&&(l.blendMode=o),l},conicGradient:function(e,t){let{from:i,to:s,type:r,opacity:n,blendMode:o,stretch:a}=e;Sh(i||"center",t,fe),Sh(s||"bottom",t,Rn);const h=E.conicGradientSupport?E.canvas.createConicGradient(0,fe.x,fe.y):E.canvas.createRadialGradient(fe.x,fe.y,0,fe.x,fe.y,rg(fe,Rn));kn(h,e.stops,n);const l={type:r,style:h},c=Cn(t,fe,Rn,a||1,E.conicGradientRotate90);return c&&(l.transform=c),o&&(l.blendMode=o),l},getTransform:Cn},{copy:Ch,toOffsetOutBounds:og}=T,Et={},Is={};function Rh(e,t,i,s){const{bounds:r,shapeBounds:n}=s;if(E.fullImageShadow){if(Ch(Et,e.bounds),Et.x+=t.x-n.x,Et.y+=t.y-n.y,i){const{matrix:o}=s;Et.x-=(r.x+(o?o.e:0)+r.width/2)*(i-1),Et.y-=(r.y+(o?o.f:0)+r.height/2)*(i-1),Et.width*=i,Et.height*=i}e.copyWorld(s.canvas,e.bounds,Et)}else i&&(Ch(Et,t),Et.x-=t.width/2*(i-1),Et.y-=t.height/2*(i-1),Et.width*=i,Et.height*=i),e.copyWorld(s.canvas,n,i?Et:t)}const{toOffsetOutBounds:ag}=T,Ws={},hg={shadow:function(e,t,i){let s,r;const{__nowWorld:n,__layout:o}=e,{shadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:p}=i,u=t.getSameCanvas(),f=a.length-1;og(l,Is),a.forEach((g,w)=>{u.setWorldShadow(Is.offsetX+g.x*d,Is.offsetY+g.y*p,g.blur*d,Mt.string(g.color)),r=g.spread?1+2*g.spread/(o.boxBounds.width+2*(o.strokeBoxSpread||0)):0,Rh(u,Is,r,i),s=l,g.box&&(u.restore(),u.save(),h&&(u.copyWorld(u,l,n,"copy"),s=n),h?u.copyWorld(h,n,n,"destination-out"):u.copyWorld(i.canvas,c,l,"destination-out")),e.__worldFlipped?t.copyWorldByReset(u,s,n,g.blendMode):t.copyWorldToInner(u,s,o.renderBounds,g.blendMode),f&&w<f&&u.clearWorld(s,!0)}),u.recycle(s)},innerShadow:function(e,t,i){let s,r;const{__nowWorld:n,__layout:o}=e,{innerShadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:p}=i,u=t.getSameCanvas(),f=a.length-1;ag(l,Ws),a.forEach((g,w)=>{u.save(),u.setWorldShadow(Ws.offsetX+g.x*d,Ws.offsetY+g.y*p,g.blur*d),r=g.spread?1-2*g.spread/(o.boxBounds.width+2*(o.strokeBoxSpread||0)):0,Rh(u,Ws,r,i),u.restore(),h?(u.copyWorld(u,l,n,"copy"),u.copyWorld(h,n,n,"source-out"),s=n):(u.copyWorld(i.canvas,c,l,"source-out"),s=l),u.fillWorld(s,Mt.string(g.color),"source-in"),e.__worldFlipped?t.copyWorldByReset(u,s,n,g.blendMode):t.copyWorldToInner(u,s,o.renderBounds,g.blendMode),f&&w<f&&u.clearWorld(s,!0)}),u.recycle(s)},blur:function(e,t,i){const{blur:s}=e.__;i.setWorldBlur(s*e.__nowWorld.a),i.copyWorldToInner(t,e.__nowWorld,e.__layout.renderBounds),i.filter="none"},backgroundBlur:function(e,t,i){}},{excludeRenderBounds:lg}=Sr;function Eh(e,t,i,s,r,n){switch(t){case"grayscale":r.useGrayscaleAlpha(e.__nowWorld);case"alpha":(function(o,a,h,l){const c=o.__nowWorld;h.resetTransform(),h.opacity=1,h.useMask(l,c),l.recycle(c),Th(o,a,h,1)})(e,i,s,r);break;case"opacity-path":Th(e,i,s,n);break;case"path":i.restore()}}function En(e){return e.getSameCanvas(!1,!0)}function Th(e,t,i,s){const r=e.__nowWorld;t.resetTransform(),t.opacity=s,t.copyWorld(i,r),i.recycle(r)}$t.prototype.__renderMask=function(e,t){let i,s,r,n,o,a;const{children:h}=this;for(let l=0,c=h.length;l<c;l++)i=h[l],a=i.__.mask,a&&(o&&(Eh(this,o,e,r,s,n),s=r=null),a==="path"||a==="clipping-path"?(i.opacity<1?(o="opacity-path",n=i.opacity,r||(r=En(e))):(o="path",e.save()),i.__clip(r||e,t)):(o=a==="grayscale"?"grayscale":"alpha",s||(s=En(e)),r||(r=En(e)),i.__render(s,t)),a!=="clipping"&&a!=="clipping-path")||lg(i,t)||i.__render(r||e,t);Eh(this,o,e,r,s,n)};const Jl=`>)]}%!?,.:;'"》）」〉』〗】〕｝┐＞’”！？，、。：；‰`,dg=Jl+"_#~&*+\\=|≮≯≈≠＝…",cg=new RegExp([[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983],[183984,191471],[196608,201551],[201552,205743],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12736,12783],[12800,13055],[13056,13311],[63744,64255],[65072,65103],[127488,127743],[194560,195103]].map(([e,t])=>`[\\u${e.toString(16)}-\\u${t.toString(16)}]`).join("|"));function fs(e){const t={};return e.split("").forEach(i=>t[i]=!0),t}const ug=fs("ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz"),pg=fs(`{[(<'"《（「〈『〖【〔｛┌＜‘“＝¥￥＄€£￡¢￠`),_g=fs(Jl),fg=fs(dg),gg=fs("- —／～｜┆·");var _r;(function(e){e[e.Letter=0]="Letter",e[e.Single=1]="Single",e[e.Before=2]="Before",e[e.After=3]="After",e[e.Symbol=4]="Symbol",e[e.Break=5]="Break"})(_r||(_r={}));const{Letter:Ph,Single:yg,Before:mg,After:wg,Symbol:vg,Break:xg}=_r;function bg(e){return ug[e]?Ph:gg[e]?xg:pg[e]?mg:_g[e]?wg:fg[e]?vg:cg.test(e)?yg:Ph}const Bg={trimRight(e){const{words:t}=e;let i,s=0,r=t.length;for(let n=r-1;n>-1&&(i=t[n].data[0],i.char===" ");n--)s++,e.width-=i.width;s&&t.splice(r-s,s)}};function kg(e,t,i){switch(t){case"title":return i?e.toUpperCase():e;case"upper":return e.toUpperCase();case"lower":return e.toLowerCase();default:return e}}const{trimRight:Sg}=Bg,{Letter:Tn,Single:qi,Before:Ah,After:Pn,Symbol:Cg,Break:Oh}=_r;let os,oe,St,At,An,Vt,ge,ds,Ei,Nt,Re,On,Ki,Bi,cs,or,so,vi=[];function Ln(e,t){Ei&&!ds&&(ds=Ei),os.data.push({char:e,width:t}),St+=t}function je(){At+=St,os.width=St,oe.words.push(os),os={data:[]},St=0}function Qi(){Bi&&(cs.paraNumber++,oe.paraStart=!0,Bi=!1),Ei&&(oe.startCharSize=ds,oe.endCharSize=Ei,ds=0),oe.width=At,or.width?Sg(oe):so&&Zl(),vi.push(oe),oe={words:[]},At=0}function Zl(){At>(cs.maxWidth||0)&&(cs.maxWidth=At)}const{top:zs,right:Lh,bottom:Dh,left:Ns}=Vn;function js(e,t,i){const{bounds:s,rows:r}=e;s[t]+=i;for(let n=0;n<r.length;n++)r[n][t]+=i}const Rg={getDrawData:function(e,t){typeof e!="string"&&(e=String(e));let i=0,s=0,r=t.__getInput("width")||0,n=t.__getInput("height")||0;const{textDecoration:o,__font:a,__padding:h}=t;h&&(r?(i=h[Ns],r-=h[Lh]+h[Ns]):t.autoSizeAlign||(i=h[Ns]),n?(s=h[zs],n-=h[zs]+h[Dh]):t.autoSizeAlign||(s=h[zs]));const l={bounds:{x:i,y:s,width:r,height:n},rows:[],paraNumber:0,font:E.canvas.font=a};return function(c,d,p){cs=c,vi=c.rows,or=c.bounds,so=!or.width&&!p.autoSizeAlign;const{__letterSpacing:u,paraIndent:f,textCase:g}=p,{canvas:w}=E,{width:v,height:y}=or;if(v||y||u||g!=="none"){const b=p.textWrap!=="none",B=p.textWrap==="break";Bi=!0,Re=null,ds=ge=Ei=St=At=0,os={data:[]},oe={words:[]};for(let k=0,P=d.length;k<P;k++)Vt=d[k],Vt===`
`?(St&&je(),oe.paraEnd=!0,Qi(),Bi=!0):(Nt=bg(Vt),Nt===Tn&&g!=="none"&&(Vt=kg(Vt,g,!St)),ge=w.measureText(Vt).width,u&&(u<0&&(Ei=ge),ge+=u),On=Nt===qi&&(Re===qi||Re===Tn)||Re===qi&&Nt!==Pn,Ki=!(Nt!==Ah&&Nt!==qi||Re!==Cg&&Re!==Pn),An=Bi&&f?v-f:v,b&&v&&At+St+ge>An&&(B?(St&&je(),At&&Qi()):(Ki||(Ki=Nt===Tn&&Re==Pn),(On||Ki||Nt===Oh||Nt===Ah||Nt===qi||St+ge>An)&&St&&je(),At&&Qi())),Vt===" "&&Bi!==!0&&At+St===0||(Nt===Oh?(Vt===" "&&St&&je(),Ln(Vt,ge),je()):((On||Ki)&&St&&je(),Ln(Vt,ge))),Re=Nt);St&&je(),At&&Qi(),vi.length>0&&(vi[vi.length-1].paraEnd=!0)}else d.split(`
`).forEach(b=>{cs.paraNumber++,At=w.measureText(b).width,vi.push({x:f||0,text:b,width:At,paraStart:!0}),so&&Zl()})}(l,e,t),h&&function(c,d,p,u,f){if(!u&&p.autoSizeAlign)switch(p.textAlign){case"left":js(d,"x",c[Ns]);break;case"right":js(d,"x",-c[Lh])}if(!f&&p.autoSizeAlign)switch(p.verticalAlign){case"top":js(d,"y",c[zs]);break;case"bottom":js(d,"y",-c[Dh])}}(h,l,t,r,n),function(c,d){const{rows:p,bounds:u}=c,f=p.length,{__lineHeight:g,__baseLine:w,__letterSpacing:v,__clipText:y,textAlign:b,verticalAlign:B,paraSpacing:k,autoSizeAlign:P}=d;let{x,y:O,width:Y,height:J}=u,K=g*f+(k?k*(c.paraNumber-1):0),H=w;if(y&&K>J)K=Math.max(J,g),f>1&&(c.overflow=f);else if(J||P)switch(B){case"middle":O+=(J-K)/2;break;case"bottom":O+=J-K}H+=O;let A,G,W,ot=Y||P?Y:c.maxWidth;for(let et=0,ut=f;et<ut;et++){if(A=p[et],A.x=x,A.width<Y||A.width>Y&&!y)switch(b){case"center":A.x+=(ot-A.width)/2;break;case"right":A.x+=ot-A.width}A.paraStart&&k&&et>0&&(H+=k),A.y=H,H+=g,c.overflow>et&&H>K&&(A.isOverflow=!0,c.overflow=et+1),G=A.x,W=A.width,v<0&&(A.width<0?(W=-A.width+d.fontSize+v,G-=W,W+=d.fontSize):W-=v),G<u.x&&(u.x=G),W>u.width&&(u.width=W),y&&Y&&Y<W&&(A.isOverflow=!0,c.overflow||(c.overflow=p.length))}u.y=O,u.height=K}(l,t),function(c,d,p){const{rows:u}=c,{textAlign:f,paraIndent:g,letterSpacing:w}=d;let v,y,b,B,k,P;u.forEach(x=>{x.words&&(b=g&&x.paraStart?g:0,P=x.words.length,y=p&&(f==="justify"||f==="both")&&P>1?(p-x.width-b)/(P-1):0,B=w||x.isOverflow?0:y>.01?1:2,x.isOverflow&&!w&&(x.textMode=!0),B===2?(x.x+=b,function(O){O.text="",O.words.forEach(Y=>{Y.data.forEach(J=>{O.text+=J.char})})}(x)):(x.x+=b,v=x.x,x.data=[],x.words.forEach((O,Y)=>{B===1?(k={char:"",x:v},v=function(J,K,H){return J.forEach(A=>{H.char+=A.char,K+=A.width}),K}(O.data,v,k),(x.isOverflow||k.char!==" ")&&x.data.push(k)):v=function(J,K,H,A){return J.forEach(G=>{(A||G.char!==" ")&&(G.x=K,H.push(G)),K+=G.width}),K}(O.data,v,x.data,x.isOverflow),!y||x.paraEnd&&f!=="both"||Y===P-1||(v+=y,x.width+=y)})),x.words=null)})}(l,t,r),l.overflow&&function(c,d,p,u){if(!u)return;const{rows:f,overflow:g}=c;let{textOverflow:w}=d;if(f.splice(g),w&&w!=="show"){let v,y;w==="hide"?w="":w==="ellipsis"&&(w="...");const b=w?E.canvas.measureText(w).width:0,B=p+u-b;(d.textWrap==="none"?f:[f[g-1]]).forEach(k=>{if(k.isOverflow&&k.data){let P=k.data.length-1;for(let x=P;x>-1&&(v=k.data[x],y=v.x+v.width,!(x===P&&y<B));x--){if(y<B&&v.char!==" "||!x){k.data.splice(x+1),k.width-=v.width;break}k.width-=v.width}k.width+=b,k.data.push({char:w,x:y}),k.textMode&&function(x){x.text="",x.data.forEach(O=>{x.text+=O.char}),x.data=null}(k)}})}}(l,t,i,r),o!=="none"&&function(c,d){let p;const{fontSize:u,textDecoration:f}=d;switch(c.decorationHeight=u/11,typeof f=="object"?(p=f.type,f.color&&(c.decorationColor=Mt.string(f.color))):p=f,p){case"under":c.decorationY=[.15*u];break;case"delete":c.decorationY=[.35*-u];break;case"under-delete":c.decorationY=[.15*u,.35*-u]}}(l,t),l}},Eg={string:function(e,t){const i=typeof t=="number"&&t!==1;if(typeof e=="string"){if(!i||!Mt.object)return e;e=Mt.object(e)}let s=e.a===void 0?1:e.a;i&&(s*=t);const r=e.r+","+e.g+","+e.b;return s===1?"rgb("+r+")":"rgba("+r+","+s+")"}};Object.assign(Il,Rg),Object.assign(Mt,Eg),Object.assign(_t,Gf),Object.assign(Je,tg),Object.assign(rr,ng),Object.assign(Zn,hg),Object.assign(ct,{interaction:(e,t,i,s)=>new zf(e,t,i,s),hitCanvas:(e,t)=>new Yl(e,t),hitCanvasManager:()=>new Bf}),Tf();function Dn(e,t){return nt(e,i=>({set(s){this.__setAttr(i,s),this.leaferIsReady?t?I.setStyleName(this,t,s):I.set(this,s):this.__layout.stateStyleChanged=!0}}))}function Ye(e){return nt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.stateStyleChanged=!0}}))}function Tr(e,t){if(t&&t!==!0)return t;if(!e.button){let{parent:i}=e;for(let s=0;s<2;s++)if(i){if(i.button)return i;i=i.parent}}return null}function td(e,t){typeof t!="object"&&(t=void 0),So(e,t,"in")}function ed(e,t){const{normalStyle:i}=e;typeof t!="object"&&(t=void 0),i&&(t||(t=i),So(e,t,"out"))}const $h={};function So(e,t,i){const{normalStyle:s}=e;t||(t=$h),t.scale&&(yt.assignScale(t,t.scale),delete t.scale),t!==$h&&I.canAnimate||(i=null);let r=!!i&&function(a,h,l){let c=a==="in"?"transition":"transitionOut";return a==="out"&&Fr(l[c])&&Fr(h[c])&&(c="transition"),Fr(h[c])?l[c]:h[c]}(i,t,e);const n=r?function(a,h){const l=Mh(h,a),c=a.animate();return c&&Mh(l,a,c.fromStyle),l}(e,t):void 0;I.canAnimate&&ro(e)&&e.killAnimate("transition"),s&&e.set(s,"temp");const o=ro(e);if(o){const{animation:a}=o;if(a){const h=e.animate(a,void 0,"animation",!0);Object.assign(o,h.endingStyle),i!=="in"||t.animation!==a?h.kill():r=!1,delete o.animation}e.normalStyle=no(o,e),e.set(o,"temp")}else e.normalStyle=void 0;if(r){const a=no(n,e);e.set(n,"temp"),e.animate([n,a],r,"transition",!0)}e.__layout.stateStyleChanged=!1}function ro(e){let t;const i={},s=Tr(e),r=s?e.state||s.state:e.state,n=r&&e.states[r];n&&I.isState(r,e,s)&&(t=Xe(i,n));const o=i.selectedStyle||e.selectedStyle;o&&I.isSelected(e,s)&&(t=Xe(i,o));const a=i.placeholderStyle||e.placeholderStyle;if(a&&I.isPlacehold(e,s)&&(t=Xe(i,a)),I.isDisabled(e,s)){const h=i.disabledStyle||e.disabledStyle;h&&(t=Xe(i,h))}else{const h=i.focusStyle||e.focusStyle;h&&I.isFocus(e,s)&&(t=Xe(i,h));const l=i.hoverStyle||e.hoverStyle;l&&I.isHover(e,s)&&(t=Xe(i,l));const c=i.pressStyle||e.pressStyle;c&&I.isPress(e,s)&&(t=Xe(i,c))}return t?i:void 0}function no(e,t,i,s){const r=i?e:{},n=i||e;for(let o in n)s&&I.animateExcludes[o]||(r[o]=t[o]);return r}function Mh(e,t,i){return no(e,t,i,!0)}function Xe(e,t){return Object.assign(e,t),!0}function fr(e,t){const i=e[t];i&&td(e,i),e.button&&Co(e.children,t)}function oo(e,t,i){i||(i=e.states[t]),td(e,i),e.button&&Co(e.children,null,t)}function Co(e,t,i){if(!e)return;let s,r;for(let n=0,o=e.length;n<o;n++){if(s=e[n],t){switch(r=!0,t){case"hoverStyle":I.isHover(s)&&(r=!1);break;case"pressStyle":I.isPress(s)&&(r=!1);break;case"focusStyle":I.isFocus(s)&&(r=!1)}r&&fr(s,t)}else i!==void 0&&oo(s,i);s.isBranch&&Co(s.children,t,i)}}function gr(e,t){const i=e[t];i&&ed(e,i),e.button&&Ro(e.children,t)}function ao(e,t,i){ed(e,i),e.button&&Ro(e.children,null,t)}function Ro(e,t,i){if(!e)return;let s;for(let r=0,n=e.length;r<n;r++)s=e[r],t?gr(s,t):i!==void 0&&ao(s,i),s.isBranch&&Ro(s.children,t,i)}function Ys(e,t,i){let s;const r=t.leafer?t.leafer.interaction:null;if(r&&(s=r[e](t),!s&&i)){const n=Tr(t,i);n&&(s=r[e](n))}return s}function Fh(e,t,i){let s=t[e];if(!s&&i){const r=Tr(t,i);r&&(s=r[e])}return s}gt.add("state"),I.animateExcludes={animation:1,animationOut:1,transition:1,transitionOut:1,states:1,state:1,placeholder:1,normalStyle:1,hoverStyle:1,pressStyle:1,focusStyle:1,selectedStyle:1,disabledStyle:1,placeholderStyle:1},I.isState=function(e,t,i){return function(s,r,n){let o=r.states[s];if(!o&&n){const a=Tr(r,n);a&&(o=a.states[s])}return!!o}(e,t,i)},I.isSelected=function(e,t){return Fh("selected",e,t)},I.isDisabled=function(e,t){return Fh("disabled",e,t)},I.isFocus=function(e,t){return Ys("isFocus",e,t)},I.isHover=function(e,t){return Ys("isHover",e,t)},I.isPress=function(e,t){return Ys("isPress",e,t)},I.isPlacehold=function(e,t){return e.__.__isPlacehold},I.isDrag=function(e,t){return Ys("isDrag",e,t)},I.setStyleName=function(e,t,i){i?oo(e,t,e[t]):ao(e,t,e[t])},I.set=function(e,t){const i=e.states[t];i?oo(e,t,i):ao(e,t,i)},I.getStyle=ro,I.updateStyle=So,I.updateEventStyle=function(e,t){switch(t){case R.ENTER:fr(e,"hoverStyle");break;case R.LEAVE:gr(e,"hoverStyle");break;case R.DOWN:fr(e,"pressStyle");break;case R.UP:gr(e,"pressStyle")}};const Ih=m.prototype;m.addAttr("selected",!1,Dn,"selectedStyle"),m.addAttr("disabled",!1,Dn,"disabledStyle"),m.addAttr("states",{},Ye),m.addAttr("state","",Dn),m.addAttr("normalStyle",void 0,kt),m.addAttr("hoverStyle",void 0,Ye),m.addAttr("pressStyle",void 0,Ye),m.addAttr("focusStyle",void 0,Ye),m.addAttr("selectedStyle",void 0,Ye),m.addAttr("disabledStyle",void 0,Ye),m.addAttr("placeholderStyle",void 0,Ye),m.addAttr("button",!1,kt),Ih.focus=function(e=!0){this.waitLeafer(()=>{let{focusData:t}=this.app.interaction;e?(t&&t.focus(!1),t=this):t=null,this.app.interaction.focusData=t,e?fr(this,"focusStyle"):gr(this,"focusStyle")})},Ih.updateState=function(){I.updateStyle(this,void 0,"in")};const Wh=j.prototype,$n="text";ei(Wh,$n,Object.assign(Object.assign({},mo(Wh,$n)),{set(e){const t=this,i=t.text;t.__setAttr($n,e)&&(Oe(t),t.placeholderStyle&&t.placeholder&&(i===""||e==="")&&(t.__layout.stateStyleChanged=!0))}}));const Tg={transparent:"FFF0",aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"0FF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"0",blanchedalmond:"FFEBCD",blue:"00F",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"0FF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9",darkgreen:"006400",darkgrey:"A9",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"69",dimgrey:"69",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"F0F",gainsboro:"DC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"80",green:"008000",greenyellow:"ADFF2F",grey:"80",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3",lightgreen:"90EE90",lightgrey:"D3",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"789",lightslategrey:"789",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370DB",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"D87093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",rebeccapurple:"639",red:"F00",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"F",whitesmoke:"F5",yellow:"FF0",yellowgreen:"9ACD32"},zh=/^rgb\((\d+),\s*(\d+),\s*(\d+)/i,Nh=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*\.?\d+)/i,jh=/^hsl\((\d+),\s*(\d+)%\s*,\s*(\d+)%/i,Yh=/^hsla\((\d+),\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d*\.?\d+)/i,lt=parseInt,Ee=parseFloat,{round:Mn}=Math;let Fn={},In=0;function Xh(e){let t,i,s,r=1;switch(e.length){case 9:t=lt(e.slice(1,3),16),i=lt(e.slice(3,5),16),s=lt(e.slice(5,7),16),r=lt(e.slice(7,9),16)/255;break;case 7:t=lt(e.slice(1,3),16),i=lt(e.slice(3,5),16),s=lt(e.slice(5,7),16);break;case 5:t=lt(e[1]+e[1],16),i=lt(e[2]+e[2],16),s=lt(e[3]+e[3],16),r=lt(e[4]+e[4],16)/255;break;case 4:t=lt(e[1]+e[1],16),i=lt(e[2]+e[2],16),s=lt(e[3]+e[3],16);break;case 3:t=i=s=lt(e[1]+e[2],16);break;case 2:t=i=s=lt(e[1]+e[1],16)}return{r:t,g:i,b:s,a:r}}const Pg=1/6,Ag=.5,Hh=2/3,Gh=1/3;function Wn(e,t,i){return i<0?i++:i>1&&i--,i<Pg?e+6*(t-e)*i:i<Ag?t:i<Hh?e+(t-e)*(Hh-i)*6:e}function Uh(e,t,i,s=1){let r,n,o;if(e/=360,i/=100,(t/=100)===0)r=n=o=i;else{let a=i<.5?i*(1+t):i+t-i*t,h=2*i-a;r=Wn(h,a,e+Gh),n=Wn(h,a,e),o=Wn(h,a,e-Gh)}return{r:Mn(255*r),g:Mn(255*n),b:Mn(255*o),a:s}}gt.add("color"),Mt.object=function(e,t){let i,s=t!==void 0&&t!==1;if(typeof e=="string"){const r=Fn[e];if(r)i=Object.assign({},r);else{switch(e[0]){case"#":i=Xh(e);break;case"R":case"r":e[4]==="("&&Nh.test(e)?i=function(n){const o=Nh.exec(n);return{r:lt(o[1]),g:lt(o[2]),b:lt(o[3]),a:Ee(o[4])}}(e):e[3]==="("&&zh.test(e)&&(i=function(n){const o=zh.exec(n);return{r:lt(o[1]),g:lt(o[2]),b:lt(o[3]),a:1}}(e));break;case"H":case"h":e[4]==="("&&Yh.test(e)?i=function(n){const o=Yh.exec(n);return Uh(Ee(o[1]),Ee(o[2]),Ee(o[3]),Ee(o[4]))}(e):e[3]==="("&&jh.test(e)&&(i=function(n){const o=jh.exec(n);return Uh(Ee(o[1]),Ee(o[2]),Ee(o[3]),1)}(e))}if(!i){const n=Tg[e.toLowerCase()];n&&(i=Xh("#"+n))}i&&(In++,In>1e4&&(Fn={},In=0),Fn[e]=Object.assign({},i))}}else typeof e=="object"&&(e.a===void 0&&(e.a=1),s&&(e=Object.assign({},e)),i=e);return i||(i={r:255,g:255,b:255,a:1}),s&&(i.a*=t),i};function Pt(e,t,i,s){var r,n=arguments.length,o=n<3?t:s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}const{cos:Vh,sin:Ji,pow:Bt,sqrt:Xs,abs:Og,ceil:Lg,floor:Dg,round:$g,PI:ar}=Math,Hs=5*ar,Gs=1.70158,Us=2.5949095,Vs=7.5625,mi=2.75;function qs(e){return t=>Bt(t,e)}function Ks(e){return t=>1-Bt(1-t,e)}function Qs(e){return t=>t<.5?.5*Bt(2*t,e):1-.5*Bt(2-2*t,e)}function Js(e){return e<1/mi?Vs*e*e:e<2/mi?Vs*(e-=1.5/mi)*e+.75:e<2.5/mi?Vs*(e-=2.25/mi)*e+.9375:Vs*(e-=2.625/mi)*e+.984375}function Zi(e,t,i,s){const r={};return n=>{const o=~~(1e4*n),a=r[o];if(a)return a;let h,l,c,d=n;for(let p=0;p<8&&(h=1-d,c=qh(d,e,i)-n,l=3*h*h*e+6*h*d*(i-e)+3*d*d*(1-i),!(Og(l)<1e-6));p++)d-=c/l;return r[o]=qh(d,t,s)}}function qh(e,t,i){const s=1-e;return 3*s*s*e*t+3*s*e*e*i+e*e*e}const yr={get(e){const{list:t}=yr;return typeof e=="string"?t[e||"ease"]:typeof e=="object"?t[e.name].apply(t,e.value instanceof Array?e.value:[e.value]):t.ease},register(e,t){yr.list[e]=t},list:{linear:e=>e,ease:Zi(.25,.1,.25,1),"ease-in":Zi(.42,0,1,1),"ease-out":Zi(0,0,.58,1),"ease-in-out":Zi(.42,0,.58,1),"sine-in":e=>1-Vh(e*ar*.5),"sine-out":e=>Ji(e*ar*.5),"sine-in-out":e=>.5*(1-Vh(e*ar)),"quad-in":qs(2),"quad-out":Ks(2),"quad-in-out":Qs(2),"cubic-in":qs(3),"cubic-out":Ks(3),"cubic-in-out":Qs(3),"quart-in":qs(4),"quart-out":Ks(4),"quart-in-out":Qs(4),"quint-in":qs(5),"quint-out":Ks(5),"quint-in-out":Qs(5),"expo-in":e=>e?Bt(2,10*e-10):0,"expo-out":e=>e===1?1:1-Bt(2,10*-e),"expo-in-out":e=>e===0||e===1?e:e<.5?.5*Bt(2,2*e*10-10):.5*(2-Bt(2,10-2*e*10)),"circ-in":e=>1-Xs(1-Bt(e,2)),"circ-out":e=>Xs(1-Bt(e-1,2)),"circ-in-out":e=>e<.5?.5*(1-Xs(1-Bt(2*e,2))):.5*(Xs(1-Bt(2-2*e,2))+1),"back-in":e=>((Gs+1)*e-Gs)*e*e,"back-out":e=>(e-=1)*e*((Gs+1)*e+Gs)+1,"back-in-out":e=>e<.5?(e*=2)*e*((Us+1)*e-Us)*.5:.5*((e=2*e-2)*e*((Us+1)*e+Us)+2),"elastic-in":e=>e===0||e===1?e:-Bt(2,10*(e-1))*Ji((e-1.1)*Hs),"elastic-out":e=>e===0||e===1?e:Bt(2,-10*e)*Ji((e-.1)*Hs)+1,"elastic-in-out":e=>e===0||e===1?e:e<.5?-Bt(2,10*((e*=2)-1))*Ji((e-1.1)*Hs)*.5:Bt(2,10*(1-(e*=2)))*Ji((e-1.1)*Hs)*.5+1,"bounce-in":e=>1-Js(1-e),"bounce-out":Js,"bounce-in-out":e=>e<.5?.5*(1-Js(1-2*e)):.5*(1+Js(2*e-1)),"cubic-bezier":Zi,steps:function(e,t="floor"){return i=>(t==="floor"?Dg(i*e):t==="ceil"?Lg(i*e):$g(i*e))/e}}};function jt(e){return(t,i)=>{Object.defineProperty(t,i,{get(){const s=this.config&&this.config[i];return s===void 0?e:s},set(s){this.config||(this.config={}),this.config[i]=s}})}}let Ct=class{};Ct.CREATED="created",Ct.PLAY="play",Ct.PAUSE="pause",Ct.STOP="stop",Ct.SEEK="seek",Ct.UPDATE="update",Ct.COMPLETED="completed";let mt=class extends Fl{get endingStyle(){return this.realEnding==="from"?this.fromStyle:this.toStyle}get started(){return!!this.requestAnimateTime}get completed(){return this.time>=this.duration&&!this.started}get frame(){return this.frames[this.nowIndex]}get frameTotalTime(){return this.frame.totalTime||this.frame.duration||0}get nowReverse(){return(this.mainReverse?1:0)+(this.frameReverse?1:0)==1}get realEnding(){let t;const{ending:i,reverse:s,swing:r,loop:n}=this;return i==="from"?t=0:i==="to"?t=1:(t=s?0:1,r&&n&&typeof n=="number"&&(t+=n-1)),t%2?"to":"from"}constructor(t,i,s,r){super(),i&&(i.keyframes?(s=i,i=i.keyframes):i.style&&(s=i,i=i.style)),this.init(t,i,s,r)}init(t,i,s,r){switch(this.target=t,(r||this.isTemp)&&(this.isTemp=r),typeof s){case"number":this.config={duration:s};break;case"string":this.config={easing:s};break;case"object":this.config=s,s.event&&(this.event=s.event)}this.keyframes=i instanceof Array?i:i?[i]:[];const{easing:n,attrs:o}=this;this.easingFn=yr.get(n),(o||this.attrsMap)&&(this.attrsMap=o?o.reduce((a,h)=>(a[h]=!0,a),{}):void 0),this.frames=[],this.create(),this.autoplay&&this.frames.length&&(this.timer=setTimeout(()=>{this.timer=0,this.play()},0))}play(){this.destroyed||(this.running=!0,this.started?this.timer||this.requestAnimate():(this.clearTimer(),this.start()),this.emit(Ct.PLAY,this))}pause(){this.destroyed||(this.running=!1,this.clearTimer(),this.emit(Ct.PAUSE,this))}stop(){this.destroyed||(this.complete(),this.emit(Ct.STOP,this))}seek(t){this.destroyed||(typeof t=="object"&&(t=Jn.number(t,this.duration)),t&&(t/=this.speed),(!this.started||t<this.time)&&this.start(!0),this.time=t,this.animate(0,!0),this.clearTimer(()=>this.requestAnimate()),this.emit(Ct.SEEK,this))}kill(t=!0,i){this.killStyle=i,this.destroy(t)}create(){const{target:t,frames:i,keyframes:s,config:r}=this,{length:n}=s,o=!(n>1)||this.join;let a,h,l,c,d,p=0,u=0;n>1&&(this.fromStyle={},this.toStyle={});for(let f=0;f<n;f++){if(h=s[f],c=h.style||h,a||(a=o?t:c),l={style:c,beforeStyle:{}},d=1,h.style){const{duration:g,autoDuration:w,delay:v,autoDelay:y,easing:b,swing:B,loop:k}=h;B&&(l.swing=typeof B=="number"?B:2,d=2*l.swing-1),k&&(l.loop=d=typeof k=="number"?k:2),g?(l.duration=g,p+=g*d,v&&(l.totalTime=g+v)):w&&(l.autoDuration=w,u+=w*d),v?(l.delay=v,p+=v*d):y&&(l.autoDelay=y,u+=y*d),b&&(l.easingFn=yr.get(b))}if(l.autoDuration||l.duration!==void 0||(n>1?f>0||o?u+=d:l.duration=0:l.duration=this.duration),n>1)this.setBefore(l,c,a);else{for(let g in c)l.beforeStyle[g]=t[g];this.fromStyle=l.beforeStyle,this.toStyle=l.style}a=c,i.push(l)}u?((this.duration<=p||!r||!r.duration)&&this.changeDuration(p+.2*u),this.allocateTime((this.duration-p)/u)):p&&this.changeDuration(p),this.emit(Ct.CREATED,this)}changeDuration(t){const{config:i}=this;this.config=i?Object.assign(Object.assign({},i),{duration:t}):{duration:t}}setBefore(t,i,s){const{fromStyle:r,toStyle:n,target:o}=this;for(let a in i)r[a]===void 0&&(r[a]=n[a]=i===s?s[a]:o[a]),t.beforeStyle[a]=s[a]===void 0?n[a]:s[a],n[a]=i[a]}allocateTime(t){let i,{frames:s}=this,{length:r}=s;for(let n=0;n<r;n++)i=s[n],i.duration===void 0&&(i.duration=i.autoDuration?t*i.autoDuration:t),i.totalTime||(i.autoDelay&&(i.delay=i.autoDelay*t),i.delay&&(i.totalTime=i.duration+i.delay))}requestAnimate(){this.requestAnimateTime=Date.now(),E.requestRender(this.animate.bind(this))}animate(t,i){if(!i){if(!this.running)return;this.time+=(Date.now()-this.requestAnimateTime)/1e3}const{duration:s}=this,r=this.time*this.speed;if(r<s){for(;r-this.playedTotalTime>this.frameTotalTime;)this.transition(1),this.mainReverse?this.reverseNextFrame():this.nextFrame();const n=this.nowReverse?0:this.frame.delay||0,o=r-this.playedTotalTime-n,a=this.frame.duration;if(o>a)this.transition(1);else if(o>=0){const h=a?o/a:1;this.transition(this.frame.easingFn?this.frame.easingFn(h):this.easingFn(h))}}else this.end();if(!i)if(r<s)this.requestAnimate();else{const{loop:n,loopDelay:o,swing:a}=this;if((n!==!1||a)&&(this.looped?this.looped++:this.looped=1,this.needLoop(this.looped,n,a)))return a&&(this.mainReverse=!this.mainReverse),void(o?this.timer=setTimeout(()=>{this.timer=0,this.begin()},o/this.speed*1e3):this.begin());this.complete()}}start(t){this.requestAnimateTime=1;const{reverse:i}=this;if((i||this.mainReverse)&&(this.mainReverse=i),this.looped&&(this.looped=0),t)this.begin(!0);else{const{delay:s}=this;s?this.timer=setTimeout(()=>{this.timer=0,this.begin()},s/this.speed*1e3):this.begin()}}begin(t){this.playedTotalTime=this.time=0,this.mainReverse?this.setTo():this.setFrom(),t||this.requestAnimate()}end(){this.mainReverse?this.setFrom():this.setTo()}complete(){this.requestAnimateTime=0,this.running=!1;const{endingStyle:t,killStyle:i}=this,s=i?{}:t;if(i)for(let r in t)r in i||(s[r]=t[r]);this.setStyle(s),this.clearTimer(),this.emit(Ct.COMPLETED,this)}setFrom(){this.nowIndex=0,this.setStyle(this.fromStyle)}setTo(){this.nowIndex=this.frames.length-1,this.setStyle(this.toStyle)}nextFrame(){if(this.needLoopFrame())return this.increaseTime();this.nowIndex+1>=this.frames.length||(this.increaseTime(),this.nowIndex++)}reverseNextFrame(){if(this.needLoopFrame())return this.increaseTime();this.nowIndex-1<0||(this.increaseTime(),this.nowIndex--)}transition(t){const{style:i,beforeStyle:s}=this.frame,r=this.nowReverse?i:s,n=this.nowReverse?s:i;if(t===0)this.setStyle(r);else if(t===1)this.setStyle(n);else{const{attrsMap:o,target:a}=this;let{betweenStyle:h}=this.frame;h||(h=this.frame.betweenStyle={}),Ze.setBetweenStyle(h,r,n,i,t,a,o),this.setStyle(h)}this.emit(Ct.UPDATE,this)}setStyle(t){const{target:i}=this;i&&t&&(this.style=t,i.__?i.set(t,!!this.isTemp&&"temp"):Object.assign(i,t))}increaseTime(){this.playedTotalTime+=this.frameTotalTime}needLoop(t,i,s){return!(this.needStopLoop(t,i)||this.needStopLoop(t,s,!0))}needStopLoop(t,i,s){return typeof i=="number"&&(!i||t>=(s?2*i-1:i))}needLoopFrame(){const{loop:t,swing:i}=this.frame;if(t||i){if(this.frameLooped?this.frameLooped++:this.frameLooped=1,i&&(this.frameReverse=!this.frameReverse),this.needLoop(this.frameLooped,t,i))return!0;this.frameLooped=this.frameReverse=void 0}return!1}clearTimer(t){this.timer&&(clearTimeout(this.timer),this.timer=0,t&&t())}destroy(t){this.destroyed||(super.destroy(),t&&!this.completed?this.stop():this.pause(),this.target=this.config=this.frames=this.fromStyle=this.toStyle=this.style=this.killStyle=null,this.destroyed=!0)}};Pt([jt("ease")],mt.prototype,"easing",void 0),Pt([jt(0)],mt.prototype,"delay",void 0),Pt([jt(.2)],mt.prototype,"duration",void 0),Pt([jt("auto")],mt.prototype,"ending",void 0),Pt([jt(!1)],mt.prototype,"reverse",void 0),Pt([jt(!1)],mt.prototype,"swing",void 0),Pt([jt(!1)],mt.prototype,"loop",void 0),Pt([jt(0)],mt.prototype,"loopDelay",void 0),Pt([jt(1)],mt.prototype,"speed",void 0),Pt([jt(!0)],mt.prototype,"autoplay",void 0),Pt([jt()],mt.prototype,"join",void 0),Pt([jt()],mt.prototype,"attrs",void 0),mt=Pt([Dt(wo)],mt);let ki=class extends mt{get completed(){return this.list.every(t=>t.completed)}get endingStyle(){return this._endingStyle}constructor(t,i,s){super(t,null),this.list=[],this.updateList(i,s)}updateList(t,i){this.fromStyle={},this.toStyle={},this._endingStyle={},t||(t=this.list.filter(s=>{const{completed:r}=s;return r&&s.destroy(),!r})),this.list=t.map(s=>{const r=s.target?s:new mt(this.target,s,i);return Object.assign(this.fromStyle,r.fromStyle),Object.assign(this.toStyle,r.toStyle),Object.assign(this._endingStyle,r.endingStyle),r})}play(){this.each(t=>t.play())}pause(){this.each(t=>t.pause())}stop(){this.each(t=>t.stop())}seek(t){this.each(i=>i.seek(t))}kill(t,i){this.each(s=>s.kill(t,i)),this.destroy()}each(t){this.list.forEach(t)}destroy(t){const{list:i}=this;i.length&&(this.each(s=>s.destroy(t)),i.length=0)}};ki=Pt([Dt(wo)],ki);const{round:Mg}=Math,{fourNumber:Kh}=yt,Fg={fill:Jh,stroke:Jh,cornerRadius:(e,t,i)=>typeof e=="number"&&typeof t=="number"?Ot(e,t,i):(e=Kh(e),t=Kh(t),e.map((s,r)=>Ot(s,t[r],i))),text(e,t,i){if(typeof e=="string"&&typeof t=="string"){const s=e.length,r=t.length,n=Ot(s,r,i,1);return s<r?t.substring(0,n):e.substring(0,n)}return typeof e=="number"||typeof t=="number"?yt.float(Ot(e,t,i),Math.max(Qh(e),Qh(t))):t},boxStyle(e,t,i,s){e||(e={}),t||(t={});const r=Object.assign(Object.assign({},e),t);return Ze.setBetweenStyle(r,e,t,r,i,s),r},shadow:Zh,innerShadow:Zh},Ig={value:function(e,t,i){const s=typeof e=="number",r=typeof t=="number";return s&&r?e+(t-e)*i:r||s?Ot(e,t,i):e},number:Ot,color:Eo,setBetweenStyle:function(e,t,i,s,r,n,o){let a,h,l;const{list:c,value:d}=Ze;for(let p in s)o&&!o[p]||(a=t[p],h=i[p],l=c[p]||d,a!==h&&(e[p]=l(a,h,r,n)))}};function Qh(e){const t=String(e).split(".")[1];return t?t.length:0}function Ot(e,t,i,s){e||(e=0),t||(t=0);const r=e+(t-e)*i;return s?Mg(r):r}function Eo(e,t,i){e=Mt.object(e),t=Mt.object(t);const s=Ot(e.r,t.r,i,1)+","+Ot(e.g,t.g,i,1)+","+Ot(e.b,t.b,i,1),r=Ot(e.a,t.a,i);return r===1?"rgb("+s+")":"rgba("+s+","+r+")"}function Jh(e,t,i){return typeof e=="string"&&typeof t=="string"?Eo(e,t,i):t}function Zh(e,t,i){return e instanceof Array||t instanceof Array?t:(t=t||{},{x:Ot((e=e||{}).x,t.x,i),y:Ot(e.y,t.y,i),blur:Ot(e.blur,t.blur,i),spread:Ot(e.spread,t.spread,i),color:Eo(e.color||"#FFFFFF00",t.color||"#FFFFFF00",i),visible:t.visible,blendMode:t.blendMode,box:t.box||e.box})}gt.add("animate","color"),I.canAnimate=!0,Object.assign(Ze.list,Fg),Object.assign(Ze,Ig);const zn=m.prototype;m.addAttr("animation",void 0,function(e){return nt(e,t=>({set(i){this.__setAttr(t,i),this.leafer&&(this.killAnimate("animation"),i&&this.animate(i,void 0,"animation"))}}))}),m.addAttr("animationOut",void 0,kt),m.addAttr("transition",!0,kt),m.addAttr("transitionOut",void 0,kt),zn.animate=function(e,t,i,s){if(e===void 0)return this.__animate;let r=e instanceof Array&&!t&&i?new ki(this,e,s):new mt(this,e,t,s);this.killAnimate(i,r.toStyle);const n=this.__animate;return n&&(r instanceof ki?r.list.unshift(n):r=new ki(this,[n,r])),this.__animate=r},zn.killAnimate=function(e,t){const i=this.__animate;if(i){let s=!1;if(t&&!i.completed){i instanceof ki&&i.updateList();const{toStyle:r}=i;for(let n in t)if(n in r){s=!0;break}}else s=!0;s&&(i.kill(!0,t),this.__animate=null)}},zn.__runAnimation=function(e,t){this.animate(e==="in"?this.animation:this.animationOut,void 0,"animation"),t&&this.__animate.on(Ct.COMPLETED,t)};const{M:Wg,L:zg,C:Ng,Q:jg,Z:Yg,N:Xg,D:Hg,X:Gg,G:tl,F:el,O:Ug,P:Vg,U:qg}=Gt,To={scale(e,t,i){if(!e)return;let s,r=0,n=e.length;for(;r<n;)switch(s=e[r],s){case Wg:case zg:qt(e,t,i,r,1),r+=3;break;case Ng:qt(e,t,i,r,3),r+=7;break;case jg:qt(e,t,i,r,2),r+=5;break;case Yg:r+=1;break;case Xg:qt(e,t,i,r,2),r+=5;break;case Hg:qt(e,t,i,r,2),r+=9;break;case Gg:qt(e,t,i,r,2),r+=6;break;case tl:qt(e,t,i,r,2),r+=9;break;case el:qt(e,t,i,r,2),r+=5;break;case Ug:e[r]=tl,e.splice(r+4,0,e[r+3],0),qt(e,t,i,r,2),r+=9,n+=2;break;case Vg:e[r]=el,e.splice(r+4,0,e[r+3]),qt(e,t,i,r,2),r+=5,n+=1;break;case qg:qt(e,t,i,r,2),r+=6}},scalePoints(e,t,i,s,r){for(let n=r?s+1:0,o=r?n+2*r:e.length;n<o;n+=2)e[n]*=t,e[n+1]*=i}},{scalePoints:qt}=To,Nn=L.get(),{topLeft:Kg,top:Qg,topRight:Jg,right:Zg,bottom:ty,left:ey}=dr;function Zs(e,t,i){e.pathInputed?hr(e,t,i):(t!==1&&(e.width*=t),i!==1&&(e.height*=i))}function iy(e,t,i,s){let r=t;if(s!==void 0){const a=e.__layout;let{width:h,height:l}=a.boxBounds;switch(h*=i-t,l*=t-i,s){case Qg:case ty:r=i,a.affectScaleOrRotation?e.moveInner(-h/2,0):e.x-=h/2;break;case ey:case Zg:a.affectScaleOrRotation?e.moveInner(0,-l/2):e.y-=l/2;break;case Kg:case Jg:a.affectScaleOrRotation?e.moveInner(0,-l):e.y-=l}}e.fontSize*=r;const n=e.__,{padding:o}=n;o&&(e.padding=o instanceof Array?o.map(a=>a*r):o*r),n.__autoWidth||(e.width*=r),n.__autoHeight||(e.height*=r)}function hr(e,t,i){To.scale(e.__.path,t,i),e.path=e.__.path}function il(e,t,i){const{points:s}=e;typeof s[0]=="object"?s.forEach(r=>{r.x*=t,r.y*=i}):To.scalePoints(s,t,i),e.points=s}function sl(e,t,i){const{children:s}=e;for(let r=0;r<s.length;r++)Nn.a=t,Nn.d=i,s[r].transform(Nn,!0)}const tr=Qe.prototype;tr.scaleResize=function(e,t=e,i){const s=this;i||s.editConfig&&s.editConfig.editSize==="scale"?(s.scaleX*=e,s.scaleY*=t):(e<0&&(s.scaleX*=-1,e=-e),t<0&&(s.scaleY*=-1,t=-t),this.__scaleResize(e,t))},tr.__scaleResize=function(e,t){Zs(this,e,t)},tr.resizeWidth=function(e){const t=e/this.getBounds("box","local").width||1;this.scaleOf(this.__layout.boxBounds,t,this.__.lockRatio?t:1,!0)},tr.resizeHeight=function(e){const t=e/this.getBounds("box","local").height||1;this.scaleOf(this.__layout.boxBounds,this.__.lockRatio?t:1,t,!0)},j.prototype.__scaleResize=function(e,t){const{app:i,editConfig:s}=this,r=i&&i.editor,n=r&&r.dragPoint,{__autoWidth:o,__autoHeight:a,textAlign:h,verticalAlign:l}=this.__,{boxBounds:c}=this.__layout;o&&h!=="left"&&e!==1&&(this.x+=c.x),a&&l!=="top"&&t!==1&&(this.y+=c.y),this.__.resizeFontSize||s&&s.editSize==="font-size"||n&&r.mergedConfig.editSize==="font-size"?iy(this,e,t,n&&n.direction):Zs(this,e,t)},xi.prototype.__scaleResize=function(e,t){hr(this,e,t)},ne.prototype.__scaleResize=function(e,t){this.pathInputed?hr(this,e,t):this.points?il(this,e,t):this.width*=e},ye.prototype.__scaleResize=function(e,t){this.pathInputed?hr(this,e,t):this.points?il(this,e,t):Zs(this,e,t)},$t.prototype.__scaleResize=function(e,t){sl(this,e,t)},at.prototype.__scaleResize=function(e,t){const{resizeChildren:i,__autoSize:s}=this.__;s&&i||Zs(this,e,t),i&&sl(this,e,t)},gt.add("resize");function jn(e,t,i,s){var r,n=arguments.length,o=n<3?t:s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}let er=class extends at{get __tag(){return"Flow"}constructor(e){super(e),this.__hasAutoLayout=!0}};jn([vt(class extends vo{})],er.prototype,"__",void 0),jn([ur("x")],er.prototype,"flow",void 0),er=jn([xt()],er);const Yn={},id={"top-left":"from",top:"center","top-right":"to",right:"to","bottom-right":"to",bottom:"center","bottom-left":"from",left:"from",center:"center","baseline-left":"from","baseline-center":"center","baseline-right":"to"},sd={"top-left":"from",top:"from","top-right":"from",right:"center","bottom-right":"to",bottom:"to","bottom-left":"to",left:"center",center:"center","baseline-left":"to","baseline-center":"to","baseline-right":"to"};function mr(e,t,i){const s=e.__,{contentBounds:r}=e.__layout;wl.toPoint(i,t,r,Yn),t.x=s.__autoWidth?r.x:Yn.x,t.y=s.__autoHeight?r.y:Yn.y}const{move:sy}=$;function rl(e,t,i,s,r,n){const{children:o}=e;let a,h,{x:l,start:c}=t,d=s;l+=i;for(let p=0,u=t.count;p<u;p++)a=o[n?c-p:c+p],a.__.inFlow&&a.__.visible!==0?(h=a.__flowBounds,r!=="from"&&(d=s+(t.height-h.height)/(r==="center"?2:1)),sy(a,l-h.x,d-h.y),l+=h.width+t.gap):u++}function wr(e,t,i){const s=i==="width"?"height":"width";e[i]=Math.max(e[i],t[i]),e[s]+=e.count?t[s]+e.gap:t[s],e.list.push(t),e.count++}const rt={};function rd(e,t){const{gap:i,flowAlign:s,flowWrap:r,__autoWidth:n,__autoHeight:o}=e.__,a=r&&(t?!n:!o);return typeof i=="object"?(rt.xGap=i.x||0,rt.yGap=i.y||0):rt.xGap=rt.yGap=i,rt.isAutoXGap=typeof rt.xGap=="string"&&!n,rt.isAutoYGap=typeof rt.yGap=="string"&&!o,rt.complex=a||s!=="top-left"||e.__hasGrow||rt.isAutoXGap||rt.isAutoYGap,rt.wrap=a,rt.complex&&(rt.isFitXGap=rt.xGap==="fit"&&!n,rt.isFitYGap=rt.yGap==="fit"&&!o,typeof s=="object"?(rt.contentAlign=s.content||"top-left",rt.rowXAlign=s.x||"from",rt.rowYAlign=s.y||"from"):(rt.contentAlign=s,rt.rowXAlign=id[s],rt.rowYAlign=sd[s])),rt}function vr(e,t){return{x:0,y:0,width:0,height:0,gap:t,start:e,count:0,grow:0}}function Ci(e,t,i,s){const{count:r}=e;r>1&&(i>e[t]||s)&&(e.gap=(i-e[t])/(r-1),e[t]=i)}function nd(e,t){return t==="box"?e.__local:e.__layout.localStrokeBounds}const{within:ry}=yt;function nl(e,t,i,s){let r,n,o,a=0,h=t.hasRangeSize&&[],{grow:l,start:c}=t;const d=(i-t.width)/l,{children:p}=e;if(!(d<=0)){t.width=i;for(let u=0,f=t.count;u<f;u++)r=p[s?c-u:c+u],r.__.inFlow&&r.__.visible!==0?(n=r.__widthGrow)&&(o=ho(r,r.__flowBounds,d*n),o?(a+=o,l-=n):h&&(r.__.widthRange?h.unshift(r):h.push(r))):f++;a&&function(u,f,g){let w,v,y,b;u.forEach(B=>{w=B.__widthGrow,v=f/g*w,b=ho(B,y=B.__flowBounds,y.width+v),f-=v-b,g-=w})}(h,a,l)}}function ho(e,t,i){const{widthRange:s,lockRatio:r}=e.__,n=s?ry(i,s):i,o=n/t.width;return e.scaleResize(o,r?o:1),t.width=n,i-n}const{within:ny}=yt;function ol(e,t,i,s){let r,n,o,a=0,h=t.hasRangeSize&&[],{grow:l,start:c}=t;const d=(i-t.height)/l,{children:p}=e;if(!(d<=0)){t.height=i;for(let u=0,f=t.count;u<f;u++)r=p[s?c-u:c+u],r.__.inFlow&&r.__.visible!==0?(n=r.__heightGrow)&&(o=lo(r,r.__flowBounds,d*n),o?(a+=o,l-=n):h&&(r.__.heightRange?h.unshift(r):h.push(r))):f++;a&&function(u,f,g){let w,v,y,b;u.forEach(B=>{w=B.__heightGrow,v=f/g*w,b=lo(B,y=B.__flowBounds,y.height+v),f-=v-b,g-=w})}(h,a,l)}}function lo(e,t,i){const{heightRange:s,lockRatio:r}=e.__,n=s?ny(i,s):i,o=n/t.height;return e.scaleResize(r?o:1,o),t.height=n,i-n}const{move:oy}=$;function al(e,t){const i="width",{children:s,itemBox:r}=e,n=rd(e,!0),{complex:o,wrap:a,xGap:h,yGap:l,isAutoXGap:c,isFitXGap:d}=n;if(!s.length)return;const p=a&&{x:0,y:0,width:0,height:0,gap:0,count:0,list:[]},u=c?0:h;let f,g,w,v,y,{x:b,y:B,width:k,height:P}=e.__layout.contentBounds;for(let x=0,O=s.length;x<O;x++)f=s[v=t?O-1-x:x],f.__.inFlow&&f.__.visible!==0&&(g=nd(f,r),o?(f.__flowBounds=g,y||(y=vr(v,u)),a&&y.count&&y.width+g.width>k&&(y.grow?nl(e,y,k,t):c&&Ci(y,i,k,d),wr(p,y,i),y=vr(v,u)),w=g.width,f.__widthGrow&&(y.grow+=f.__widthGrow,w=0,f.__.widthRange&&(y.hasRangeSize=!0)),f.__heightGrow&&lo(f,g,P),y.width+=y.count?w+u:w,y.height=Math.max(y.height,g.height),y.count++):(oy(f,b-g.x,B-g.y),b+=g.width+u));if(o&&y){const{isAutoYGap:x,isFitYGap:O,contentAlign:Y,rowXAlign:J,rowYAlign:K}=n;y.count&&(y.grow?nl(e,y,k,t):c&&Ci(y,i,k,d),a&&wr(p,y,i)),a?(x?Ci(p,"height",P,O):p.height+=(p.gap=l)*(p.list.length-1),function(H,A,G,W){mr(H,A,G);const{list:ot}=A;if(ot.length>1&&(W||(W=id[G]),W!=="from")){let et;for(let ut=0,Ft=ot.length;ut<Ft;ut++)et=ot[ut],et.x=A.width-et.width,W==="center"&&(et.x/=2)}}(e,p,Y,J),function(H,A,G,W){const{list:ot}=A,et=H.__.flowWrap==="reverse";let ut,{x:Ft,y:$e}=A;for(let de=0,Ai=ot.length;de<Ai;de++)ut=ot[et?Ai-1-de:de],rl(H,ut,Ft,$e,G,W),$e+=ut.height+A.gap}(e,p,K,t)):(mr(e,y,Y),rl(e,y,0,y.y,K,t))}}const{move:ay}=$;function hl(e,t,i,s,r,n){const{children:o}=e;let a,h,{y:l,start:c}=t,d=i;l+=s;for(let p=0,u=t.count;p<u;p++)a=o[n?c-p:c+p],a.__.inFlow&&a.__.visible!==0?(h=a.__flowBounds,r!=="from"&&(d=i+(t.width-h.width)/(r==="center"?2:1)),ay(a,d-h.x,l-h.y),l+=h.height+t.gap):u++}const{move:hy}=$;function ll(e,t){const i="height",{children:s,itemBox:r}=e,n=rd(e,!1),{complex:o,wrap:a,xGap:h,yGap:l,isAutoYGap:c,isFitYGap:d}=n;if(!s.length)return;const p=a&&{x:0,y:0,width:0,height:0,gap:0,count:0,list:[]},u=c?0:l;let f,g,w,v,y,{x:b,y:B,width:k,height:P}=e.__layout.contentBounds;for(let x=0,O=s.length;x<O;x++)f=s[v=t?O-1-x:x],f.__.inFlow&&f.__.visible!==0&&(g=nd(f,r),o?(f.__flowBounds=g,y||(y=vr(v,u)),a&&y.count&&y.height+g.height>P&&(y.grow&&ol(e,y,P,t),c&&Ci(y,i,P,d),wr(p,y,i),y=vr(v,u)),w=g.height,f.__heightGrow&&(y.grow+=f.__heightGrow,w=0,f.__.heightRange&&(y.hasRangeSize=!0)),f.__widthGrow&&ho(f,g,k),y.height+=y.count?w+u:w,y.width=Math.max(y.width,g.width),y.count++):(hy(f,b-g.x,B-g.y),B+=g.height+u));if(o&&y){const{isAutoXGap:x,isFitXGap:O,contentAlign:Y,rowXAlign:J,rowYAlign:K}=n;y.count&&(y.grow&&ol(e,y,P,t),c&&Ci(y,i,P,d),a&&wr(p,y,i)),a?(x?Ci(p,"width",k,O):p.width+=(p.gap=h)*(p.list.length-1),function(H,A,G,W){mr(H,A,G);const{list:ot}=A;if(ot.length>1&&(W||(W=sd[G]),W!=="from")){let et;for(let ut=0,Ft=ot.length;ut<Ft;ut++)et=ot[ut],et.y=A.height-et.height,W==="center"&&(et.y/=2)}}(e,p,Y,K),function(H,A,G,W){const{list:ot}=A,et=H.__.flowWrap==="reverse";let ut,{x:Ft,y:$e}=A;for(let de=0,Ai=ot.length;de<Ai;de++)ut=ot[et?Ai-1-de:de],hl(H,ut,Ft,$e,G,W),Ft+=ut.width+A.gap}(e,p,J,t)):(mr(e,y,Y),hl(e,y,y.x,0,J,t))}}function dl(e){return nt(e,t=>({set(i){const s=typeof i=="number"?i:0;t==="autoWidth"?this.__widthGrow=s:this.__heightGrow=s,!s||this.parent&&this.parent.__hasGrow||this.waitParent(()=>{this.parent.__hasGrow=!0}),this.__setAttr(t,i)&&Oe(this)}}))}gt.add("flow","resize");const Xn=at.prototype,{__updateBoxBounds:ly}=$t.prototype;m.addAttr("flow",!1,ur),m.addAttr("gap",0,D),m.addAttr("flowAlign","top-left",D),m.addAttr("flowWrap",!1,D),m.addAttr("itemBox","box",D),m.addAttr("inFlow",!0,D),m.addAttr("autoWidth",void 0,dl),m.addAttr("autoHeight",void 0,dl),m.addAttr("autoBox",void 0,D);const{copyAndSpread:cl}=T;Xn.__updateFlowLayout=function(){const{leaferIsCreated:e,flow:t}=this;switch(e&&(this.leafer.created=!1),t){case"x":case!0:al(this);break;case"y":ll(this);break;case"x-reverse":al(this,!0);break;case"y-reverse":ll(this,!0)}e&&(this.leafer.created=!0)},Xn.__updateContentBounds=function(){const{padding:e}=this.__,t=this.__layout,i=t.contentBounds===t.boxBounds;e?(i&&t.shrinkContent(),cl(t.contentBounds,t.boxBounds,e,!0)):i||t.shrinkContentCancel()},Xn.__updateBoxBounds=function(e){const t=this.__;if(this.children.length&&!this.pathInputed){const{flow:i}=t;if(t.__autoSide){t.__hasSurface&&this.__extraUpdate(),i&&!e?this.__updateRectBoxBounds():ly.call(this);const{boxBounds:s}=this.__layout;t.__autoSize||(t.__autoWidth?(i||(s.width+=s.x,s.x=0),s.height=t.height,s.y=0):(i||(s.height+=s.y,s.y=0),s.width=t.width,s.x=0)),i&&e&&t.padding&&cl(s,s,t.padding,!1,t.__autoSize?null:t.__autoWidth?"width":"height"),this.__updateNaturalSize()}else this.__updateRectBoxBounds();i&&this.__updateContentBounds()}else this.__updateRectBoxBounds()};var q=(e=>(e.unopen="unopen",e.open="open",e.flag="flag",e.question="question",e))(q||{}),Ut=(e=>(e.GAME_OVER="game_over",e.RESTART="restart",e.PHONE_HANDLER="phone_handler",e.CHANGE_CONFIG="change_config",e))(Ut||{});const od=new xd;function Ti(e){var t;od.next(e),(t=e.ext)!=null&&t.disableAutoLogger||ts.event("sl-action",e)}const us=vd(od);function Po(e,t){var r,n,o,a,h,l;const{row:i,col:s}=t;return[(r=e[i-1])==null?void 0:r[s-1],(n=e[i-1])==null?void 0:n[s],(o=e[i-1])==null?void 0:o[s+1],e[i][s-1],e[i][s+1],(a=e[i+1])==null?void 0:a[s-1],(h=e[i+1])==null?void 0:h[s],(l=e[i+1])==null?void 0:l[s+1]].filter(Boolean)}function dy(e){const t=[];return[e.map((s,r)=>s.map((n,o)=>{n.type==="mine"&&t.push(`${r}-${o}`);const a={...n,row:r,col:o,mineCount:0,hasContent:!1},l=Po(e,a).filter(c=>c.type==="mine").length;return{...a,mineCount:l}})),t]}function cy(e,t,i){const s=()=>Math.random()-.5,r=new Array(i).fill(0).map(()=>({status:q.unopen,type:"mine"})).concat(Array.from({length:e*t-i},()=>({status:q.unopen,type:"number"}))).sort(s),n=Array.from({length:e},(o,a)=>r.slice(a*t,a*t+t)).sort(s);return dy(n)}function uy(e,t){const i=new Set;return t.forEach(s=>{Po(e,s).forEach(r=>{r.type==="number"&&r.status===q.unopen&&i.add(r)})}),i}function py(e,t){const i=t.filter(Ao);return uy(e,i)}const _y=async e=>new Promise(t=>setTimeout(t,e));async function*fy(e,t,i){let s=new Set(t);do s=py(e,[...s]),yield s,await _y(i);while(s.size)}function ul(e,t){return t.openBlock+=e.length,e.map(i=>{if(i.status=q.open,i.type==="mine")throw{custom:!0,msg:"game over"};return i})}async function ad(e,t,i,s){let r;if(typeof t=="number"&&typeof i=="number")r=[e[t][i]];else if(Array.isArray(t)&&typeof i=="object")s=i,r=t;else return;const n=s,{blockSize:o,leafer:a}=n;try{const h=ul(r,n);lr(a.children[0],h,o);const l=fy(e,r,100);for await(const c of l){const d=ul([...c],n);lr(a.children[0],d,o)}}catch(h){if(lr(a.children[0],r,o),co(!1),h.custom)throw h}}function hd(e,t){var i;e.state=t,(i=e.children)==null||i.forEach(s=>s.state=t)}function lr(e,t,i){e&&t.forEach(s=>{var l,c;const r=(c=(l=e.children[s.row])==null?void 0:l.children)==null?void 0:c[s.col];if(!r)return;const{status:n,hasContent:o,type:a,mineCount:h}=s;if(!o&&(n!==q.open||a!=="number"||h!==0)){s.hasContent=!0;const d=ld(s,i);r.add(d)}hd(r,n)})}function ld(e,t){const{type:i,mineCount:s}=e,r={fontSize:t-2,fill:"transparent",textAlign:"center",width:t,height:t,lineHeight:t,transition:.4,corners:8,cornerRadius:1,innerRadius:.2},n={[q.flag]:{fill:"yellow"}},o={[q.question]:{fill:"green"}},a=[{tag:"Text",...r,text:"?",states:o},{tag:"Star",...r,states:n}];if(i==="number"&&!s)return a;const h=i==="mine",l={tag:h?"Star":"Text",...r,text:h?"X":s.toString(),zIndex:h?2:1,states:{[q.open]:{fill:h?"red":"black"}}};return[...a,l]}function gy(e){const{gap:t,leafer:i,blocks:s}=e,r=new at({stroke:"block",strokeWidth:1,flow:"y",gap:t,padding:t*2});s.forEach(n=>{const o=new at({flow:"x",gap:t});r.add(o),n.forEach(a=>{const h=xy(a,e);o.add(h)})}),i.add(r)}function yy(e,t){const{row:i,col:s,status:r}=e;if(r===q.open)return;const{blocks:n}=t;ad(n,i,s,t)}function co(e){Ti({id:"sl-game-over",type:Ut.GAME_OVER,ext:{isWin:e}})}function my(e,t){const{status:i,type:s}=e;if(i===q.open)return;const{leafer:r,blockSize:n}=t;i===q.unopen?(e.status=q.flag,s==="mine"&&++t.mineCount,++t.userMiniCount):i===q.flag?(e.status=q.question,s==="mine"&&--t.mineCount,--t.userMiniCount):i===q.question&&(e.status=q.unopen),lr(r.children[0],[e],n)}function dd(e){const{openBlock:t,mineTotal:i,row:s,col:r,mineCount:n}=e;i===n&&co(!0),t+i>=s*r&&co(!0)}function pl(e,t,i){e===R.TAP?yy(t,i):e===R.MENU_TAP&&my(t,i),dd(i)}function wy(e){const t=e.state;return e.state="highlight",()=>e.state=t}const vy=(()=>{let e=null;const t=i=>{e=()=>{i==null||i(),e=null}};return function(s,r,n,o){if(o.status!=="over"){if(o.isPhone){if(e==null||e(),n.status===q.open&&ud(n))return Ti({id:"sl-phone-handler",type:Ut.PHONE_HANDLER});const a=wy(r);return t(a),Ti({id:"sl-phone-handler",type:Ut.PHONE_HANDLER,ext:{block:n,gameInfo:o,disableAutoLogger:!0,eventCallback(h){e==null||e(),h&&pl(h,n,o)}}})}pl(s.type,n,o)}}})();function xy(e,t){const{blockSize:i}=t,s=new at({width:i,height:i,fill:"yellowgreen",button:!0,zIndex:1,states:{[q.open]:{animation:{keyframes:[{fill:"yellowgreen"},{fill:"transparent"}],duration:1,ending:"to"}},highlight:{animation:{keyframes:[{fill:"#ffcac4"},{fill:"#ff4949"}],duration:.5,swing:!0,loop:!0}}}});return s.on([R.TAP,R.MENU_TAP],r=>vy(r,s,e,t)),s}function by(e){const{row:t,col:i,mineTotal:s,durationOfUse:r,isWin:n,openBlock:o}=e,a=t*i,h=Math.min(s/a,.5)*100*2,l=Math.abs(Math.min(r/1e3/a-1,0))*100,c=o/(a-s)*100,d=.2,p=.2,u=.2;let f;return n?f=Math.min(100,h*d+l*p+40+20):f=Math.min(h*d+(100-l)*p+c*u,60),Number(f.toFixed(3))}function By(e,t){const i=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]);return Math.sqrt(i*i+s*s)}function ky(e,t){const{x:i,y:s}=e,{blockSize:r,gap:n,blocks:o,row:a,col:h}=t,l=r+n,c=Math.floor(s/l),d=Math.floor(i/l);return c>=a||d>=h?null:o[c][d]}function Ao(e){return e.type==="number"&&e.mineCount===0}async function cd(e,t){if(e.status!==q.open||Ao(e))return;const{blocks:i}=t,s=Po(i,e);if(s.some(n=>n.type==="mine"&&n.status!==q.flag))return;const r=s.filter(n=>n.status===q.unopen);if(r.length)return ad(i,r,t).then(()=>dd(t))}function Sy(e){const{leafer:t,mines:i,blockSize:s,blocks:r}=e,n=t.children[0];i.forEach(o=>{var d,p;const[a,h]=o.split("-"),l=r[+a][+h],c=(p=(d=n.children[+a])==null?void 0:d.children)==null?void 0:p[+h];if(!l.hasContent){const u=ld(l,s);c.add(u)}hd(c,q.open)})}const{getStore:Cy}=pd(e=>({gameStatus:"paying",setGameStatus(t){e({gameStatus:t})}}));function Ry(){const[e,t]=Xt.useState(!1);return M.jsxs(M.Fragment,{children:[M.jsx(Td,{buttons:[{text:"重置",onClick:()=>Ti({id:"sl-restart",type:Ut.RESTART})},{text:"游戏配置",onClick:()=>Ti({id:"sl-config",type:Ut.CHANGE_CONFIG})},{text:"游戏记录",onClick:()=>t(!0)}]}),M.jsx(Bd,{open:e,storeKey:yl,onClose:()=>t(!1),children:i=>M.jsx(kd,{$direction:fl.COLUMN,$gap:"0.5",children:M.jsxs(Sd,{$alignItems:yd.CENTER,$justifyContent:gl.BETWEEN,children:[M.jsxs("span",{children:["分数: ",i.score]}),M.jsx(Pd,{format:"yyyy-MM-DD hh:mm:ss",children:i.time})]})},i.gameId)})]})}function Ey(e){return uo({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M248,104a8,8,0,0,1-5.37,7.56L64,173.69V216a8,8,0,0,1-16,0V40a8,8,0,0,1,10.63-7.56l184,64A8,8,0,0,1,248,104Z"},child:[]}]})(e)}function Ty(e){return uo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34"},child:[]},{tag:"path",attr:{d:"M4 6h.01"},child:[]},{tag:"path",attr:{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35"},child:[]},{tag:"path",attr:{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67"},child:[]},{tag:"path",attr:{d:"M12 18h.01"},child:[]},{tag:"path",attr:{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]},{tag:"path",attr:{d:"m13.41 10.59 5.66-5.66"},child:[]}]})(e)}function Py(e){return uo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M80 160c0-35.3 28.7-64 64-64l32 0c35.3 0 64 28.7 64 64l0 3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74l0 1.4c0 17.7 14.3 32 32 32s32-14.3 32-32l0-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7l0-3.6c0-70.7-57.3-128-128-128l-32 0C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"},child:[]}]})(e)}const Hn=xr(wd)`
  padding: 1rem;
  border-radius: var(--radius-full);
  font-size: 2rem;

  &:empty {
    display: none;
  }
`;function Ay(e){switch(e){case q.unopen:return M.jsx(Ey,{});case q.flag:return M.jsx(Py,{});case q.question:return M.jsx(Od,{});case q.open:case void 0:return null;default:return null}}const Oy=xr(as)`
  position: absolute;
  left: 50%;
  bottom: 5rem;
  transform: translateX(-50%);
`,Ly=Xt.memo(function(){const[t,i]=Xt.useState(!1),[s,r]=Xt.useState(null);us(({ext:o={}})=>{const{eventCallback:a,block:h,gameInfo:l}=o;if(!a||!h||!l)return i(!1);r({callback:a,block:h,gameInfo:l}),i(!0)},Ut.PHONE_HANDLER);const n=()=>{const{block:o,gameInfo:a,callback:h}=s;!o||!a||!h||(cd(o,a),h())};return M.jsx(Ld,{when:t,children:()=>{var o,a,h;return M.jsxs(Oy,{$gap:"1",onClick:()=>i(!1),children:[M.jsx(Hn,{onClick:()=>{var l;return(l=s==null?void 0:s.callback)==null?void 0:l.call(s,R.TAP)},children:((o=s==null?void 0:s.block)==null?void 0:o.status)===q.unopen&&M.jsx(Ad,{})}),M.jsx(Hn,{onClick:()=>{var l;return(l=s==null?void 0:s.callback)==null?void 0:l.call(s,R.MENU_TAP)},children:Ay((a=s==null?void 0:s.block)==null?void 0:a.status)}),M.jsx(Hn,{onClick:n,children:((h=s==null?void 0:s.block)==null?void 0:h.status)===q.open&&!Ao(s==null?void 0:s.block)&&M.jsx(Ty,{})})]})}})}),_l=xr.span`
  padding: 1rem;
  font-size: 2rem;
`;function Dy(e){const{gameInfo:t}=e,[i,s]=Xt.useState(0);return us(()=>s(0),Ut.RESTART),Xt.useEffect(()=>{if(t.current.status==="over")return;const r=setInterval(()=>s(n=>n+1),1e3);return()=>clearInterval(r)},[t.current.status]),M.jsxs(as,{$justifyContent:gl.CENTER,children:[M.jsxs(_l,{children:["剩余雷数: ",t.current.mineTotal-t.current.userMiniCount]}),M.jsxs(_l,{children:["用时: ",i]})]})}const Gn=xr(Dd)`
  width: 100%;
`;function $y(e){const{gameInfo:t}=e,[i,s]=Xt.useState(!1),[r]=ii.useForm();return us(()=>s(!0),Ut.CHANGE_CONFIG),M.jsx(Cd,{title:"游戏配置",open:i,onClose:()=>s(!1),children:M.jsxs(ii,{form:r,initialValues:{row:t.current.row,col:t.current.col,mineTotal:t.current.mineTotal},onFinish:n=>{r.validateFields().then(()=>{t.current={...t.current,...n},Ti({id:"sl-config-change",type:Ut.RESTART}),ts.event("sl-config-change",n),s(!1)})},children:[M.jsx(ii.Item,{label:"行数",name:"row",children:M.jsx(Gn,{min:10,max:100})}),M.jsx(ii.Item,{label:"列数",name:"col",children:M.jsx(Gn,{min:10,max:100})}),M.jsx(ii.Item,{label:"雷数",name:"mineTotal",rules:[{async validator(n,o){const{row:a,col:h}=r.getFieldsValue();if(o>a*h)throw new Error(`雷数不能超过${a*h}`)}}],children:M.jsx(Gn,{min:10})}),M.jsx(ii.Item,{children:M.jsxs(as,{$gap:"1",children:[M.jsx(Lo,{$presetTheme:md.PRIMARY,children:"确定"}),M.jsx(Lo,{onClick:()=>s(!1),children:"取消"})]})})]})})}function _w(){const e=Xt.useRef(null),t=Xt.useRef({gameId:Oo(),row:30,col:30,startTime:Date.now(),mineTotal:200,mineCount:0,userMiniCount:0,gap:2,blockSize:20,openBlock:0,mines:[],blocks:[],isPhone:$d(),status:"paying",leafer:null}),i=Xt.useMemo(()=>Cy().setGameStatus,[]),s=()=>{const{leafer:n}=t.current;t.current.mineCount=0,t.current.openBlock=0,t.current.userMiniCount=0,t.current.status="paying",t.current.startTime=Date.now(),t.current.gameId=Oo(),i("paying"),n.clear();const{row:o,col:a,mineTotal:h}=t.current,[l,c]=cy(o,a,h);t.current.blocks=l,t.current.mines=c,gy(t.current)};Xt.useEffect(()=>{if(!t.current.leafer)return t.current.leafer=new Te({view:e.current}),s(),()=>{t.current.leafer.destroy(),t.current.leafer=null}},[]),us(n=>{const{ext:o}=n;t.current.status="over",i("over");const a=(o==null?void 0:o.isWin)||!1;a||Sy(t.current);const{blocks:h,leafer:l,isPhone:c,...d}=t.current,{startTime:p}=t.current,u=Date.now(),f={...d,time:u,isWin:a,durationOfUse:u-p,score:0};f.score=by(f),ts.event("game-sl-over",f),ts.expose("game-sl-over"),_d(yl,f),fd(),Rd({id:"reload-history",type:Ed.RELOAD_HISTORY}),gd().showMessage({type:a?void 0:"error",content:`${a?"恭喜你，胜利了!":"很遗憾，失败了!"} 得分: ${f.score}`})},Ut.GAME_OVER),us(s,Ut.RESTART);const r=Xt.useMemo(()=>{let n=[0,0];return o=>{var a;if(t.current.status!=="over"){if(o.type==="mousedown")return n=[o.clientX,o.clientY];if(o.button===1){const h=[o.clientX,o.clientY];if(By(n,h)>0)return;const c=(a=e.current)==null?void 0:a.getBoundingClientRect();if(!c)return;const{leafer:d}=t.current,p=d.getInnerPointByLocal({x:o.clientX-c.left,y:o.clientY-c.top}),u=ky(p,t.current);if(!u)return;cd(u,t.current)}}}},[]);return M.jsxs(bd,{onFirstAppear:()=>ts.appear("game-sl"),children:[M.jsx(Dy,{gameInfo:t}),M.jsx(as,{$flex:"1",$direction:fl.COLUMN,children:M.jsx(as,{$flex:"1",ref:e,onMouseDown:r,onMouseUp:r})}),M.jsx(Ly,{}),M.jsx($y,{gameInfo:t})]})}const fw={title:"扫雷",needBackIcon:!0,rightArea:M.jsx(Ry,{})};export{_w as Component,fw as handle};
