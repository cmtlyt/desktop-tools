import{r as d,y as e,z as x}from"./index-vpEv5sD-.js";import{h as N,d as l,a as g,B as p,Q as f,A as h,l as c,c as j,x as S,b as A,R as B}from"./index-DsMCs7Ru.js";import{u as E}from"./use-navigate-xBt7TmVS.js";import{B as m}from"./index-ILW44Arb.js";import{E as I}from"./index-9tW2lGkj.js";import{I as R,H as b,a as k,b as v}from"./index-DviKuboU.js";import"./index-3J0ODjeQ.js";import"./index-DdyY_ovP.js";import"./asyncToGenerator-DSdp_N4A.js";const{useStore:Q,useStoreSlice:u,getState:U}=N(o=>({currentNotepad:void 0,setNotepad:t=>o({currentNotepad:t})})),C=l(m)`
  padding-left: 1rem;
`;function L(o){const{notepad:t,onDelete:s}=o,{id:a}=t,{setNotepad:i}=u("setNotepad");return e.jsx(C,{wrapperProps:{$alignItems:g.CENTER},buttons:[{text:"编辑",$presetTheme:p.PRIMARY,to:`/notepad/editor/${a}`,onClick:()=>i(t)},{text:"删除",$presetTheme:p.DANGER,logInfo:{id:a},onClick(n){n.stopPropagation(),s==null||s(a)}}]})}const T=d.memo(o=>{const{notepad:t,onDelete:s,onClick:a}=o;return e.jsx(R,{onClick:a,children:e.jsxs(b,{rightArea:e.jsx(L,{notepad:t,onDelete:s}),children:[e.jsx(k,{children:t.title}),e.jsx(v,{children:t.createTime})]})})}),$=l(A)`
  padding: var(--page-padding);
`;function D(o){B().deleteNotepad(o)}function W(){const o=x(),{setNotepad:t}=u("setNotepad"),{notepads:s}=f("notepads"),{notepads:a}=o,i=E(),n=d.useMemo(()=>a||s,[s,a]);return d.useEffect(()=>{t(void 0)},[t]),e.jsx(h,{onFirstAppear:()=>c.appear("notepad-list"),children:e.jsx($,{$direction:j.COLUMN,children:e.jsx(S,{if:n.length>0,fullback:e.jsx(I,{}),children:()=>n.map(r=>e.jsx(T,{notepad:r,onClick:()=>{t(r),c.click("notepad-item-click",{id:r.id}),i(`/notepad/preview/${r.id}`)},onDelete:D},r.id))})})})}function H(){return e.jsx(m,{buttons:[{text:"新建",to:"/notepad/editor",$presetTheme:p.PRIMARY}]})}const q={title:"笔记列表",crumbLabel:"列表",rightArea:e.jsx(H,{})};async function J(){return window.logger.todo("请求接口加载笔记信息, 报错时使用本地存储中的笔记信息"),{notepads:null}}export{W as Component,q as handle,J as loader};
