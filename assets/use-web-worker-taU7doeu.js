import{r as u,aL as i}from"./index-D6qafkXg.js";function l(r){return new Proxy({async action(t,e,s=[]){var o,a;const{promise:n,resolve:m}=i(),c=({data:{result:d}})=>{var f;m(d),(f=r.current)==null||f.removeEventListener("message",c)};return(o=r.current)==null||o.addEventListener("message",c),(a=r.current)==null||a.postMessage({action:t,option:e},s),n}},{get(t,e,s){if(e in t)return Reflect.get(t,e,s);const n=r.current[e];return typeof n=="function"?n.bind(r.current):n}})}function g(r,t){const e=u.useRef(null),s=u.useMemo(()=>l(e),[]);return u.useEffect(()=>(e.current=new Worker(r,{type:"module"}),t==null||t(s),()=>{var n;(n=e.current)==null||n.terminate()}),[r]),s}export{g as u};
