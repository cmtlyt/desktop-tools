import{x as o,y as A,r as u}from"./index-BUm1efIT.js";import{O as g}from"./index.esm-hAynTbL8.js";import{A as x}from"./index-CYrVEgpT.js";import{l as r,B as b,M as d,g as v}from"./index-C3E55VMa.js";import{B as S}from"./index-C1796vyK.js";import{S as y,c as E}from"./Subject-BuatV6Iq.js";import{u as j}from"./use-navigate-Ctps9XF4.js";import{u as h}from"./use-global-event-Ug9e8G39.js";import{g as k,A as B,T as R}from"./title-area--f6peLvI.js";import"./iconBase-ChGnTlbA.js";import"./index-BtcKOnEI.js";import"./index-2tQZx52y.js";import"./asyncToGenerator-DxuXOBX7.js";import"./store-DeHzsrzz.js";import"./index-DhzCklt-.js";var n=(t=>(t.SAVE="save",t))(n||{});const m=new y;function w(t){m.next(t),r.event("notepad-editor-action",t)}const C=E(m);function L(){return o.jsx(S,{buttons:[{text:"保存",$presetTheme:b.PRIMARY,onClick:()=>w({id:"notepad-editor-save",type:n.SAVE})}]})}function q(){const{id:t}=A(),a=u.useRef(null),s=j(),i=u.useCallback(async()=>{var p;const e=(p=a.current)==null?void 0:p.getMarkdown();if(!e)return;r.event("notepad-editor-save",{id:t});const l=await g(e),{title:f}=k(),c={id:t,title:f,content:l};t?d().updateNotepad(t,c):d().addNotepad(c),v().showMessage({content:"保存成功",type:"success",onClose:()=>s(-1)})},[t,s]);return C(i,n.SAVE),h("keydown",e=>{e.key==="s"&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i())}),o.jsx(x,{onFirstAppear:()=>r.appear("notepad-editor"),children:o.jsx(B,{ref:a})})}const J={title:"编辑笔记",crumbLabel:"编辑",needBackIcon:!0,rightArea:o.jsx(L,{}),titleArea:o.jsx(R,{})};async function Q({params:t}){return{id:t.id}}export{q as Component,J as handle,Q as loader};
