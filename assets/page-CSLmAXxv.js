import{y as e,z as f,r as A}from"./index-566Ptau1.js";import{O as l}from"./store-DLxM_2yZ.js";import{A as g}from"./index-CVBc4MXj.js";import{l as o,B as x,M as c,g as S}from"./index-C_F239hU.js";import{B as b}from"./index-CAKjnHWk.js";import{S as E,c as j}from"./Subject-CCgnCCC-.js";import{u as v}from"./use-navigate-DReB3TYo.js";import{g as h,A as y,T as B}from"./title-area-D7jckSRf.js";import"./index-oTfSKDWY.js";import"./index-DeVuV3A2.js";import"./asyncToGenerator-Cb_jwySD.js";var r=(t=>(t.SAVE="save",t))(r||{});const p=new E;function R(t){p.next(t),o.event("notepad-editor-action",t)}const L=j(p);function N(){return e.jsx(b,{buttons:[{text:"保存",$presetTheme:x.PRIMARY,onClick:()=>R({id:"notepad-editor-save",type:r.SAVE})}]})}function O(){const{id:t}=f(),n=A.useRef(null),d=v();return L(async()=>{var i;const a=(i=n.current)==null?void 0:i.getMarkdown();if(!a)return;o.event("notepad-editor-save",{id:t});const u=await l(a),{title:m}=h(),s={id:t,title:m,content:u};t?c().updateNotepad(t,s):c().addNotepad(s),S().showMessage({content:"保存成功",type:"success",onClose:()=>d(-1)})},r.SAVE),e.jsx(g,{onFirstAppear:()=>o.appear("notepad-editor"),children:e.jsx(y,{ref:n})})}const P={title:"编辑笔记",crumbLabel:"编辑",needBackIcon:!0,rightArea:e.jsx(N,{}),titleArea:e.jsx(B,{})};async function Y({params:t}){return{id:t.id}}export{O as Component,P as handle,Y as loader};
